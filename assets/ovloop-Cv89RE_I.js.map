{"version":3,"file":"ovloop-Cv89RE_I.js","sources":["../../src/vue/src/components/UiKit/Animation/animations/ovloop.ts"],"sourcesContent":["import { gsap, SplitText, CustomEase } from 'vendors/gsap';\nimport { each } from 'lodash';\n\nexport default class OvloopAnimation implements AnimationInterface {\n  el?:HTMLElement;\n  split?:SplitText;\n  tl?:Timeline;\n\n  constructor(els:{\n    el?:HTMLElement,\n  }) {\n    this.el = els.el;\n\n    this.init();\n\n    return this;\n  }\n\n  init() {\n    if (this.el) {\n\n      this.split = new SplitText(this.el, {\n        type: 'lines,words,chars',\n        charsClass: 'char',\n        linesClass: 'line',\n        wordsClass: 'word',\n        reduceWhiteSpace: false,\n      });\n\n      this.tl = gsap.timeline(\n        { \n          paused: true,\n          autoRemoveChildren: false,\n          repeatRefresh: true,\n          // scrollTrigger: {\n          //   trigger: this.el,\n          //   start: 'top bottom',\n          //   end: 'top top',\n          //   scrub: true,\n          // },\n        }\n      )\n        .fromTo(this.el,\n          {\n            alpha: 0,\n          },\n          { \n            alpha: 1, \n            delay: 0.5,\n            duration: 0.5, \n            ease: 'power4.in',\n          },\n          '0'\n        );\n\n      each(this.split.lines, (line, index) => {\n        const chars = line.querySelectorAll('.char');\n        if (!chars) return;\n        const charsTotal = chars.length;\n        this.tl?.add(\n          gsap.fromTo(chars, \n            {\n              yPercent: 100,\n              x: position => {\n                const factor = position < Math.ceil(charsTotal/2) ? position : Math.ceil(charsTotal/2) - Math.abs(Math.floor(charsTotal/2) - position) - 1;\n                return (charsTotal%2 ? Math.abs(Math.ceil(charsTotal/2)-1-factor) : Math.abs(Math.ceil(charsTotal/2)-factor) )*10*(position < charsTotal/2 ? -1 : 1);\n              },\n            },\n            { \n              x: 0, \n              yPercent: 0, \n              delay: 0.6 + (index * 0.04),\n              duration: 2.5, \n              stagger: {\n                grid: 'auto',\n                from: 'center'\n              },\n              ease: CustomEase.create('ovloop', '0.230, 1.000, 0.320, 1.000'),\n            },\n          ), \n          '0'\n        )\n      });\n    }\n  }\n\n  enter = () => {\n    if (this.tl) {\n      this.tl.timeScale(1).play(0);\n    }\n  }\n\n  display = () => {\n    if (this.tl) {\n      this.tl.totalProgress(1, false);\n    }\n  }\n\n  update = () => {\n    if (this.el) {\n      this.split = new SplitText(this.el, {\n        type: 'lines,words,chars',\n        charsClass: 'char',\n        linesClass: 'line',\n        wordsClass: 'word',\n        reduceWhiteSpace: false,\n      });\n    }\n  }\n  \n  leave = () => {\n    if (this.tl) {\n      this.tl.timeScale(2).reverse();\n    }\n  }\n\n  dispose() {\n    this.split?.revert();\n    this.tl?.kill();\n    this.tl = undefined;\n    this.split = undefined;\n  }\n}\n"],"names":["OvloopAnimation","els","__publicField","SplitText","gsap","each","line","index","chars","charsTotal","_a","position","factor","CustomEase","_b"],"mappings":"iSACqB,MAAAA,CAAA,CAOnB,YAAAC,EAAA,CALiEC,EAAA,WAEjEA,EAAA,cACAA,EAAA,WAwEUA,EAAA,aAAA,IACF,CACA,KAAA,IAAA,KAAA,GACF,UAAA,CAAA,EAAA,KAAA,CAAA,CACD,GACHA,EAAA,eAAA,IACF,CAEc,KAAA,IAAA,KAAA,GACC,cAAA,EAAA,EAAA,CAEb,GACFA,EAAA,cAAA,IAAA,WAGE,KAAA,MAAA,IAAAC,EAAA,KAAA,GAAA,CACO,KAAA,oBACP,WAAA,kBAGa,OACT,WAAS,OACX,iBAA2B,EAAA,CAAS,KAItBD,EAAA,iBACM,CACnB,KAAA,IACH,KAAA,GAAA,UAAA,CAAA,EAAA,QAAA,mBA9FUD,EAGZ,GAEO,KAAA,KAAA,EAGU,IACL,CACM,MAAA,CAGM,KAAA,KAAA,WACnB,IAAAE,EAAA,KAAA,GAAA,CAGC,KAAA,oBAAA,WACU,OAAA,WACY,OAAA,WACL,OAAA,iBAAA,EAAA,CAAA,EAAA,KAAA,GAAAC,EAAA,SAAA,CAAA,OAAA,GAAA,mBAAA,GAAA,cAOjB,EAEa,CAAA,EAAA,OAAA,KAAA,GAAA,CAAA,MAAA,CAAA,EAMF,CAGT,MAAA,EAAA,MAAA,GACA,SAAA,GAAA,KACF,WAEF,EAAA,GAAA,EACQC,EAAA,KAAA,MAAA,MAAA,CAAAC,EAAAC,IAAA,OAAA,MACMC,EAAAF,EAAA,iBAAA,OAAA,EAAA,mBAEHG,EAAAD,EAAA,QAAAE,EAAA,KACF,KADE,MAAAA,EACF,IAAAN,EAAA,OAAAI,EAAA,CAAO,SAAA,IACV,EAAAG,GAAA,CAAA,MAAAC,EAAAD,EAAA,KAAA,KAAAF,EAAA,CAAA,EAAAE,EAAA,KAAA,KAAAF,EAAA,CAAA,EAAA,KAAA,IAAA,KAAA,MAAAA,EAAA,CAAA,EAAAE,CAAA,EAAA,EAGU,OAAAF,IAAyB,KAAA,IAAA,KAAA,KAAAA,EAAA,CAAA,EAAA,EAAAG,CAAA,EAAA,KAAA,IAAA,KAAA,KAAAH,EAAA,CAAA,EAAAG,CAAA,GAAA,IAAAD,EAAAF,EAAA,EAAA,GAAA,EACvB,CACV,EAAA,CACF,EAAA,EACA,SAAA,EAAA,MACK,GAAAF,EAAA,IAAA,SAAA,IAAA,QAAA,CAAA,iBAGO,QACD,EACD,KAAAM,EAAA,OAAA,SAAA,4BAAA,CAAA,CAAA,EAAA,IAAA,CAER,EAAA,CAoCR,mBACFH,EAAA,KAAA,QAAA,MAAAA,EAAA,UAAAI,EAAA,KACF,KADE,MAAAA,EACF,OAAA,KAEU,GAAA,OAAA,KACW,MAAA,MAAA,CACL"}