{"version":3,"mappings":"unCACA,IAAIA,GAAY,KAAK,IACjBC,GAAY,KAAK,IAWrB,SAASC,GAAYC,EAAQC,EAAOC,EAAK,CACvC,OAAOF,GAAUF,GAAUG,EAAOC,CAAG,GAAKF,EAASH,GAAUI,EAAOC,CAAG,CACzE,CAEA,IAAAC,GAAiBJ,GCjBbA,GAAcK,GACdC,GAAWC,GACXC,GAAWC,GAwCf,SAASC,GAAQT,EAAQC,EAAOC,EAAK,CACnC,OAAAD,EAAQI,GAASJ,CAAK,EAClBC,IAAQ,QACVA,EAAMD,EACNA,EAAQ,GAERC,EAAMG,GAASH,CAAG,EAEpBF,EAASO,GAASP,CAAM,EACjBD,GAAYC,EAAQC,EAAOC,CAAG,CACvC,CAEA,IAAAQ,GAAiBD,mBCnDjBE,EAAwE,CAaxE,OAGM,QACA,OAEC,YACL,aACAC,GAAA,IAAAC,GAAA,CAKe,wBAE2B,GAC1CC,GAAA,IAAAC,GAAA,CAAoB,KAAAC,GACI,UAGxB,YAAqB,KACR,MAAAC,WAAAC,EAAA,CAoCK,YAGRC,EAAA,OAEL,QAzCQC,EAAA,eAGbA,EAAA,aAAUA,EAAA,eACVA,EAAA,gBAAU,IAAAA,EAAA,uBAAAA,EAAA,yBAAAA,EAAA,4BAURA,EAAA,6BAAY,kGAaLA,EAAA,mBAeL,oCAAAC,GAAA,SAEJ,gBAAAF,EAAA,SAAAA,EAAA,qBAAAA,EAAA,mCAAAA,EAAA,UAAAR,IAAAW,EAAA,6BAAAA,EAAA,yBAAAC,GAAA,IAAAC,GAAA,KAAAV,GAAA,yBAAAW,GAAAb,GAAA,gDAAAc,EAAA,uBAAAA,EAAA,cAAAC,EAAA,KAAAC,EAAA,oBAAAC,GAAAP,EAAA,0BAAAA,EAAA,iBAAAO,EAAA,sBAkGU,OAAAC,EAAyB,CAEzB,MAAAC,OACU,oBACV,eAAAA,GAAA,uBAAAA,EAAA,EAAAA,CAAA,EAGF,KAA4B,YAAAA,EAAA,EAAmB,kBAAAA,EAAA,EAAAA,CAAA,CAM/C,CAeD,OAAAC,EAA8B,mBAMhC,MAAAC,cAAc,oDAGG,MAAAtB,EAAA,IAIXuB,IAA4BL,EAAA,mCAAAA,EAAA,OAAAlB,EAAA,KACnCwB,IAAAC,EAAA,mCAAAA,EAAA,OAAAzB,EAAA,KAOE0B,EAAyB,4BAEvBC,EAA4C,8DAE5CC,EAAAC,GAAA,KAAAA,EAAA,IAAAA,IAAA,KAAAA,OAKMC,IAAAC,EAAA,mCAAAA,EAAA,iBACF,eAAiB,iBACfT,EAAA,SAAyB,gCAE3B,CAEoB,qCACpB,gCACF,IAAAU,EAAAC,EAAA,mDAKFC,EAAAF,EAAA,mBA0BN,GAtBKE,IAEA,kDACiB,4BAChB,2BAAmB,IAGnB,6BACF,oBAGA,KAAiB,qBAGjBF,EAAAC,EAAA,mDAIAC,EAAkBF,EAAA,qBAItBE,EAAA,CAIF,GAAAJ,EAAA,OAAAK,KAAAC,EAAA,mCAAAA,EAAA,gBAAAF,GAAAC,IAAA,IAKenB,EAAA,KAAAC,EAAA,yBAAAoB,EAAA,mCAAAA,EAAA,OAAAF,EAAA,CACR,CAMA,MAAAG,EAAsB,2CACzBhB,EAAA,SAAa,iCACfA,EAAA,eAAAgB,EAAA,OAAAJ,CAAA,UAAAI,EAAA,OAAAA,EAAA,OAAAJ,CAAA,UAAAI,EAAA,UAIF,eAAAA,EAAA,OAAAJ,CAAA,UAAAI,EAAA,SAAAA,EAAA,OAAAJ,CAAA,UAAAI,EAAA,OAAAA,EAAA,OAAAJ,CAAA,UAAAI,EAAA,OAME,CACA,CAAe,CAEjBhB,EAAA,KAAAA,EAAA,0EAOA,cAAAiB,IAAA,MAMyB,2BAKbC,EAAA,0BAAY,4BAAAD,EAAAlB,EAAA,UAAAO,EAAA,MACE,KAIL,qDACN,kBAAW,qCACnB,8EAGWZ,EAAA,KAAAC,EAAA,uCACKM,EAGZC,EAAsB,EACtB,KAAQ,MAA0B,GAGrCG,IAED,yBAED,+BAEF,oBAIC,2BAML,wxCCzVK,MAAcc,EAAA,CAEZ,kBACP,MAAW,QACX,UAAoB,YACpB,mBAAmB,qBACnB,kBAAK,oBACP,WAGAC,GAAAb,GAAA,KAAAA,EAAA,IAAAA,IAAA,KAAAA,OAIAc,GAAA,IAAwC,IAAAC,uBA6BvB,YACCC,EAAA,cAEH,EA1BbpC,EAAA,kBAGAA,EAAA,kBAEAA,EAAA,mBAEAA,EAAA,kBAEAA,EAAA,iBAEAA,EAAA,kBAAkB,IAElBA,EAAA,qBACEA,EAAA,mBAAAgC,EAAA,SAGKhC,EAAA,mBAAgB,IACrBA,EAAA,oBAAiB,IAEZA,EAAA,oBAEHA,EAAA,oBAKA,gBAAYE,EAAA,4BAAAA,EAAA,OAET,sBAEA,eAASmC,EAAA,yEACd,KAAK,aAAS,IAAAC,GAAW,CAIpB,eAAAC,GAAmBC,EAAA,uBAAAA,EAAA,yBACxB,eAAiB,UAAU,cAGrB,YACD,aAEL,UAAW,EAEJ,UACT,+BAEQ,EACD,iCAEA,6BAA6B,iCAEpC,0DAES,qBAAA3C,GAAA,4BAGF,iBAAO,KAAwB,cAChC,iBAAoB,WACnB,QAAyC4C,EAAA,+DAI9C,oCAAAnC,CAAA,EAEKC,EAAA,GAAAC,yBAAyB,8BAE9B,IAGA,CAEQ,QAGD,+BACH,eAAmB,qDAElB,aAEe,CAA2B,iBAI7C,sCAEM,aAAgB,mBAAmB,GACzC,YAAgB,iBACLN,EAAA,mBAAAA,EAAA,WACXO,EAAA,mBAAAA,EAAA,WAGK,iDAIL,CAGK,gCAIF,mCACH,eAAe,QAEf,YAAc,EACdiC,EAAA,aAAc,CAAAC,EAAAC,IAAA,OAGT,MAAAC,EAAAC,GAAe,aAAAH,CAAA,EAIhB,IAAAI,EAA+B,GACrCL,OAAoC,SAGbM,GAAAC,EAAA,UAAAf,EAAA,EAAAgB,qBACEA,EAEpB,EACAH,IAAA,OAAAI,CAAA,CAIH,CAA+B,EAC1B,MAAAC,EAAA,IAAAC,GAIDD,EAAA,WAAiC,EACvC,MAAA5D,OAAmC,qBAElBoD,EAAA,gBAAU,6BAGxBpD,YAAe,KAAkB,WAAAoD,CAAA,GAE7B,MAAAU,EAAA,IAAAnD,GAAAiD,EAAA5D,CAAA,EAGJ8D,EAAA,KAAe,QAAAV,CAAA,GAIpB,MAAAW,WAH8B,cAAAD,CAAA,gBAG9BE,EAAA,EAAAF,EAAA,SAAAC,KAAA,EAMmB,MAAAE,IAAAvD,EAAA,yCAAAA,EAAA0C,KAAA,CAKJ,IACb,GAEE,EAEJa,EAAA,OAAAH,EAAA,wBAAAG,EAAA,MAAAC,EAAA,IAEiC,QAAAD,EAAA,oBAAAA,EAAA,QAGbH,EAAA,YAAAG,EAAqB,qCAElBA,EAAA,wBAEnB,mBAAAH,CAAA,EAIE,gBAAAA,EACK,GAEF,MAAMK,EAAA,KAAmB,kEAGxBC,EAAA,yBAAAD,EACF,eAAc,MAAS,IAAAC,EAASA,GAAA,EAElC,MAAAC,EAD2F,+CAC3F,IAAAL,EAAA,EAKU,uDACN,wBAAgB,IACT,0BACP,+BAIM,+BAA4B,GAGlC,MAAAM,EADY,eAAS,kBAAAtB,EAAA,4CACrBoB,EAKMG,EAAAD,EAA4B,iCAClC,iBAAU,MAAe,IAAAA,EAAAC,EAAa,GACpC,eAAuB,mBACzB,qFAEJ,uFAGD,0CACH,8FAEA,gGAQG,SACI,eAGP,eAAiB1B,2EACnB,iCAAAG,EAAA,uBAAAA,EAAA,yBAEQ,sBACqC,gBAGzC,qBACC,cAFE,YAML,CAGA,OAAA5B,EAAqB,SAErB,aAAwBA,CAAA,EAGhB,MAAAoD,EAAA,mBAAAhC,EAAA,6BACR,QAAW,aAEX,QAA0B,gBAC1BiC,SAAc,SAChBvB,EAAA,yBAAAlD,EAAA8D,EAAA,SAAAvB,EAAAvC,EAAA,6GAAAoB,EAAA,UAAAqB,GAAA+B,CAAA,uBAQyCV,EAAA,WAAAA,EAAA,6BAAA1C,EAAA,QAAAsD,EAAAtB,CAAA,EACrCU,EAAA,WAAAA,EAAA,6BAAA1C,EAAA,QAAAqD,EAAArB,CAAA,GAFIU,EAAA,6BAA+B,QAMvCV,IAAA,mBAAAZ,EAAA,gFAMgB,KAEK,UAAAA,EAAA,mBAOf,mBAAsCA,EAAA,qBACxC,0DAE6B,IAC7B,UAAAA,EAAA,KAMJ,mBAAAA,EAAA,iCAAAxC,EAAA,sFAKQ,0BAQJ,gBAAAoD,CAAA,EAAApD,EAAA,SAEF,EACF,6BAAA2E,IAAAjE,EAAA,sDAAAA,gBAAA,IAAAkE,OAAA,4DAAAD,GAKoBE,EAAA,mBAAArC,EAAA,wBAIlBD,EAAA,qBAAsB,6BAAAqC,EAAA,iDAAAC,EAAAzD,EAAA,UAAAqB,GAAA+B,CAAA,CAEjB,CAGI,4BACHvD,EAAA,yBAAAA,SAAkBG,IACwE,+EAI5F,uDACF,CAEJ,cAAAL,QAAA,qDAAAmC,EAAA,WAAA4B,GAAA,UAKmBpE,EAAAoE,EAAA,iBAAApE,EAAA,WACTO,EAAA6D,EAAA,iBAAA7D,EAAA,UAGR6D,SAGF,GACQ,4BACH,cAAe,EACV,qBAAmB,EACvB,kBAEIpE,EAAA,yBAAAA,EAAA,OACR,CACF,qEAAAA,EAAA,yBAAAA,EAAA,0BAcM,gBACI,MAAAqE,KAA2BC,EAAA,CACnC,MAAAhC,EAAA,uBAGJ,OAAAA,EAAA,slDCpYAiC,GAAeC,EAAgB,CAC7B,KAAM,iBACN,MAAO,CACL,MAAO,CACL,KAAM,OACN,QAAS,MACX,EACA,SAAU,CACR,KAAM,OACN,QAAS,MACX,EACA,IAAK,CACH,KAAM,OACN,QAAS,MACX,EACA,QAAS,CACP,KAAM,OACN,QAAS,UAEb,EACA,MAAO,CAAC,UAAU,EAClB,MAAMC,EAAO,CAAE,KAAAC,GAAQ,CAEf,MAAAC,EAAKC,EAAyB,IAAI,EAClCC,EAAWD,EAAyB,UAAU,EAC9CE,EAAQF,EAAyB,OAAO,EACxCG,EAAWH,EAAyB,UAAU,EAG9CI,EAAY,IAAM,OACjBC,EAAA,WACF,IAAI,IAAM,CACNN,EAAA,MAAM,UAAU,OAAO,QAAQ,GACjC,CAAC,EACH,KAAKG,EAAM,MAAO,CAAE,MAAO,GAAI,QAAS,EAAG,KAAM,eAAgB,SAAU,GAAI,EAAG,CAAC,EACnF,KAAKC,EAAS,MAAO,CAAE,SAAU,GAAI,QAAS,EAAG,KAAM,aAAc,SAAU,KAAO,EAAE,EACxF,MAAK/E,EAAA6E,EAAS,QAAT,YAAA7E,EAAgB,IAAK,CAAE,SAAU,IAAK,QAAS,EAAG,KAAM,aAAc,SAAU,GAAI,EAAG,EAAE,CACnG,EAGMkF,EAAa,IAAM,CACvBD,EAAK,WACF,GAAGN,EAAG,MAAO,CAAE,QAAS,EAAG,WAAY,MAAO,KAAM,aAAc,SAAU,IAAM,CAAC,EACnF,IAAI,IAAM,CACNA,EAAA,MAAM,UAAU,IAAI,QAAQ,GAC9B,EAAE,CACT,EAEMQ,EAAS,IAAM,CACfC,EAAW,SAEfC,EAAoB,EAAG,CACrB,SAAU,OACV,OAAQvD,EAAM,UACf,CACH,EAEMwD,EAAQ,IAAM,CACdF,EAAW,SAEfC,EAAoB,EAAG,CACrB,SAAU,OACV,OAAQvD,EAAM,MACf,CACH,EAEMyD,EAAkB,IAAM,CAC5Bb,EAAK,UAAU,CACjB,EAEO,OACL,GAAGc,EAAOf,CAAK,EAEf,UAAAO,EACA,WAAAE,EACA,OAAAC,EACA,MAAAG,EACA,gBAAAC,CACF,EAEJ,CAAC,EA/FDE,GAAA,oFAmGEC,EAsBU,aArBI,OAAAC,EAAA,EAAwBC,EAAA,WAC5B,SACA,6CAAAC,EAAA,QAER,YAQE,OAPeC,EAAK,CACX,IAAK,WACJ,MAAO,MACP,MAAOC,UACP,QAAWZ,UACX,MAAUG,MACV,YAAOC,4BAEnB,QAAAM,EAAA,iBAAI,KAAI,EAAO,0DACEG,EAAA,MACb,0BAEJ,UAAAH,EAAA,OAAI,KAAI,EAAUI,EAAA,EACED,EAAA,MAChB,gCAvHR,UAAAH,EAAA,iBAAAK,EAAA,wECCeC,GAAA,CACb,QAAS,gBACT,IAAK,CACH,MAAO,UACP,UAAW,KACX,IAAK,2CACL,MAAO,KACP,OAAQ,IACR,QAAS,KACT,MAAO,CACL,QAAS,CACP,KAAM,EACN,MAAO,EACT,EACA,MAAO,CACL,KAAM,KACN,MAAO,EACT,EACA,UAAW,CACT,KAAM,KACN,MAAO,EACT,EACA,mBAAoB,CAClB,KAAM,IACN,MAAO,GAET,EACA,kBAAmB,CACjB,KAAM,GACN,MAAO,GAET,EACA,IAAK,CACH,KAAM,EACN,MAAO,EAEX,EACA,aAAc,CACZ,EAAG,MACH,EAAG,KACL,EACA,QAAS,CACP,CACE,EAAG,EACH,EAAG,CAGL,EACA,CACE,EAAG,KACH,EAAG,KAGL,EACA,CACE,EAAG,MACH,EAAG,MAGL,CAEJ,EACA,YAAa,CACX,GAAI,MACJ,OAAQ,QACR,MAAO,KAAK,KACZ,aAAc,IACd,OAAQ,GACR,MAAO,GACP,KAAM,CACJ,IAAK,4CACL,gBAAiB,KACnB,EACA,SAAU,CACR,IAAK,IACL,KAAM,GACN,KAAM,EACN,SAAS,GACT,SAAS,EACX,EACA,aAAc,CACZ,EAAG,KACH,EAAG,KACL,EACA,MAAO,KACP,UAAW,GAEf,ECvFeC,GAAA,CACb,QAAS,gBACT,IAAK,CACH,MAAO,UACP,UAAW,KACX,IAAK,wCACL,MAAO,KACP,OAAQ,IACR,QAAS,KACT,MAAO,CACL,QAAS,CACP,KAAM,EACN,MAAO,EACT,EACA,MAAO,CACL,KAAM,KACN,MAAO,EACT,EACA,UAAW,CACT,KAAM,IACN,MAAO,EACT,EACA,mBAAoB,CAClB,KAAM,IACN,MAAO,GAET,EACA,kBAAmB,CACjB,KAAM,GACN,MAAO,GAET,EACA,IAAK,CACH,KAAM,EACN,MAAO,IAEX,EACA,aAAc,CACZ,EAAG,KACH,EAAG,CACL,EACA,QAAS,CACP,CACE,EAAG,EACH,EAAG,CACL,EACA,CACE,EAAG,EACH,EAAG,CACL,EACA,CACE,EAAG,EACH,EAAG,EACL,CAEJ,EACA,YAAa,CACX,GAAI,UACJ,OAAQ,QACR,MAAO,KAAK,IACZ,aAAc,IACd,OAAQ,GACR,MAAO,GACP,KAAM,CACJ,IAAK,yCACL,gBAAiB,KACnB,EACA,SAAU,CACR,IAAK,IACL,KAAM,GACN,KAAM,EACN,SAAS,GACT,SAAS,EACX,EACA,aAAc,CACZ,EAAG,MACH,EAAG,EACH,YAAa,EACf,EACA,MAAO,KACP,UAAW,GAEf,EClFeC,GAAA,CACb,QAAS,gBACT,IAAK,CACH,MAAO,UACP,UAAW,KACX,IAAK,gDACL,MAAO,KACP,OAAQ,IACR,QAAS,KACT,MAAO,CACL,QAAS,CACP,KAAM,EACN,MAAO,EACT,EACA,MAAO,CACL,KAAM,KACN,MAAO,EACT,EACA,UAAW,CACT,KAAM,KACN,MAAO,EACT,EACA,mBAAoB,CAClB,KAAM,IACN,MAAO,CACT,EACA,kBAAmB,CACjB,KAAM,IACN,MAAO,GACT,EACA,IAAK,CACH,KAAM,EACN,MAAO,GAEX,EACA,aAAc,CACZ,EAAG,IACH,EAAG,CACL,EACA,QAAS,CACP,CACE,EAAG,EACH,EAAG,IACL,EACA,CACE,EAAG,KACH,EAAG,IACL,EACA,CACE,EAAG,MACH,EAAG,MACL,CAEJ,EACA,YAAa,CACX,GAAI,WACJ,OAAQ,QACR,MAAO,KAAK,IACZ,aAAc,IACd,OAAQ,GACR,MAAO,GACP,KAAM,CACJ,IAAK,iDACL,gBAAiB,KACnB,EACA,SAAU,CACR,IAAK,IACL,KAAM,GACN,KAAM,EACN,SAAS,GACT,SAAS,EACX,EACA,aAAc,CACZ,EAAG,MACH,EAAG,KACH,YAAa,EACf,EACA,MAAO,KACP,UAAW,EAEf,EChFeC,GAAA,CACb,QAAS,gBACT,IAAK,CACH,MAAO,UACP,UAAW,KACX,IAAK,sCACL,MAAO,KACP,OAAQ,IACR,QAAS,KACT,MAAO,CACL,QAAS,CACP,KAAM,EACN,MAAO,EACT,EACA,MAAO,CACL,KAAM,IACN,MAAO,EACT,EACA,UAAW,CACT,KAAM,KACN,MAAO,EACT,EACA,mBAAoB,CAClB,KAAM,GACN,MAAO,GAET,EACA,kBAAmB,CACjB,KAAM,GACN,MAAO,GAET,EACA,IAAK,CACH,KAAM,EACN,MAAO,EAGX,EACA,aAAc,CACZ,EAAG,KACH,EAAG,CACL,EACA,QAAS,CACP,CACE,EAAG,EACH,EAAG,CACL,EACA,CACE,EAAG,MACH,EAAG,IACL,EACA,CACE,EAAG,KACH,EAAG,MACL,CAEJ,EACA,YAAa,CACX,GAAI,QACJ,OAAQ,QACR,MAAO,KAAK,IACZ,aAAc,IACd,OAAQ,GACR,MAAO,GACP,KAAM,CACJ,IAAK,uCACL,gBAAiB,KACnB,EACA,SAAU,CACR,IAAK,IACL,KAAM,GACN,KAAM,EACN,SAAS,GACT,SAAS,EACX,EACA,aAAc,CACZ,EAAG,MACH,EAAG,MACH,YAAa,GACf,EACA,MAAO,KACP,UAAW,GAEf,ECnFeC,GAAA,CACb,QAAS,gBACT,IAAK,CACH,MAAO,UACP,UAAW,KACX,IAAK,iDACL,MAAO,KACP,OAAQ,IACR,QAAS,KACT,MAAO,CACL,QAAS,CACP,KAAM,EACN,MAAO,EACT,EACA,MAAO,CACL,KAAM,KACN,MAAO,EACT,EACA,UAAW,CACT,KAAM,KACN,MAAO,EACT,EACA,mBAAoB,CAClB,KAAM,IACN,MAAO,GAET,EACA,kBAAmB,CACjB,KAAM,GACN,MAAO,GAET,EACA,IAAK,CACH,KAAM,EACN,MAAO,EAEX,EACA,aAAc,CACZ,EAAG,KACH,EAAG,GACL,EACA,QAAS,CACP,CACE,EAAG,MACH,EAAG,CACL,EACA,CACE,EAAG,MACH,EAAG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","names":["nativeMax","nativeMin","baseInRange","number","start","end","_baseInRange","require$$0","toFinite","require$$1","toNumber","require$$2","inRange","inRange_1","DEFAULT_CONFIG","material","SpriteMaterial","materialPlane","MeshBasicMaterial","DoubleSide","WebGLSpritesheetPlayer","Group","config","__publicField","random","_a","Mesh","PlaneGeometry","Sprite","textures","emitter","EVENTS","_b","scaleMultiplier","multiplier","params","mat","loop","wait","_c","waitDamped","multipleJSON","easing","t","hasEvents","_d","frameNames","keys","currentFrameName","frameEvent","_e","_f","currentTextureSheet","fps","damp","STEPS","DAMP_EASING","PTS_QUALITY","RAF","options","calculateUnitSize","MeshLineMaterial","Vector2","mainWebGLRenderer","loaderStore","each","path","index","shapes","SVGLoader","computePoints","map","shapePath","pt","points","geometry","MeshLineGeometry","mesh","box","Vector3","debug","SRGBColorSpace","svgWidthUnit","scaleFactor","size","baseScale","planeHeight","precision","randomsY","randomsX","offsetValue","target","speedRatio","line","v3d","v","_sfc_main$1","defineComponent","props","emit","el","templateRef","discover","title","subtitle","animateIn","gsap","animateOut","onOver","themeStore","interactWithSceneAt","onOut","launchAnimation","toRefs","_hoisted_1","_resolveComponent","_openBlock","_createElementBlock","_ctx","_component_ui_button","cta","_createElementVNode","_hoisted_2","_hoisted_3","art","charles","festival","maria","metier","raretes","university","yns","THEMES_SVGS","getSVGConfig","id","__default__","route","useRoute","router","useRouter","useI18n","done","BgAnim","disabled","computed","appStore","onInitUi","useFlow","SVGConfig","outroTimeline","until","generateOutroTimeline","progress","speed","delay","offset","page","inject","scrollTarget","scrollStore","onSelectObject","e","item","tryOnUnmounted","Arrow","Plus","IconPlay","interfaceStore","_hoisted_4","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_createVNode","_Fragment","_renderList","sect","_hoisted_6","_toDisplayString","_hoisted_9","indexItm","_createCommentVNode","_component_ui_picture","_hoisted_13","_sfc_main","Hero","ListingBlock","SoundButton","Scene","Listing","heroVisible","ref","soundButtonVisible","isValidThematique","readyToRender","getData","usePageFlow","axios","data","__vitePreload","IllustrationScene$1","watch","animateLeaveOut","ui","useWebGL","animateInFromListing","onSwitchTheme","onHideIntro","onShowListing","clearWebGL","nextRoute","onDiscover","track","id1","provide","_component_ListingBlock","isListing","_createBlock","_component_Hero","_mergeProps"],"ignoreList":[0,1],"sources":["../../src/vue/node_modules/lodash/_baseInRange.js","../../src/vue/node_modules/lodash/inRange.js","../../src/vue/src/components/WebGL/three/ui/glSpritesheetPlayer.ts","../../src/vue/src/pages/Thematique/webgl/IllustrationScene.ts","../../src/vue/src/pages/Thematique/blocks/Hero.vue","../../src/vue/src/pages/Thematique/webgl/config/art.ts","../../src/vue/src/pages/Thematique/webgl/config/charles.ts","../../src/vue/src/pages/Thematique/webgl/config/festival.ts","../../src/vue/src/pages/Thematique/webgl/config/maria.ts","../../src/vue/src/pages/Thematique/webgl/config/metier.ts","../../src/vue/src/pages/Thematique/webgl/config/raretes.ts","../../src/vue/src/pages/Thematique/webgl/config/university.ts","../../src/vue/src/pages/Thematique/webgl/config/yns.ts","../../src/vue/src/pages/Thematique/webgl/config/index.ts","../../src/vue/src/pages/Thematique/blocks/Listing.vue","../../src/vue/src/pages/Thematique/index.vue"],"sourcesContent":["/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.inRange` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to check.\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n */\nfunction baseInRange(number, start, end) {\n  return number >= nativeMin(start, end) && number < nativeMax(start, end);\n}\n\nmodule.exports = baseInRange;\n","var baseInRange = require('./_baseInRange'),\n    toFinite = require('./toFinite'),\n    toNumber = require('./toNumber');\n\n/**\n * Checks if `n` is between `start` and up to, but not including, `end`. If\n * `end` is not specified, it's set to `start` with `start` then set to `0`.\n * If `start` is greater than `end` the params are swapped to support\n * negative ranges.\n *\n * @static\n * @memberOf _\n * @since 3.3.0\n * @category Number\n * @param {number} number The number to check.\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n * @see _.range, _.rangeRight\n * @example\n *\n * _.inRange(3, 2, 4);\n * // => true\n *\n * _.inRange(4, 8);\n * // => true\n *\n * _.inRange(4, 2);\n * // => false\n *\n * _.inRange(2, 2);\n * // => false\n *\n * _.inRange(1.2, 2);\n * // => true\n *\n * _.inRange(5.2, 4);\n * // => false\n *\n * _.inRange(-3, -2, -6);\n * // => true\n */\nfunction inRange(number, start, end) {\n  start = toFinite(start);\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  } else {\n    end = toFinite(end);\n  }\n  number = toNumber(number);\n  return baseInRange(number, start, end);\n}\n\nmodule.exports = inRange;\n","import { each, inRange, keys, map, random } from \"lodash\";\nimport { damp } from \"maath/easing\";\nimport emitter, { EVENTS } from 'store/events';\nimport { CompressedTexture, DoubleSide, Group, Mesh, MeshBasicMaterial, PlaneGeometry, Sprite, SpriteMaterial, Texture } from 'three';\nimport { WebGLRenderParams } from '../../gl';\n\n\n/**\n * Default config if settings object is not defined\n */\nconst DEFAULT_CONFIG : WebGLSpritesheetSetting = {\n  fps: 60,\n  loop: true,\n  wait: 0,\n  autoplay:true,\n  usePlane: false\n}\n\n\nconst material = new SpriteMaterial({opacity:0, transparent:true});\nconst materialPlane = new MeshBasicMaterial({side:DoubleSide,opacity:0, transparent:true});\n\nexport class WebGLSpritesheetPlayer extends Group implements WebGLSpritesheetActions {\n  config: WebGLSpritesheetConfig;\n  name: string;\n\n  player : Sprite | Mesh\n  \n  textures: Texture[] = []; // all textures\n  textureIndex = 0; //current texture index in the textures array (in files -> the n image (10.png) (in json -> the n spritesheet image)\n\n  textureSheets : WebGLSpritesheetJSON[] = []; // all json spritesheet objects\n  textureSheetIndex = 0; // current json spritesheet object\n  textureSheetsReachEnd = false; //reach the last frame of the last json spritesheet\n  \n  // Damped values to keep the fps independant\n  textureIndexDamped = 0;\n  waitDamped = 0;\n\n  ready = false;\n  seeking = false;\n  playing = false;\n\n  /**\n   * Generate a spritesheet mesh\n   * @param config Initial Config\n   * @returns the instance\n   */\n  constructor(config:WebGLSpritesheetConfig) {\n    super();\n\n    this.name = `spritesheetmesh-${random(0, 1000)}`;\n    this.config = {...config, path:{...config.path, prefix_filename: config.path.prefix_filename ?? ''}, settings: config.settings ?? DEFAULT_CONFIG };\n\n    if(this.config.settings?.usePlane) {\n      this.player = new Mesh(new PlaneGeometry(1,1), materialPlane.clone());\n    }\n    else{\n      this.player = new Sprite(material.clone());\n    }\n    \n    this.add(this.player);\n    // this.preload();\n\n    return this;\n  }\n\n  /**\n   * Add the textures to the player\n   * @param textures Textures[] or CompressedTexture[]\n   */\n  addTextures(textures:Texture[] | CompressedTexture[]):void {\n    \n    this.textures = textures;\n    this.ready = true;\n\n    emitter.emit(EVENTS.SPRITESHEET_READY);\n\n    if(this.config?.settings?.autoplay) {\n      this.play();\n    }\n  }\n\n  /**\n   * Start preload the image / json files\n   */\n  // async preload() {\n  //   switch(this.config.format) {\n  //     case \"files\":\n  //       this.textures = await preloadImageSequence(this.config.total_frames, this.config.path, this.config.noKtx);\n  //       break;\n        \n  //       case \"json\":\n  //       const output = await preloadJSONSpritesheets(this.config.path); // eslint-disable-line no-case-declarations\n  //       this.textures = output.textures;\n  //       this.textureSheets = output.json;\n  //       break;\n  //   }\n    \n  //   this.ready = true;\n    \n  //   emitter.emit(EVENTS.SPRITESHEET_READY);\n\n  //   // play it if autoplay\n  //   if(this.config?.settings?.autoplay) {\n  //     this.play();\n  //   }\n  // }\n  \n  /**\n   * Resize the instance\n   * @param scaleMultiplier Number to increase or decrease the scale while keeping the ratio\n   */\n  resize(scaleMultiplier?:number):void {\n\n    const multiplier = scaleMultiplier ?? 1;\n\n    if(this.config.ratio > 1) {\n      this.scale.set(multiplier * (1 * this.config.ratio), 1 * multiplier, 1 * multiplier);\n    }\n    else{\n      this.scale.set(1 * multiplier, (1 / this.config.ratio) * multiplier, 1 * multiplier);\n    }\n  }\n  \n  /**\n   * Render the spritesheet\n   * @param params Default WebGLRender Params\n   * @returns \n   */\n  render(params:WebGLRenderParams):void {  \n\n    const mat = this.player.material as (SpriteMaterial | MeshBasicMaterial);\n    const fps = this.config.settings?.fps ?? DEFAULT_CONFIG.fps!;\n    const loop = this.config.settings?.loop ?? DEFAULT_CONFIG.loop!;\n    const wait = this.config.settings?.wait ?? DEFAULT_CONFIG.wait!;\n    const waitDamped = Math.floor(this.waitDamped);\n    const multipleJSON = this.config.format === \"json\" ? this.config.path.json!.length > 1 : false; //We have multiple JSON or not\n    const easing = (t: number) => 1 / (1 + t + 0.48 * t * t + 0.235 * t * t * t);\n    const hasEvents = this.config.settings?.events !== undefined;\n\n    // If we are in image sequence\n    if(this.config.format === 'files') {\n      mat.map = this.textures[this.textureIndex];\n    }\n    else{\n      //otherwise it's JSON spritesheet\n      //nothing before loading the JSON spritesheet\n      if(!this.textureSheets.length) return;\n\n      if(!this.textureSheetsReachEnd) {\n        // getting the currentFrame of the animation\n        let frameNames = keys(this.textureSheets[this.textureSheetIndex].frames);\n        let currentFrameName = frameNames[this.textureIndex];\n        \n        // Go to the next JSON file and get the frameName\n        if(!currentFrameName) {\n          this.textureSheetIndex ++;\n          \n          // Reach End: Last frame from last JSON spritesheet\n          if(this.textureSheetIndex === this.textureSheets.length) {\n            this.textureSheetsReachEnd = true;\n          }\n          \n          // Reset the frame index and continue with the next JSON spritesshet\n          if(!this.textureSheetsReachEnd) {\n            this.textureIndex = 0;\n            this.textureIndexDamped = 0;\n            \n            frameNames = keys(this.textureSheets[this.textureSheetIndex].frames);\n            currentFrameName = frameNames[this.textureIndex];\n          }\n        }\n  \n        // If we have a framename\n        if(currentFrameName) {\n\n          //search if there is an event\n          if(hasEvents) {\n            const events = keys(this.config.settings?.events);\n            const frameEvent = events.indexOf(currentFrameName);\n            if(frameEvent !== -1) {\n              emitter.emit(EVENTS.SPRITESHEET_FRAME_EVENT, this.config.settings?.events![frameEvent])\n            }\n          }\n\n          const currentTextureSheet = this.textureSheets[this.textureSheetIndex];\n          \n          // swap the material texture\n          mat.map = this.textures[this.textureSheetIndex];\n          \n          // Update the offset and the repeat of the texture to get the right frame\n          mat.map!.repeat.set(\n            (currentTextureSheet.frames[currentFrameName].frame.w / currentTextureSheet.size.w),\n            (currentTextureSheet.frames[currentFrameName].frame.h / currentTextureSheet.size.h)\n          );\n              \n          mat.map!.offset.set(\n            (currentTextureSheet.frames[currentFrameName].frame.x / currentTextureSheet.size.w),\n            1 - (currentTextureSheet.frames[currentFrameName].frame.h / currentTextureSheet.size.h) - (currentTextureSheet.frames[currentFrameName].frame.y / currentTextureSheet.size.h)\n          );\n        }\n      }\n    }\n    \n    // Flip the player if texture is compressed\n    if(mat.map && mat.map.userData.compressed) {\n      if(this.player.scale.y > 0) this.player.scale.y *= -1;\n    }\n    \n    /**\n     * Playing and Wait behavior\n     */\n    if(this.playing) {\n\n      // damping\n      if(fps === 'off') {\n        this.textureIndexDamped += 1;\n      }\n      else{\n        damp(this, 'textureIndexDamped', this.textureIndexDamped + 1, 1/(fps as number), params.delta, Infinity, easing, 0.0001);\n      }\n    \n      // If our floored damping value is different than our current texture index (ex 2 != 1)\n      if(Math.floor(this.textureIndexDamped) !== this.textureIndex) {\n        this.textureIndex = Math.floor(this.textureIndexDamped);\n\n        // Reach the end of the frame\n        if(this.textureIndex === this.config.total_frames -1 || this.textureSheetsReachEnd) {\n\n          emitter.emit(EVENTS.SPRITESHEET_LAST_FRAME, this.config.id);\n\n          if(loop) {\n            // do we have to wait?\n            if(wait > 0) {\n              this.pause();\n            }\n            else{\n              if(multipleJSON) {\n                this.textureSheetIndex = 0;\n                this.textureSheetsReachEnd = false;\n              }\n              \n              this.textureIndex = 0;\n              this.textureIndexDamped = 0;\n            }\n          }\n          else{\n            //pause if not looping\n            this.pause();\n          }\n        }\n      }\n    }\n    else {\n      // We damp the wait value\n      if(wait > 0 && waitDamped !== wait) {\n        if(fps === 'off') {\n          this.waitDamped += 1;\n        }\n        else{\n          damp(this, 'waitDamped', this.waitDamped + 1, (fps === 'off') ? 0 : 1/(fps as number), params.delta, Infinity, easing, 0.0001);\n        }\n      }\n      else{\n        if(multipleJSON) {\n          if(!this.seeking) this.textureSheetIndex = 0;\n          this.textureSheetsReachEnd = false;\n        }\n        \n        if(!this.seeking) this.textureIndex = 0;\n        this.textureIndexDamped = 0;\n        this.waitDamped = 0;\n\n        if(loop && this.config.settings?.autoplay) this.play();\n      }\n    }\n\n    //require to tell threejs that we updated the texture\n    mat.needsUpdate = true;\n  }\n  \n  /**\n   * Release all textures from memory\n   */\n  dispose():void {\n    this.player?.geometry?.dispose();\n    \n    const mat = this.player.material as (SpriteMaterial | MeshBasicMaterial);\n    mat.map?.dispose();\n    mat.dispose();\n\n    each(this.textures, tex => {\n      tex?.dispose();\n    })\n\n    this.textures = [];\n    this.textureSheets = [];\n  }\n\n  /**\n   * Play: Set the playing flag to true\n   */\n  play() {\n    this.playing = true;\n    this.seeking = false;\n    if(!this.material.opacity) this.material.opacity = 1;\n  }\n\n  /**\n   * Pause: Set the playing flag to false\n   */\n  pause() {\n    this.playing = false;\n  }\n\n  /**\n   * Go to a specific frame based on ratio\n   * @param frameNumber\n   */\n  seek(frameNumber:number) {\n    if(this.config.format === 'files') {\n      this.textureIndex = frameNumber;\n    }\n    else{\n      if(this.config.path.json?.length === 1) {\n        this.textureIndex = frameNumber;\n      }\n      //multiple JSON\n      else{\n        const frames = map(this.textureSheets, (sheet:WebGLSpritesheetJSON) => {\n          return keys(sheet.frames).length;\n        });\n\n        //find the right textureSheetIndex first\n        let index = 0;\n        let frameIndex = 0;\n        let totalParsed = 0\n\n        each(frames, (total, i) => {\n          if(inRange(frameNumber, totalParsed, totalParsed + total)) {\n            index = i\n            frameIndex = frameNumber - totalParsed;\n          }\n          totalParsed += total;\n        });\n\n        this.textureSheetIndex = index;\n        this.textureIndex = frameIndex;\n      }\n    }\n\n    // limits\n    if(this.textureSheetIndex === this.textureSheets.length) this.textureSheetIndex = this.textureSheets.length - 1;\n    if(this.textureIndex === this.textures.length) this.textureIndex = this.textures.length - 1;\n\n    this.seeking = true;\n    \n    this.render({delta:0,time:0});\n  }\n\n  get material() {\n    return this.player.material as (SpriteMaterial | MeshBasicMaterial);\n  }\n}\n","import { WebGLRenderParams, WebGLSceneOptions, WebGLSize } from \"components/WebGL/gl\";\nimport { WebGLScene } from 'components/WebGL/three/glScene';\nimport { WebGLSpritesheetPlayer } from \"components/WebGL/three/ui/glSpritesheetPlayer\";\nimport { each, findIndex, map } from \"lodash\";\nimport { damp } from \"maath/easing\";\nimport { MeshLineGeometry, MeshLineMaterial } from 'meshline';\nimport emitter, { EVENTS } from \"plugins/store/events\";\nimport { mainWebGLRenderer } from \"plugins/webgl/three\";\nimport { calculateUnitSize, transform2DPointTo3D } from \"plugins/webgl/utils\";\nimport { Box3, Group, Mesh, PerspectiveCamera, SRGBColorSpace, Vector2, Vector3 } from \"three\";\nimport { SVGLoader, SVGResultPaths } from 'three/examples/jsm/loaders/SVGLoader.js';\nimport { store as loaderStore } from 'ui/Loader/store';\nimport { gsap } from \"vendors/gsap\";\n\nexport const STEPS = {\n  default: \"default\",\n  intro: \"intro\",\n  introOver: \"introOver\",\n  illustrationBefore: \"illustrationBefore\",\n  illustrationAfter: \"illustrationAfter\",\n  end: \"end\"\n}\n\nconst DAMP_EASING = (t: number) => 1 / (1 + t + 0.48 * t * t + 0.235 * t * t * t);\nconst PTS_QUALITY = 100;\n\nlet RAF : number;\n\nexport default class extends WebGLScene {\n \n  container : Group;\n  sceneSize : WebGLSize;\n\n  svgData : SVGResultPaths[] = []; \n  svgConfig : ThemeSVG;\n  lines : Mesh[] = [];\n  linesRatio: number[] = [];\n  lineMaterial : MeshLineMaterial;\n\n  currentStep : string = STEPS.default;\n  isAnimating : boolean = false;\n  isTravelling : boolean = false;\n\n  spritesheet : WebGLSpritesheetPlayer;\n\n  handlers : Obj = {};\n \n  constructor(options:WebGLSceneOptions) {\n    super(options);\n\n    this.svgConfig = this.settings?.config as ThemeSVG;\n    this.container = new Group();\n    this.sceneSize = calculateUnitSize(this.camera.position.z - this.container.position.z, this.getActiveCamera() as PerspectiveCamera);\n    \n    this.lineMaterial = new MeshLineMaterial({\n      resolution:new Vector2( mainWebGLRenderer!.domElement.offsetWidth, mainWebGLRenderer!.domElement.offsetHeight),\n      lineWidth: this.svgConfig.svg.lineWidth,\n      dashArray: 1,\n      dashOffset: 1,\n      dashRatio: 1,\n      opacity: 1,\n      color: this.svgConfig.svg.color\n    });\n    this.lineMaterial.transparent = true;\n\n    this.handlers.spritesheetEnd = this.onSpritesheetEnd.bind(this);\n    this.handlers.raf = this.watchSpritesheetLoading.bind(this);\n\n    //---- Init the spritesheet\n    this.spritesheet = new WebGLSpritesheetPlayer(this.svgConfig.spritesheet);\n    this.spritesheet.name = \"spritesheet\";\n    this.spritesheet.visible = false;\n\n    //add the textures\n    const textures = loaderStore.getSpritesheet(`${this.svgConfig.spritesheet.id}-spritesheet`);\n    this.spritesheet.addTextures(textures);\n    \n    emitter.on(EVENTS.SPRITESHEET_LAST_FRAME, this.handlers.spritesheetEnd);\n\n    return this;\n  }\n\n  build() {\n    this.scene.add(this.container);\n\n    this.svgData = loaderStore.getSvg(`${this.svgConfig.spritesheet.id}-svg`).paths;\n    this.update();\n  }\n\n  update() {\n    while(this.container.children.length) {\n      const m = this.container.children[0] as Mesh;\n      if(m && m.name !== \"spritesheet\") {\n        m.geometry?.dispose();\n        (m.material as MeshLineMaterial)?.dispose();\n      }\n\n      this.container.remove(this.container.children[0]);\n    }\n\n    this.container.scale.set(1,1,1);\n    this.container.position.set(0,0,0);\n    this.container.clear();\n    this.lines = []\n\n    each(this.svgData, (path : SVGResultPaths, index:number) => {\n      \n      const shapes = SVGLoader.createShapes(path);\n      let computePoints : Vector2[] = [];\n      \n      each(shapes, (shapePath) => {\n        const points = map(shapePath.getPoints(PTS_QUALITY), (pt) => {  \n          return this.mapPointTo3D(pt);\n        });\n        \n        computePoints = computePoints.concat(points);\n      });\n\n      const geometry = new MeshLineGeometry();\n      geometry.setPoints(computePoints);\n      \n      const material = this.lineMaterial.clone();\n      if(index < this.linesRatio.length && this.linesRatio[index]) {\n        material.dashRatio = this.linesRatio[index]; // to avoid redraw everything on resize\n      }\n\n      const mesh = new Mesh(geometry, material);\n      mesh.name = `line_${index}`;\n      \n      // Compute the bounding box of the shape\n      const box = new Box3().setFromObject(mesh);\n      const shapeCenter = box.getCenter(new Vector3());\n      \n      // Offset the mesh to center it in the group\n      mesh.position.sub(shapeCenter);  // Move the shape to center it\n      \n      // Debug - Optional (if the lines are not aligned)\n      const debug =  this.svgConfig.svg.offsets?.[index] || { x:0, y:0 };  \n      if(debug.color) (mesh.material as MeshLineMaterial).color.setStyle(debug.color, SRGBColorSpace);\n      mesh.visible = debug.visible === undefined ? true : debug.visible;\n      \n      mesh.position.x += debug.x * (this.sceneSize.width);\n      mesh.position.y += debug.y * (this.sceneSize.height);\n\n      this.container.add(mesh);\n      this.lines.push(mesh);\n    });\n   \n    //--- Scaling\n    const svgWidthUnit = (this.svgConfig.svg.width / mainWebGLRenderer!.domElement.clientWidth) * this.sceneSize.width;\n    const scaleFactor = (this.sceneSize.width * 2.5) / svgWidthUnit; \n    this.container.scale.set(scaleFactor, scaleFactor, scaleFactor);\n\n    const box = new Box3().setFromObject(this.container);\n    const size = box.getSize(new Vector3());\n\n    this.container.position.x = (size.x / 2) - (this.sceneSize.width / 2);\n    this.container.position.y = 0;\n\n    // add the spritesheet    \n    if(!this.spritesheet.parent) {\n      this.spritesheet.renderOrder = 1;\n      this.scene.add(this.spritesheet);\n    }\n      \n    // Scale the Spritesheet\n    const planeWidthUnit = (this.svgConfig.spritesheet.width / mainWebGLRenderer!.domElement.clientWidth) * this.sceneSize.width;\n    const baseScale = planeWidthUnit * scaleFactor;\n    const planeHeight = baseScale / this.svgConfig.spritesheet.ratio;\n    this.spritesheet.scale.set(baseScale, planeHeight, 1);\n\n    \n    if(this.svgConfig.svg.globalOffset) {\n      this.container.position.x += (this.svgConfig.svg.globalOffset.x * this.sceneSize.width) || 0;\n      this.container.position.y += (this.svgConfig.svg.globalOffset.y * this.sceneSize.height) || 0;\n    }\n\n    if(this.svgConfig.spritesheet.globalOffset) {\n      this.spritesheet.userData.x = (this.svgConfig.spritesheet.globalOffset.x * this.sceneSize.width) || 0;\n      this.spritesheet.userData.y = (this.svgConfig.spritesheet.globalOffset.y * this.sceneSize.height) || 0;\n    }\n  }\n\n  // Resize is called by default (by the plugin) when the scene is created\n  resize() {\n    super.resize();\n\n    this.sceneSize = calculateUnitSize(this.camera.position.z - this.container.position.z, this.getActiveCamera() as PerspectiveCamera);\n    this.lineMaterial.resolution.set( mainWebGLRenderer!.domElement.offsetWidth, mainWebGLRenderer!.domElement.offsetHeight);\n\n    // If no children in the scene, let's build it\n    if(!this.getActiveScene().children.length) {\n      this.build();\n    }\n    else if(this.svgData.length) {\n      this.update();\n    }\n  }\n\n  render(params:WebGLRenderParams) {\n    super.render(params);\n\n    const precision = this.currentStep !== STEPS.illustrationBefore ? 0.0001 : 0.001;\n    \n    if(this.isAnimating) {\n\n      const randomsX = [0.02, -0.01, 0.015];\n      const randomsY = [-0.015, 0.01, 0.02];\n\n      each(this.lines, (mesh, index) => {\n        const material = mesh.material as MeshLineMaterial;\n        damp(material, 'dashRatio', this.svgConfig.svg.steps[this.currentStep].dash, this.svgConfig.svg.steps[this.currentStep].speed, params.delta, Infinity, DAMP_EASING, precision);\n  \n        if(!mesh.userData.position) {\n          mesh.userData.position = mesh.position.clone();\n        }\n        else{\n          mesh.position.x = mesh.userData.position.x + Math.cos(params.time * 2) * randomsX[index];\n          mesh.position.y = mesh.userData.position.y + Math.sin(params.time * 2) * randomsY[index];;\n        }\n\n        // Change Step during the travelling\n        if(!index) {\n          if(this.currentStep === STEPS.illustrationBefore) {\n            const diff = material.dashRatio - this.svgConfig.svg.steps[this.currentStep].dash;\n            if(diff < 0.03) {\n              this.draw(STEPS.illustrationAfter);\n            }\n          }\n\n          if(this.currentStep === STEPS.illustrationAfter) {\n            const diff = material.dashRatio - this.svgConfig.svg.steps[this.currentStep].dash;\n            if(diff < 0.1) {\n              this.draw(STEPS.end);\n            }\n          }\n  \n          // Swap to the animation\n          if(this.currentStep === STEPS.end && this.svgConfig.svg.maxDiff) {\n            const diff = material.dashRatio - this.svgConfig.svg.steps[this.currentStep].dash;\n            if(diff < this.svgConfig.svg.maxDiff) {\n              this.swapToSpritesheet();\n            }\n          }\n        }\n  \n        this.linesRatio[index] = material.dashRatio;\n      });\n    }\n\n    if(this.isTravelling) {\n      const offsetValue = this.svgConfig.spritesheet.globalOffset?.sceneOffset || 0.15;\n      const target = this.currentStep === STEPS.illustrationBefore ? 0 : -(this.sceneSize.width * offsetValue);\n      const speedRatio = this.currentStep === STEPS.illustrationBefore ? 1 : 0.5;\n      damp(this.camera.position, 'x', (this.sceneSize.width * 1.5) - target, this.svgConfig.svg.steps[this.currentStep].speed * speedRatio, params.delta, Infinity, DAMP_EASING, precision);\n    }\n    \n    // --- Spritesheet\n    if(this.spritesheet.visible) {\n      this.spritesheet?.render(params);\n    }\n    this.spritesheet.position.x = this.camera.position.x + this.spritesheet.userData.x;\n    this.spritesheet.position.y = this.spritesheet.userData.y;\n  }\n\n  clear() {\n    emitter.off(EVENTS.SPRITESHEET_LAST_FRAME, this.handlers.spritesheetEnd);\n    \n    each(this.lines, line => {\n      line.geometry?.dispose();\n      (line.material as MeshLineMaterial)?.dispose();\n      line.clear();\n    });\n    \n    this.lineMaterial.dispose();\n    \n    this.svgData = []; \n    this.container.clear();\n    this.handlers = {};\n    this.spritesheet?.clear();\n  }\n\n  dispose() {\n    this.clear();\n    this.disposeGeometries(this.container);\n    this.spritesheet?.dispose();\n    super.dispose();\n  }\n\n  /**\n   * Map a 2D point to a 3D point\n   * @param v Vector2\n   */\n  mapPointTo3D(v : Vector2) {\n    const v3d =  transform2DPointTo3D(v, {\n      width: mainWebGLRenderer!.domElement.clientWidth,\n      height: mainWebGLRenderer!.domElement.clientHeight\n    })\n\n    return new Vector2((this.sceneSize.width / 2) * v3d.x, (this.sceneSize.height / 2) * v3d.y);\n  }\n\n  /**\n   * Draw the scene based on the step\n   * @param id string\n   */\n  draw(id:string) {\n\n    this.currentStep = id;\n\n    //add the textures\n    const notEnoughTexture = findIndex(this.spritesheet.textures, (t) => t === undefined);    \n    if(notEnoughTexture !== -1) {\n      \n      if(!loaderStore.isSpritesheetLoading) {\n        loaderStore.finishSpriteSheetsLoading();\n      }\n      \n      this.watchSpritesheetLoading();\n      return;\n    }\n\n\n    this.isAnimating = true;\n    this.isTravelling = id === STEPS.illustrationBefore || id === STEPS.illustrationAfter || id === STEPS.end;\n  }\n\n  /**\n   * Leave the scene\n   */\n  leave() {\n    // hide the spritesheet if it's playing\n    if(this.spritesheet.playing) {\n      gsap.to(this.spritesheet.material, {opacity:0, ease:\"expo.out\", duration:1}); \n    }\n    else{\n      //or rewind the line\n      this.currentStep = STEPS.default;\n      this.isAnimating = true;\n      this.isTravelling = false;\n    }\n  }\n\n  /**\n   * Swap the SVG to the Spritesheet\n   */\n  swapToSpritesheet() {\n    if(this.spritesheet.visible) return;\n\n    this.spritesheet.visible = true;\n    this.spritesheet.play();\n    \n    gsap.timeline()\n      .from(this.spritesheet.material, {opacity:0, ease:\"power4.out\", duration:this.svgConfig.spritesheet.swapSpeed}, 0)\n      .add(() => {\n        each(this.lines, line => {\n          const mat = (line.material as MeshLineMaterial);\n          gsap.to(mat, {opacity:0, duration:this.svgConfig.spritesheet.swapSpeed, ease:\"power4.out\"});\n        });\n      }, 0)\n      .add( () => {\n        this.container.visible = false;\n      }, this.svgConfig.spritesheet.swapSpeed + .05)\n\n  }\n\n  /**\n   * When the spritesheet ends\n   */\n  onSpritesheetEnd() {\n    emitter.emit(EVENTS.SHOW_LISTING);\n    emitter.off(EVENTS.SPRITESHEET_LAST_FRAME, this.handlers.spritesheetEnd);\n\n    this.fadeSound();\n  }\n\n  fadeSound(duration: number = 3500) {\n    const track = loaderStore.getSound(`${this.svgConfig.spritesheet.id}-track`);\n    if(track && track.playing()) {\n      track.once(\"fade\", () => {\n        track.stop();\n      });\n      track.fade(track.volume(), 0, duration);\n    }\n  }\n\n  /**\n   * Watch if all spritesheet textures have been loaded\n   */\n  watchSpritesheetLoading() {\n    const textures = loaderStore.getSpritesheet(`${this.svgConfig.spritesheet.id}-spritesheet`);\n    const notEnoughTexture = findIndex(textures, (t) => t === undefined);    \n    \n    if(notEnoughTexture === -1) {\n      cancelAnimationFrame(RAF);\n      this.spritesheet.addTextures(textures);\n      this.draw(this.currentStep);\n    }\n    else{\n      RAF = requestAnimationFrame(this.handlers.raf);\n    }\n\n  }\n}\n\n","<docs>\n  # HeroThematique\n  > The CG hero thematique page\n  \n  @author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, VueInstance } from \"@vueuse/core\";\nimport { store as themeStore } from \"pages/Thematique/store\";\nimport { interactWithSceneAt } from \"plugins/webgl/three\";\nimport { gsap } from \"vendors/gsap\";\nimport { defineComponent, toRefs } from 'vue';\nimport { STEPS } from \"../webgl/IllustrationScene\";\n\nexport default defineComponent({\n  name: \"HeroThematique\",\n  props: {\n    title: {\n      type: String,\n      default: undefined,\n    },\n    subtitle: {\n      type: String,\n      default: undefined,\n    },\n    cta: {\n      type: String,\n      default: undefined,\n    },\n    variant: {\n      type: String,\n      default: \"default\"\n    }\n  },\n  emits: [\"discover\"],\n  setup(props, { emit }) {\n\n    const el = templateRef<HTMLElement>(\"el\");\n    const discover = templateRef<VueInstance>(\"Discover\");\n    const title = templateRef<HTMLElement>(\"Title\");\n    const subtitle = templateRef<HTMLElement>(\"Subtitle\");\n\n    // Tween to display hero elements \n    const animateIn = () => {\n      gsap.timeline()\n        .add(() => {\n          el.value.classList.remove(\"hidden\")\n        }, 0)\n        .from(title.value, { scale: .9, opacity: 0, ease: \"power4.inOut\", duration: 1.5 }, 0)\n        .from(subtitle.value, { yPercent: 50, opacity: 0, ease: \"power4.out\", duration: 1.5 }, .8)\n        .from(discover.value?.$el, { yPercent: -50, opacity: 0, ease: \"power4.out\", duration: 1.5 }, .8);\n    }\n\n    // Tween to hide hero elements \n    const animateOut = () => {\n      gsap.timeline()\n        .to(el.value, { opacity: 0, clearProps: \"all\", ease: \"power4.out\", duration: .7 }, 0)\n        .add(() => {\n          el.value.classList.add(\"hidden\")\n        }, .5)\n    }\n\n    const onOver = () => {\n      if (themeStore.isIntro) return;\n\n      interactWithSceneAt(0, {\n        callback: \"draw\",\n        params: STEPS.introOver\n      });\n    }\n\n    const onOut = () => {\n      if (themeStore.isIntro) return;\n\n      interactWithSceneAt(0, {\n        callback: \"draw\",\n        params: STEPS.intro\n      });\n    }\n\n    const launchAnimation = () => {\n      emit('discover');\n    }\n\n    return {\n      ...toRefs(props),\n      //\n      animateIn,\n      animateOut,\n      onOver,\n      onOut,\n      launchAnimation\n    };\n  },\n});\n</script>\n\n<template>\n  <section ref=\"el\"\n           class=\"heroThematique hidden\"\n           :data-variant=\"variant\"\n           :data-dark=\"false\"\n  >\n    <ui-button ref=\"Discover\"\n               class=\"cta\"\n               theme=\"primary\"\n               :variant=\"variant\"\n               :label=\"cta\"\n               @mouseover=\"onOver\"\n               @mouseout=\"onOut\"\n               @click=\"launchAnimation\"\n    />\n    <h1 ref=\"Title\"\n        class=\"title\"\n        v-html=\"title\"\n    />\n    <h3 ref=\"Subtitle\"\n        class=\"subtitle\"\n        v-html=\"subtitle\"\n    />\n  </section>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .heroThematique\n    absolute top 50% left 50%\n    size 100% auto\n    rp(margin-top, -50px)\n    f(center, $direction:column)\n    transform translate(-50%, -50%)\n    \n    &.hidden\n      pointer-events none\n      opacity 0\n\n    .cta\n      rp(margin-bottom, 40px)\n    \n    .title\n      f-style(h1)\n      text-align center\n      addVariantProps()\n\n      :deep()\n        .italic\n          font-style italic\n        .upper\n          text-transform uppercase\n\n    .subtitle\n      rp(margin-top, 23px)\n      f-style('text16')\n      addVariantProps()\n  </style>","\nexport default {\n  bgColor: '248, 244, 238',\n  svg: {\n    color: '#3F3785',\n    lineWidth: 0.018,\n    url: '/thematiques/oeuvres-preferees/lines.svg',\n    width: 4533,\n    height: 700,\n    maxDiff: 0.002,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.975,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.965,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.85,\n        speed: 1.8\n        // speed: 0.1\n      },\n      illustrationAfter: {\n        dash: 0.2,\n        speed: 2.2\n        // speed: 0.1\n      },\n      end: {\n        dash: 0,\n        speed: 1\n      }\n    },\n    globalOffset: {\n      x: -0.082,\n      y: -0.045\n    },\n    offsets: [\n      {\n        x: 0,\n        y: 0,\n        // color: \"#FF0000\",\n        // visible:false,\n      },\n      {\n        x: -0.01,\n        y: -0.035,\n        // color: \"#0000FF\",\n        // visible:false,\n      },\n      {\n        x: -0.045,\n        y: -0.105,\n        // color: \"#00FF00\"\n        // visible:false,\n      }\n    ]\n  },\n  spritesheet: {\n    id: 'art',\n    format: \"files\", \n    ratio: 3500/1274,\n    total_frames: 120,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/oeuvres-preferees/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 240,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.17,\n      y: -0.014,\n    },\n    width: 1500,\n    swapSpeed: .4,\n  }\n} as ThemeSVG\n","\nexport default {\n  bgColor: '245, 245, 245',\n  svg: {\n    color: '#23531B',\n    lineWidth: 0.018,\n    url: '/thematiques/charles-dutoit/lines.svg',\n    width: 4557,\n    height: 636,\n    maxDiff: 0.002,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.995,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.99,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.92,\n        speed: 2.3\n        // speed: 0.1\n      },\n      illustrationAfter: {\n        dash: 0.3,\n        speed: 2.8\n        // speed: 0.1\n      },\n      end: {\n        dash: 0,\n        speed: 1.2\n      }\n    },\n    globalOffset: {\n      x: -0.05,\n      y: 0\n    },\n    offsets: [\n      {\n        x: 0,\n        y: 0,\n      },\n      {\n        x: 0,\n        y: 0,\n      },\n      {\n        x: 0,\n        y: 0,\n      }\n    ]\n  },\n  spritesheet: {\n    id: 'charles',\n    format: \"files\", \n    ratio: 1750/714,\n    total_frames: 120,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/charles-dutoit/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 240,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.095,\n      y: 0,\n      sceneOffset: 0.1,\n    },\n    width: 1718,\n    swapSpeed: .6,\n  }\n} as ThemeSVG\n","\nexport default {\n  bgColor: '241, 251, 255',\n  svg: {\n    color: '#865234',\n    lineWidth: 0.018,\n    url: '/thematiques/festival-de-lanaudiere/lines.svg',\n    width: 4428,\n    height: 624,\n    maxDiff: 0.0005,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.982,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.977,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.85,\n        speed: 2.\n      },\n      illustrationAfter: {\n        dash: 0.15,\n        speed: 2.3\n      },\n      end: {\n        dash: 0,\n        speed: 0.7\n      }\n    },\n    globalOffset: {\n      x: -0.2,\n      y: 0\n    },\n    offsets: [\n      {\n        x: 0,\n        y: 0.004,\n      },\n      {\n        x: 0.002,\n        y: 0.003,\n      },\n      {\n        x: -0.006,\n        y: -0.003,\n      }\n    ]\n  },\n  spritesheet: {\n    id: 'festival',\n    format: \"files\", \n    ratio: 1750/934,\n    total_frames: 120,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/festival-de-lanaudiere/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 120,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.205,\n      y: 0.005,\n      sceneOffset: 0.1,\n    },\n    width: 1500,\n    swapSpeed: 1,\n  }\n} as ThemeSVG\n","\nexport default {\n  bgColor: '239, 254, 247',\n  svg: {\n    color: '#7E1654',\n    lineWidth: 0.018,\n    url: '/thematiques/maria-callas/lines.svg',\n    width: 4493,\n    height: 656,\n    maxDiff: 0.003,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.99,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.985,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.9,\n        speed: 2.2\n        // speed: 0.1,\n      },\n      illustrationAfter: {\n        dash: 0.3,\n        speed: 1.8\n        // speed: 0.1\n      },\n      end: {\n        dash: 0,\n        speed: 1\n        // speed: 0.01\n      }\n    },\n    globalOffset: {\n      x: -0.02,\n      y: 0\n    },\n    offsets: [\n      {\n        x: 0,\n        y: 0.,\n      },\n      {\n        x: -0.001,\n        y: 0.008,\n      },\n      {\n        x: 0.004,\n        y: -0.002\n      }\n    ]\n  },\n  spritesheet: {\n    id: 'maria',\n    format: \"files\", \n    ratio: 1750/737,\n    total_frames: 120,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/maria-callas/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 240,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.074,\n      y: -0.025,\n      sceneOffset: 0.05,\n    },\n    width: 1900,\n    swapSpeed: 0.6,\n  }\n} as ThemeSVG\n","\nexport default {\n  bgColor: '249, 255, 238',\n  svg: {\n    color: '#717077',\n    lineWidth: 0.018,\n    url: '/thematiques/metier-role-de-critique/lines.svg',\n    width: 4311,\n    height: 571,\n    maxDiff: 0.002,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.989,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.984,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.89,\n        speed: 2.5\n        // speed: 0.1,\n      },\n      illustrationAfter: {\n        dash: 0.5,\n        speed: 2.8\n        // speed: 0.1\n      },\n      end: {\n        dash: 0,\n        speed: 1\n      }\n    },\n    globalOffset: {\n      x: -0.15,\n      y: -0.1\n    },\n    offsets: [\n      {\n        x: -0.008,\n        y: 0.,\n      },\n      {\n        x: -0.028,\n        y: 0,\n      },\n      {\n        x: -0.001,\n        y: 0.005,\n      }\n    ]\n  },\n  spritesheet: {\n    id: 'metier',\n    format: \"files\", \n    ratio: 1750/970,\n    total_frames: 120,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/metier-role-de-critique/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 240,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.168,\n      y: -0.03,\n      sceneOffset: 0.1,\n    },\n    width: 1443,\n    swapSpeed: 0.6,\n  }\n} as ThemeSVG\n","\nexport default {\n  bgColor: '255, 249, 233',\n  svg: {\n    color: '#A21300',\n    lineWidth: 0.018,\n    url: '/thematiques/les-raretes/lines.svg',\n    width: 4174,\n    height: 578,\n    maxDiff: 0.003,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.955,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.945,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.8,\n        speed: 2.2\n        // speed: 0.1,\n      },\n      illustrationAfter: {\n        dash: 0.2,\n        speed: 1.8\n        // speed: 0.1\n      },\n      end: {\n        dash: 0,\n        speed: .7\n        // speed: 0.01\n      }\n    },\n    globalOffset: {\n      x: -0.17,\n      y: 0\n    },\n    offsets: [\n      {\n        x: 0,\n        y: 0.,\n      },\n      {\n        x: 0.0013,\n        y: 0.013,\n      },\n      {\n        x: -0.005,\n        y: -0.001,\n      }\n    ]\n  },\n  spritesheet: {\n    id: 'rarete',\n    format: \"files\", \n    ratio: 1750/909,\n    total_frames: 120,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/les-raretes/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 240,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.14,\n      y: 0.002,\n      sceneOffset: 0.1,\n    },\n    width: 1539,\n    swapSpeed: 0.6,\n  }\n} as ThemeSVG\n","\nexport default {\n  bgColor: '247, 243, 251',\n  svg: {\n    color: '#192096',\n    lineWidth: 0.018,\n    url: '/thematiques/universite-de-montreal/lines.svg',\n    width: 4079,\n    height: 540,\n    maxDiff: 0.002,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.995,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.987,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.87,\n        speed: 2.5\n        // speed: 0.1,\n      },\n      illustrationAfter: {\n        dash: 0.05,\n        speed: 2.8\n        // speed: 0.1\n      },\n      end: {\n        dash: 0,\n        speed: 0.5\n        // speed: 0.01\n      }\n    },\n    globalOffset: {\n      x: -0.05,\n      y: 0\n    },\n    offsets: [\n      {\n        x: 0,\n        y: 0.008,\n      },\n      {\n        x: 0.005,\n        y: -0.004,\n      },\n      {\n        x: -0.004,\n        y: -0.002,\n      }\n    ]\n  },\n  spritesheet: {\n    id: 'university',\n    format: \"files\", \n    ratio: 1750/852,\n    total_frames: 120,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/universite-de-montreal/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 240,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.167,\n      y: 0.01,\n      sceneOffset: 0.27,\n    },\n    width: 1380,\n    swapSpeed: 1\n  }\n} as ThemeSVG\n","export default {\n  bgColor: '253, 246, 250',\n  svg: {\n    color: '#74742f',\n    lineWidth: 0.018,\n    url: '/thematiques/yannick-nezet-seguin/lines.svg',\n    width: 4368,\n    height: 1906,\n    maxDiff: 0.004,\n    steps: {\n      default: {\n        dash: 1,\n        speed: 0.3\n      },\n      intro: {\n        dash: 0.98,\n        speed: 0.5\n      },\n      introOver: {\n        dash: 0.97,\n        speed: 0.3\n      },\n      illustrationBefore: {\n        dash: 0.85,\n        speed: 2.5\n        // speed: 0.1\n      },\n      illustrationAfter: {\n        dash: 0.2,\n        speed: 2\n        // speed: 0.1\n      },\n      end: {\n        dash: 0,\n        speed: .5\n      }\n    },\n    globalOffset: {\n      x: -0.05,\n      y: 0,\n    },\n    offsets: [\n      {\n        x:-2/1000,\n        y:0,\n        // color: \"#FF0000\",\n        // visible:false,\n      },\n      {\n        x:2/1000,\n        y:0,\n        // color: \"#0000FF\",\n        // visible:false,\n      },\n      {\n        x:0,\n        y:0,\n        // color: \"#00FF00\"\n        // visible:false,\n      }\n    ]\n  },\n  spritesheet: {\n    id: \"yns\",\n    format: \"files\", \n    ratio: 3500/1600,\n    total_frames: 121,\n    hidden: true,\n    noKtx: true,\n    path: {\n      url: '/thematiques/yannick-nezet-seguin/animation/',\n      files_extension: 'png'\n    },\n    settings: {\n      fps: 240,\n      loop: true,\n      wait: 0,\n      autoplay:false,\n      usePlane:true,\n    },\n    globalOffset: {\n      x: -0.203,\n      y: -0.12,\n    },\n    width: 1750,\n    swapSpeed: .6,\n  }\n} as ThemeSVG;\n","import art from \"./art\";\nimport charles from \"./charles\";\nimport festival from \"./festival\";\nimport maria from \"./maria\";\nimport metier from \"./metier\";\nimport raretes from \"./raretes\";\nimport university from \"./university\";\nimport yns from \"./yns\";\n\nexport const THEMES_SVGS = {\n  yns,\n  maria,\n  art,\n  charles,\n  festival,\n  metier,\n  university,\n  raretes\n} as const;\n\nexport const getSVGConfig = (id:string) : ThemeSVG => {\n  switch(id) {\n    default:\n    case \"yns\":\n      return THEMES_SVGS.yns;\n    \n    case \"art\":\n      return THEMES_SVGS.art;\n    \n    case \"charles\":\n      return THEMES_SVGS.charles;\n\n    case \"festival\":\n      return THEMES_SVGS.festival;\n\n    case \"metier\":\n      return THEMES_SVGS.metier;\n\n    case \"university\":\n      return THEMES_SVGS.university;\n\n    case \"rarete\":\n      return THEMES_SVGS.raretes;\n\n    case \"maria\":\n      return THEMES_SVGS.maria;\n  }\n}\n","<docs>\n  # Listing Thematique\n  > The Listing section for thematique page, with title description and a listing of object per categorye\n  \n  @author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, tryOnUnmounted, until } from \"@vueuse/core\";\nimport Arrow from \"assets/svg/arrow.svg?raw\";\nimport Plus from \"assets/svg/plus.svg?raw\";\nimport scrollStore from 'components/SmoothScroll/store';\nimport IconPlay from 'components/UiKit/Video/assets/play.svg?raw';\nimport { store as themeStore } from \"pages/Thematique/store\";\nimport emitter, { EVENTS } from \"plugins/store/events\";\nimport { store as appStore } from \"store/app\";\nimport { store as interfaceStore } from \"store/interface\";\nimport { store as loaderStore } from \"ui/Loader/store\";\nimport useFlow from \"utils/flow\";\nimport { gsap } from \"vendors/gsap\";\nimport { computed, defineComponent, inject, toRefs } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useRoute, useRouter } from 'vue-router';\nimport { getSVGConfig } from \"../webgl/config\";\n\nexport default defineComponent({\n  name: \"HeaderThematique\",\n  props: {\n    variant: {\n      type: String,\n      default: \"default\"\n    },\n  },\n  setup(props) {\n    const route = useRoute();\n    const router = useRouter();\n    const { t } = useI18n();\n    const { done } = toRefs(loaderStore.state);\n    const el = templateRef<HTMLElement>(\"el\");\n    const BgAnim = templateRef<HTMLElement>(\"BgAnim\");\n    const disabled = computed(() => appStore.disabled);\n    const { onInitUi } = useFlow();\n\n    const SVGConfig = getSVGConfig(props.variant);\n\n    let outroTimeline : GSAPTimeline;\n\n    onInitUi( async () => {\n      await until(done).toBe(true);\n\n      emitter.on(EVENTS.SHOW_LISTING, animateIn);\n      emitter.on(EVENTS.THEME_SWITCHING, animateOut);\n    })\n\n    const generateOutroTimeline = () => {\n      outroTimeline = gsap.timeline({\n        scrollTrigger: {\n          trigger: el.value,\n          start:\"95% bottom\",\n          end: \"bottom bottom\",\n          scrub: true,\n          onUpdate: ({progress}) => {\n            if(progress >= 0.6 && !themeStore.showThemeNav) {\n                themeStore.toggleThemeNav(true);\n            }else if(progress < 0.6 && themeStore.showThemeNav) {\n                themeStore.toggleThemeNav(false, true);\n            }\n          }\n        }\n      })\n        .to(el.value.querySelectorAll(\".listing-wrapper\"), { borderColor:SVGConfig.svg.color, opacity:.5, marginLeft: 100, marginRight: 100, duration: 2 }, 0)\n    }\n\n    // Tween to display elements \n    const animateIn = () => {\n      const easing = themeStore.fromListing ? \"power4.out\" : \"power2.out\";\n      const speed = themeStore.fromListing ? 1.25 : 2.75;\n      const delay = themeStore.fromListing ? 0 : 1;\n      const offset = themeStore.fromListing ? 1.5 : 0;\n\n      gsap.timeline({\n        onComplete: () => {\n          emitter.emit(EVENTS.HIDE_SPRITESHEET);\n          \n        }\n      }\n      )\n        .add('start')\n        .add(() => {\n          el.value.classList.remove(\"hidden\");\n        }, 0)\n        .fromTo(BgAnim.value, { ease: easing, scale: 0.65 }, { scale: 1, yPercent: 0, duration: speed }, `start+=${delay}`)\n        .add(() => {\n          BgAnim.value?.classList.add(\"hidden\");\n        }, `start+=${5 - offset}`)\n        .from(el.value, { yPercent: 100, ease: easing, duration: speed }, `start+=${delay}`)\n        .add(() => {\n          themeStore.toggleIsListing(true);\n          generateOutroTimeline();\n        }, `start+=${(speed + 1) - offset}`)\n    }\n\n    // Tween to hide elements \n    const animateOut = () => {\n      const el = document.querySelector(\".listingSection\") as HTMLElement;\n      gsap.timeline(\n        {\n          onComplete: () => {\n            themeStore.toggleIsListing(false);\n          }\n        }\n      )\n        .to(el, { opacity: 0, ease: \"power4.out\", duration: 1 }, 0)\n        .add(() => {\n          el.classList.add(\"hidden\");\n        }, 1)\n    }\n\n    const page = inject<Partial<{\n      url: string,\n      listing: ListingData,\n    }>>('page')\n\n    const scrollTarget = () => {\n      const target = el.value.querySelector('.listing-section') as HTMLElement;\n      if (target) scrollStore.scrollTo(target);\n    }\n\n    const onSelectObject = (e: PointerEvent, item: ObjectSingle) => {\n      e.preventDefault();\n\n      appStore.disableApp(true);\n\n      //hide the listing\n      gsap.timeline()\n        .to(el.value, { opacity: 0, ease: \"power4.out\", duration: 1 }, 0)\n        .add(() => {\n          emitter.emit(EVENTS.CLICK_OBJECT);\n        }, .2)\n        .add(() => {\n          router.push({\n            name: 'object',\n            params: {\n              thematique: route.params.slug,\n              slug: item.slug\n            }\n          })\n        }, .8)\n    }\n\n    tryOnUnmounted(() => {\n      outroTimeline?.scrollTrigger?.kill();\n      emitter.off(EVENTS.SHOW_LISTING, animateIn);\n    })\n\n    return {\n      ...toRefs(props),\n      t,\n      page,\n      disabled,\n      el,\n      BgAnim,\n      animateIn,\n      animateOut,\n      scrollTarget,\n      onSelectObject,\n      Arrow,\n      Plus,\n      route,\n      IconPlay,\n      imageExtension: computed( () => interfaceStore.hasWebP ? '.webp' : '.png'),\n      borderColor: computed( () => `rgb(${SVGConfig.bgColor})`)\n    };\n  },\n});\n</script>\n\n<template>\n  <section v-if=\"page && page.listing\"\n           ref=\"el\"\n           class=\"listingSection hidden\"\n           :data-variant=\"variant\"\n           :data-dark=\"false\"\n           :data-disabled=\"disabled\"\n  >\n    <header class=\"header-list\">\n      <h1 class=\"title\" v-html=\"page.listing.title\" />\n      <div class=\"description\" v-html=\"page.listing.description\" />\n      <ui-button class=\"btn\"\n                 theme=\"icon\"\n                 :variant=\"variant\"\n                 :icon=\"Arrow\"\n                 @click=\"scrollTarget\"\n      />\n    </header>\n\n    <div class=\"listing-wrapper\">\n      <div v-for=\"(sect, index) in page.listing.section\"\n           :key=\"`section-${index}`\"\n           class=\"listing-section\"\n      >\n        <div class=\"top\">\n          <h2 class=\"title-section\" v-html=\"sect.title\" />\n          <div class=\"index\">\n            {{ (index + 1 < 10 ? '0' : '') + (index + 1) }}\n          </div>\n        </div>\n\n        <div class=\"bottom\">\n          <article v-for=\"(item, indexItm) in sect.objects\"\n                   :key=\"`item-${indexItm}`\"\n                   class=\"listing-obj\"\n                   :data-type=\"item.type\"\n          >\n            <div class=\"img-left\">\n              <span v-if=\"item.type === 'video'\"\n                    class=\"play-btn-img\"\n                    v-html=\"IconPlay\"\n              />\n              <ui-picture :src=\"`/thematiques/${route.params.slug}/contenu/thumbnails/${item.id}${imageExtension}`\"\n                          :cover=\"item.type === 'video' ? 'cover' : 'contain'\"\n                          :parallax=\"false\"\n                          :lazy=\"false\"\n              />\n            </div>\n            <div class=\"content\">\n              <h1 class=\"title-obj\" v-html=\"item.title\" />\n              <ui-button ref=\"Discover\"\n                         class=\"cta\"\n                         theme=\"primary\"\n                         :variant=\"variant\"\n                         label=\"explorer lobjet\"\n                         :icon=\"Plus\"\n                         tag=\"a\"\n                         :to=\"{\n                           name: 'object',\n                           params: {\n                             thematique: route.params.slug,\n                             slug: item.slug\n                           }\n                         }\"\n                         @click=\"onSelectObject($event, item)\"\n              />\n            </div>\n          </article>\n        </div>\n      </div>\n    </div>\n    <div ref=\"BgAnim\" class=\"bg-anim\" />\n  </section>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .listingSection\n    position relative\n    //width \"calc(100% - ( 2* %s ))\" % $gutter\n    padding-top var(--header-height)\n    rp(padding-bottom, 380px)\n    overflow hidden\n    &[data-disabled=\"true\"]\n      pointer-events none\n   \n    &.hidden\n      opacity 0\n      pointer-events none\n      position absolute\n\n\n    .bg-anim\n      absolute 0\n      addVariantProps(background,$dark:true)\n      addVariantProps(border-color,$dark:false)\n      addVariantProps($dark:false)\n      border-width 1px\n      border-style solid\n      border-radius 5px\n      z-index -1\n      transform-origin 50% 0\n      &.hidden\n        border-width 0\n\n  .header-list\n    padding-top 140px\n    rp(padding-left, 250px)\n    rp(padding-right, 250px)\n    padding-bottom 115px\n\n  .title\n    f-style(\"text14\", $uppercase: true)\n    addVariantProps($dark:false)\n    margin-bottom 20px\n    trans(transform, $duration:1.5s)\n\n  .description\n    f-style('subtitle')\n    addVariantProps($dark:false)\n    margin-bottom 40px\n\n  .btn.UiButton\n    :deep()\n      .inner\n        .icon\n          transform rotate(90deg)\n          svg\n            display block\n\n\n  .listing-wrapper\n    position relative\n    border-radius 5px\n    border 1px solid v-bind(borderColor)\n  .listing-section\n    margin 0 10px\n    addVariantProps($dark:false)\n\n    .top\n      f($align: end, $justify: start)\n      margin-bottom 10px\n      border-bottom 1px solid\n      addVariantProps(border-color,$dark:false, $opacity: 0.6)\n      .title-section\n        f-style('h2')\n        text-transform uppercase\n        addVariantProps($dark:false)\n        margin-right 20px\n        width 50%\n        margin-bottom 10px\n      .index\n        f-style('Text14', $uppercase: true)\n    .bottom\n      f($align: start, $justify: space-between, $wrap: wrap)\n      margin-top 40px\n      margin-bottom 110px\n    &:last-child\n      .bottom\n        margin-bottom 0px\n    .bottom\n      .listing-obj\n        width calc('50% - 5px')\n        f($align: stretch, $justify: start)\n        padding 20px\n        border 1px solid\n        addVariantProps(border-color,$dark:false, $opacity: 0.6)\n        border-radius 5px\n        margin-bottom 10px\n        &[data-type=\"video\"]\n          .img-left\n            position relative\n            padding 35px 0\n            border-radius 5px\n            .ui-picture\n              border-radius 5px\n            &:after\n              content ''\n              display block\n              position absolute\n              top 35px\n              bottom 35px\n              left 0\n              right 0\n              z-index 2\n              background-color alpha(#434343, 0.6)\n\n        .img-left\n          rp(width, 230px)\n          rp(height, 270px)\n          padding 15px\n          .ui-picture\n            size 100%\n          .play-btn-img\n            position absolute\n            top 50%\n            left 50%\n            width 40px\n            height 30px\n            border 1px solid \n            addVariantProps(border-color,$dark:true, $opacity: 0.6)\n            border-radius 5px\n            transform translate(-50%, -50%)\n            z-index 3\n            f(center)\n            :deep() svg\n              display block\n              width 10px\n              height 10px\n              addVariantProps(color,$dark:true)\n              path\n                fill currentColor\n\n        .content\n          rp(margin-left, 115px)\n          f($direction: column, $align: flex-end, $justify: space-between)\n          rp(width, 320px)\n          .title-obj\n            f-style('subtitle')\n  </style>\n","<docs>\n# PageThematique\n> The CG thematique page\n\n@author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, tryOnUnmounted, until, VueInstance } from '@vueuse/core';\nimport axios from 'axios';\nimport { store as themeStore } from 'pages/Thematique/store';\nimport emitter, { EVENTS } from 'plugins/store/events';\nimport { clearWebGL, interactWithSceneAt, useWebGL } from 'plugins/webgl/three';\nimport { store as appStore } from 'store/app';\nimport { store as loaderStore } from 'ui/Loader/store';\nimport SoundButton from \"ui/SoundButton.vue\";\nimport usePageFlow from 'utils/flow/page';\nimport { gsap } from \"vendors/gsap\";\nimport { computed, defineComponent, provide, ref, toRefs, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport Hero from './blocks/Hero.vue';\nimport ListingBlock from './blocks/Listing.vue';\nimport { STEPS } from './webgl/IllustrationScene';\nimport { getSVGConfig } from './webgl/config';\n\nexport interface VueAnimate extends VueInstance {\n  animateIn(): void;\n  animateOut(): void;\n}\n\nexport default defineComponent({\n  name: \"PageThematique\",\n  components: {\n    Hero,\n    ListingBlock,\n    SoundButton,\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const Scene = templateRef<HTMLElement>(\"Scene\");\n    const Hero = templateRef<VueAnimate>(\"Hero\");\n    const Listing = templateRef<VueAnimate>(\"Listing\");\n    const disabled = computed(() => appStore.disabled);\n    const { done } = toRefs(loaderStore.state);\n    const heroVisible = ref(true);\n    const soundButtonVisible = ref(false);\n\n    //check if the thematique page is in the store (exists)\n    const isValidThematique = themeStore.findTheme(`/${route.params.slug as string}/`);\n\n    const { readyToRender, getData, onInitUi } = usePageFlow<PageThematique>({\n      load() {\n\n        if (!isValidThematique) {\n          router.push('/');\n          return Promise.resolve();\n        }\n\n        return axios.get(`/thematiques/${route.params.slug}/data.json`)\n          .then(({ data }) => {\n            themeStore.update(data);\n            themeStore.setCurrent(data.id);\n            return {\n              ...data\n            }\n          })\n      },\n      ui: {\n        illustration: () => import(\"./webgl/IllustrationScene\"),\n      }\n    });\n\n    // ---- Watch if we are in a page transition\n    watch(\n      () => appStore.isAPageTransition,\n      (path) => {\n        if (path !== undefined) {\n          animateLeaveOut();\n        }\n      }\n    )\n\n    onInitUi(async ({ ui }) => {\n      if (!disabled.value) appStore.disableApp(true);\n\n      // Retrieve the svg config\n      const SVGConfig = getSVGConfig(page.value.id);\n\n      await until(done).toBe(true);\n\n      useWebGL(\n        [\n          {\n            glScene: ui.illustration.default,\n            settings: {\n              config: SVGConfig,\n            }\n          },\n        ], { antialias: true, alpha: true, canvasContainer: Scene.value, clearForMobile: true });\n\n      // set the background color\n      if (themeStore.current) {\n        appStore.setAppBgColor(SVGConfig?.bgColor);\n        themeStore.setNextVariant();\n      }\n\n      // animation\n      const cameFromListing = themeStore.fromListing;\n      if (!cameFromListing) {\n        animateIn();\n\n        //add Events\n        emitter.on(EVENTS.THEME_SWITCHING, onSwitchTheme);\n        emitter.on(EVENTS.HIDE_SPRITESHEET, onHideIntro);\n        emitter.on(EVENTS.SHOW_LISTING, onShowListing);\n      }\n      else {\n        animateInFromListing();\n      }\n    });\n\n    // Leaving the page - Clearing \n    tryOnUnmounted(() => {\n      themeStore.toggleIntro(false);\n      themeStore.toggleIsListing(false);\n      themeStore.toggleThemeNav(false);\n      clearWebGL(true);\n\n      //add Events\n      emitter.off(EVENTS.THEME_SWITCHING, onSwitchTheme);\n      emitter.off(EVENTS.HIDE_SPRITESHEET, onHideIntro);\n      emitter.on(EVENTS.SHOW_LISTING, onShowListing);\n    })\n\n    // Animation Transition In\n    const animateIn = () => {\n      gsap.timeline()\n        .add(() => {\n          interactWithSceneAt(0, {\n            callback: \"draw\",\n            params: STEPS.intro\n          });\n        }, .1)\n        .add(() => {\n          Hero.value?.animateIn();\n        }, .5)\n        .add(() => {\n          themeStore.toggleThemeNav(true);\n        }, 1.4)\n        .add(() => {\n          appStore.disableApp(false);\n        }, 2.5);\n    }\n\n    const animateInFromListing = () => {\n      emitter.emit(EVENTS.SHOW_LISTING);\n      themeStore.toggleThemeNav(true); // to display the header\n      setTimeout(() => {\n        themeStore.toggleThemeNav(false); // to hide the outro on listing\n      }, 150);\n      gsap.timeline()\n        .add(() => {\n          interactWithSceneAt(0, {\n            callback: \"leave\",\n          });\n          themeStore.toggleIntro(true);\n          heroVisible.value = false;\n        }, .1)\n        .add(() => {\n          themeStore.toggleFromListing(false);\n        }, .5)\n        .add(() => {\n          appStore.disableApp(false);\n        }, 1.5);\n    }\n\n    // Animation Transition Out\n    const animateOut = () => {\n      gsap.timeline()\n        .add(() => {\n          interactWithSceneAt(0, {\n            callback: \"draw\",\n            params: STEPS.default\n          });\n          //hide hero\n          Hero.value?.animateOut();\n        }, 0)\n    }\n\n    // Animation Transition Out (Only for page transition)\n    const animateLeaveOut = () => {\n      appStore.disableApp(true);\n\n      gsap.timeline()\n        .add(() => {\n          if (heroVisible.value) {\n            interactWithSceneAt(0, {\n              callback: \"leave\"\n            });\n\n            //hide hero\n            Hero.value?.animateOut();\n          }\n          else {\n            //hide listing\n            Listing.value?.animateOut();\n          }\n        }, 0)\n        .add(() => {\n          appStore.disableApp(false);\n\n          const nextRoute = appStore.isAPageTransition;\n          appStore.setPageTransition(undefined);\n\n          if (nextRoute) router.push(nextRoute);\n        }, 1.3);\n    }\n\n    // When we enter a thematique - transition to draw the line\n    const onDiscover = () => {\n      themeStore.toggleIntro(true);\n      soundButtonVisible.value = true;\n\n      Hero.value?.animateOut();\n      themeStore.toggleThemeNav(false);\n\n      interactWithSceneAt(0, {\n        callback: \"draw\",\n        params: STEPS.illustrationBefore\n      });\n\n      //play the sound\n      const track = loaderStore.getSound(`${page.value.id}-track`);\n      if (track) {\n        const id1 = track.play();\n        track.fade(0, .5, 1000, id1);\n      }\n    }\n\n    // When we switch theme - needs to to the transition between themes\n    const onSwitchTheme = () => {\n      // disabling\n      appStore.disableApp(true);\n      animateOut();\n    }\n\n    // The Listing will be shown in a few seconds\n    const onShowListing = () => {\n      soundButtonVisible.value = false;\n    }\n\n    // Hide the intro\n    const onHideIntro = () => {\n      interactWithSceneAt(0, {\n        callback: \"clear\"\n      });\n\n      heroVisible.value = false;\n\n      clearWebGL(true);\n    }\n\n    const page = getData();\n    provide(\"page\", page);\n\n    return {\n      readyToRender,\n      page,\n      disabled,\n      onDiscover,\n      onSwitchTheme,\n      heroVisible,\n      soundButtonVisible,\n      isIntro: computed(() => themeStore.isIntro),\n      isListing: computed(() => themeStore.isListing),\n    };\n  },\n});\n</script>\n\n<template>\n  <main v-if=\"readyToRender\"\n        ref=\"el\"\n        :key=\"page.id\"\n        :data-variant=\"page.id\"\n        :data-disabled=\"disabled\"\n        :data-listing=\"isListing\"\n        class=\"page thematique\"\n  >\n    <Hero v-if=\"heroVisible\"\n          v-bind=\"page\"\n          ref=\"Hero\"\n          :variant=\"page.id\"\n          @discover=\"onDiscover\"\n    />\n    <div ref=\"Scene\" class=\"scene\" />\n    <SoundButton :noinvert=\"true\"\n                 :theme=\"page.id\"\n                 :data-hidden=\"!isIntro || !soundButtonVisible\"\n    />\n    <ListingBlock ref=\"Listing\" :variant=\"page.id\" />\n  </main>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .thematique\n    position relative\n    min-height var(--viewport-innerHeight)\n    height var(--viewport-innerHeight)\n    overflow hidden\n    &[data-listing=\"true\"]\n      height auto\n      overflow auto\n\n    &[data-disabled=\"true\"]\n      pointer-events none !important\n \n    .scene\n      fixed 0\n      size 100% 100%\n      z-index -1\n\n      :deep() svg\n        position absolute\n        top 0px\n        z-index 1000\n    \n    &[data-variant=\"yns\"]\n      *::selection\n        color getColor('yns', false)\n        background-color getColor('yns', true)\n    \n    &[data-variant=\"art\"]\n      *::selection\n        color getColor('art', false)\n        background-color getColor('art', true)\n\n    &[data-variant=\"charles\"]\n      *::selection\n        color getColor('charles', false)\n        background-color getColor('charles', true)\n\n    &[data-variant=\"rarete\"]\n      *::selection\n        color getColor('rarete', false)\n        background-color getColor('rarete', true)\n\n    &[data-variant=\"festival\"]\n      *::selection\n        color getColor('festival', false)\n        background-color getColor('festival', true)\n\n    &[data-variant=\"metier\"]\n      *::selection\n        color getColor('metier', false)\n        background-color getColor('metier', true)\n\n    &[data-variant=\"university\"]\n      *::selection\n        color getColor('university', false)\n        background-color getColor('university', true)\n\n    &[data-variant=\"maria\"]\n      *::selection\n        color getColor('maria', false)\n        background-color getColor('maria', true)\n\n</style>\n"],"file":"assets/index-B43_c-Zn.js"}