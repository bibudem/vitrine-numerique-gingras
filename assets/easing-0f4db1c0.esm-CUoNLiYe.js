var U=Object.defineProperty;var G=(t,e,s)=>e in t?U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var h=(t,e,s)=>G(t,typeof e!="symbol"?e+"":e,s);import{cj as O,bX as g,ck as Q,cl as R,cm as S,cn as j,b_ as C,co as H,cp as V,cq as W,am as I,ak as M,br as $,bs as K,cr as N,cs as P,ct as q,ah as X,al as T,av as Y,ao as J}from"./vendor-D1O0VZ-0.js";import{M as Z,a as z,y as o,x as A}from"./app-BHllM0oC.js";import{g as ee}from"./@debug-lodash-BIjirobg.js";const se={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class _{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const te=new O(-1,1,1,-1,0,1);class ie extends Q{constructor(){super(),this.setAttribute("position",new R([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new R([0,2,0,0,2,0],2))}}const ae=new ie;class re{constructor(e){this._mesh=new g(ae,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,te)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class F extends _{constructor(e,s){super(),this.textureID=s!==void 0?s:"tDiffuse",e instanceof S?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=j.clone(e.uniforms),this.material=new S({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new re(this.material)}render(e,s,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=a.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(s),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class E extends _{constructor(e,s){super(),this.scene=e,this.camera=s,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,s,a){const r=e.getContext(),i=e.state;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0);let n,f;this.inverse?(n=0,f=1):(n=1,f=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,n,4294967295),i.buffers.stencil.setClear(f),i.buffers.stencil.setLocked(!0),e.setRenderTarget(a),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(s),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.color.setMask(!0),i.buffers.depth.setMask(!0),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class ne extends _{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class he{constructor(e,s){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),s===void 0){const a=e.getSize(new C);this._width=a.width,this._height=a.height,s=new H(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:V}),s.texture.name="EffectComposer.rt1"}else this._width=s.width,this._height=s.height;this.renderTarget1=s,this.renderTarget2=s.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new F(se),this.copyPass.material.blending=W,this.clock=new I}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,s){this.passes.splice(s,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const s=this.passes.indexOf(e);s!==-1&&this.passes.splice(s,1)}isLastEnabledPass(e){for(let s=e+1;s<this.passes.length;s++)if(this.passes[s].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const s=this.renderer.getRenderTarget();let a=!1;for(let r=0,i=this.passes.length;r<i;r++){const n=this.passes[r];if(n.enabled!==!1){if(n.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),n.render(this.renderer,this.writeBuffer,this.readBuffer,e,a),n.needsSwap){if(a){const f=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}E!==void 0&&(n instanceof E?a=!0:n instanceof ne&&(a=!1))}}this.renderer.setRenderTarget(s)}reset(e){if(e===void 0){const s=this.renderer.getSize(new C);this._pixelRatio=this.renderer.getPixelRatio(),this._width=s.width,this._height=s.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,s){this._width=e,this._height=s;const a=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(a,r),this.renderTarget2.setSize(a,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(a,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class le extends _{constructor(e,s,a=null,r=null,i=null){super(),this.scene=e,this.camera=s,this.overrideMaterial=a,this.clearColor=r,this.clearAlpha=i,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new M}render(e,s,a){const r=e.autoClear;e.autoClear=!1;let i,n;this.overrideMaterial!==null&&(n=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:a),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(i),this.overrideMaterial!==null&&(this.scene.overrideMaterial=n),e.autoClear=r}}const fe={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = sRGBTransferOETF( tex );

		}`};var oe=Math.floor,ce=Math.random;function de(t,e){return t+oe(ce()*(e-t+1))}var ue=de,me=ue,ve=$,D=K,pe=parseFloat,ge=Math.min,Ce=Math.random;function _e(t,e,s){if(s&&typeof s!="boolean"&&ve(t,e,s)&&(e=s=void 0),s===void 0&&(typeof e=="boolean"?(s=e,e=void 0):typeof t=="boolean"&&(s=t,t=void 0)),t===void 0&&e===void 0?(t=0,e=1):(t=D(t),e===void 0?(e=t,t=0):e=D(e)),t>e){var a=t;t=e,e=a}if(s||t%1||e%1){var r=Ce();return ge(t+r*(e-t+pe("1e-"+((r+"").length-1))),e)}return me(t,e)}var xe=_e;const be=ee(xe);class x extends g{constructor(s){super(s.geometry,s.material);h(this,"el");h(this,"name");h(this,"camera");h(this,"autoHide");return this.name=s.name||`mesh-${be(0,1e3)}`,this.el=s.el,this.camera=s.camera,s.autoHide&&this.el.classList.add("-webgl-hide"),this.resize(),this}resize(s=!1){Z(this,this.el,this.camera,s),this.scale.copy(this.userData.sync.scale),this.position.copy(this.userData.sync.position)}render(s){this.resize()}dispose(){delete this.userData.sync,this.geometry.dispose(),this.material.dispose(),this.el.classList.remove("-webgl-hide")}}class Pe{constructor(e){h(this,"scene");h(this,"visible");h(this,"includeChildren");h(this,"camera");h(this,"disabled");h(this,"settings");h(this,"sceneSize");h(this,"effectComposer");h(this,"elmts");h(this,"name");var s,a,r;if(this.scene=new N,this.name=e==null?void 0:e.name,this.disabled=e==null?void 0:e.disabled,this.settings=e==null?void 0:e.settings,this.visible=!0,this.elmts=e==null?void 0:e.elmts,this.includeChildren=(e==null?void 0:e.includeChildren)||!1,this.camera=(e==null?void 0:e.camera)||new P(50,z.viewport.width/z.viewport.webglHeight,.1,50),e.camera||(this.camera.position.z=5),e.usePostProcessing){o.outputColorSpace=q,this.effectComposer=new he(o);const i=new le(this.scene,this.camera);i.clearColor=((s=o)==null?void 0:s.getClearColor(new M))||new M,i.clearAlpha=((a=o)==null?void 0:a.getClearAlpha())||1,this.effectComposer.addPass(i);const n=new F(fe);(r=this.effectComposer)==null||r.addPass(n)}return this.sceneSize=A(this.camera.position.z,this.camera),this}resize(){this.camera instanceof P&&(this.camera.aspect=o.domElement.width/o.domElement.height),this.camera.updateProjectionMatrix(),this.includeChildren&&this.scene.traverse(e=>{e instanceof x&&e.resize(!0)}),this.effectComposer&&this.effectComposer.setSize(o.domElement.width,o.domElement.height),this.sceneSize=A(this.camera.position.z,this.camera)}render(e){this.visible=this.scene.children.length>0,this.includeChildren&&this.scene.traverse(s=>{s instanceof x&&s.render(e)})}dispose(){this.scene.children&&(this.scene.traverse(e=>{if(e instanceof x)e.dispose();else if(e instanceof g){if(e.geometry.dispose(),e.material instanceof S){const s=e.material;s.uniforms.uTexture&&s.uniforms.uTexture.value.dispose()}if(X(e.material,"length"))T(e.material,s=>{this.disposeMaterial(s)});else{const s=e.material;this.disposeMaterial(s)}}}),this.effectComposer&&(T(this.effectComposer.passes,e=>{var s;(s=e==null?void 0:e.dispose)==null||s.call(e)}),this.effectComposer.dispose(),o.outputColorSpace=Y),this.scene.clear())}disposeMaterial(e){var s,a,r,i,n,f,l,u,v,c,d;(s=e.map)==null||s.dispose(),(a=e.bumpMap)==null||a.dispose(),(r=e.normalMap)==null||r.dispose(),(i=e.aoMap)==null||i.dispose(),(n=e.envMap)==null||n.dispose(),(f=e.alphaMap)==null||f.dispose(),(l=e.lightMap)==null||l.dispose(),(u=e.emissiveMap)==null||u.dispose(),(v=e.roughnessMap)==null||v.dispose(),(c=e.displacementMap)==null||c.dispose(),(d=e.metalnessMap)==null||d.dispose(),e.dispose()}disposeGeometries(e){e.traverse(s=>{var a;s instanceof g&&((a=s.geometry)==null||a.dispose())})}getActiveCamera(){return this.camera}getActiveScene(){return this.scene}}new C;new C;var Se=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function b(t,e,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Se,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(t.__damp===void 0&&(t.__damp={}),t.__damp[l]===void 0&&(t.__damp[l]=0),Math.abs(t[e]-s)<=f)return t[e]=s,!1;a=Math.max(1e-4,a);var u=2/a,v=n(u*r),c=t[e]-s,d=s,w=i*a;c=Math.min(Math.max(c,-w),w),s=t[e]-c;var y=(t.__damp[l]+u*c)*r;t.__damp[l]=(t.__damp[l]-u*y)*v;var p=s+(c+y)*v;return d-t[e]>0==p>d&&(p=d,t.__damp[l]=(p-d)/r),t[e]=p,!0}var m=new J,L,B,k;function Te(t,e,s,a,r,i,n){return typeof e=="number"?m.setScalar(e):Array.isArray(e)?m.set(e[0],e[1],e[2]):m.copy(e),L=b(t,"x",m.x,s,a,r,i,n),B=b(t,"y",m.y,s,a,r,i,n),k=b(t,"z",m.z,s,a,r,i,n),L||B||k}export{Pe as W,Te as a,b as d,be as r};
//# sourceMappingURL=easing-0f4db1c0.esm-CUoNLiYe.js.map
