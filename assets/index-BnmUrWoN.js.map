{"version":3,"file":"index-BnmUrWoN.js","sources":["../../src/vue/node_modules/lodash/_baseRange.js","../../src/vue/node_modules/lodash/_createRange.js","../../src/vue/node_modules/lodash/range.js","../../src/vue/src/components/UiKit/Marquee/index.vue"],"sourcesContent":["/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n","var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n","var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n","<docs>\n  # UiKit/Marquee\n  \n  ```\n  import uiMarquee, { DIRECTION } from 'UiKit/Marquee/index.vue'\n  \n  <ui-marquee \n    tag=\"h2\"\n    :intro=\"true\"\n    text=\"ceci est un marquee pas pire rapide\"\n    speed=\"2\"\n    :scroll=\"1\"\n    :direction=\"DIRECTION.LEFT_RIGHT\"\n  />\n  ```\n  \n  - `speed` controls marquee natural speed \n  - `scroll.speed` control speed on scroll\n  \n  > so `speed:0, scroll:{speed:1}` would only move on scroll\n  > vs `speed:1, scroll:{speed:1}` would always move + accelerate on scroll\n  </docs>\n  \n  <script lang=\"ts\">\n  import { defineComponent, reactive, toRefs, ref } from 'vue';\n  import { debouncedWatch, templateRef, until, useTemplateRefsList } from '@vueuse/core';\n  import { debounce, each, range } from 'lodash';\n  import { motion } from 'config';\n  import scrollStore from 'components/SmoothScroll/store';\n  import interfaceStore from 'store/interface';\n  import useFlow from 'utils/flow';\n  import { gsap, ScrollTrigger } from 'vendors/gsap';\n  \n  \n  export interface Data {\n    timeline: O<gsap.core.Timeline>,\n    tlScrollSpeed: O<gsap.core.Timeline>,\n    tlIntro: O<gsap.core.Timeline>,\n    scrollTriggerMarquee: any,\n  }\n  \n  export const DIRECTION = {\n    LEFT_RIGHT: 1,\n    RIGHT_LEFT: -1\n  }\n  \n  const UiMarquee = defineComponent({\n    name: \"UiMarquee\",\n    props: {\n      text: {\n        type: [Array, String],\n        default: '',\n      },\n      /** h1 | h2 | p ... */\n      tag: {\n        type: String,\n        default: 'div',\n      },\n      /** intro animation on reveal  */\n      intro: {\n        type: Boolean,\n        default: false\n      },\n      /** top/bottom borders - like in most designs */\n      border: {\n        type: Boolean,\n        default: false,\n      },\n      /** 0:no motion |0.5:slow | 2:medium | 4:fast ... */\n      speed: {\n        type: Number,\n        default: motion ? 0.25 : 0\n      },\n      /** 0:no motion | 0.5:slower than normal | 1:same as normal | 2:faaster.. */\n      scroll: {\n        type: Number,\n        default: motion ? 1.5 : 0\n      },\n      /** please use DIRECTION const (1|-1) */\n      direction: {\n        type: Number,\n        default: DIRECTION.LEFT_RIGHT\n        // default: DIRECTION.RIGHT_LEFT\n      },\n      /** if marquee is used inside a horizontal scroll, it will change scroll trigger orientation */\n      horizontal: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup(props) {\n      const initialized = ref(false);\n      const { scrollable } = toRefs(scrollStore.state);\n      const { viewport } = toRefs(interfaceStore.state);\n      const el = templateRef<HTMLElement>('el');\n      const model = templateRef<HTMLElement>('model');\n      const clones = templateRef<HTMLElement>('clones');\n      const borders = useTemplateRefsList<HTMLSpanElement>();\n      const { onInit, onInitUi } = useFlow();\n      let firstTimeShown = true;\n  \n      const data: Data = reactive({\n        timeline: undefined,\n        tlScrollSpeed: undefined,\n        tlIntro: undefined,\n        scrollTriggerMarquee: undefined,\n      });\n\n      onInit(() => {\n        init();\n      });\n      \n      onInitUi(async () => {\n        resetOnResize();\n\n        // animate\n        if (motion) {\n          if (props.intro && props.border) {\n            const els = [...borders.value]\n            gsap.set(els, { scaleX: 0, transformOrigin: '100% 50%' });\n          }\n          await until(scrollable).toBe(true);\n          await until(initialized).toBe(true);\n          if (props.intro) createTlIntro();\n          createTlMarquee();\n          createTlControlSpeedOnScroll();\n        }\n      });\n  \n      const resetOnResize = () => {\n        debouncedWatch(\n          () => viewport.value.width,\n          () => {\n            init();\n            createTlMarquee();\n            createTlControlSpeedOnScroll();\n          },\n          { debounce: 300, deep: true }\n        )\n      }\n  \n      const init = async () => {\n        if (!model.value) return\n\n        // some usefull data\n        const modelEl = model.value\n        setTimeout(() => {\n          const content = modelEl.innerHTML;\n          const width = modelEl.scrollWidth;\n          const parentWidth = interfaceStore.viewport.width;\n    \n          // create clones\n          const repeat = width >= parentWidth ? 1 : Math.ceil((parentWidth - width) / width);\n          if (clones.value) {\n            clones.value.innerHTML = '';\n            each(range(repeat * 8), () => {\n              if (clones.value) {\n                clones.value.innerHTML += content;\n              }\n            });\n          }\n  \n          initialized.value = true;\n        }, 250)\n      }\n  \n      /** timeline to move X words */\n      function createTlMarquee() {\n        data.timeline?.kill();\n  \n        // const bound = last(clones.value.children)?.getBoundingClientRect();\n        // const width = bound?.width ?? 0\n        const modelEl = model.value\n        const width = modelEl.scrollWidth;\n  \n        const direction = props.direction === DIRECTION.LEFT_RIGHT ? -(width * 2) : 0;\n  \n        data.timeline = gsap.timeline({ repeat: -1, paused: props.speed === 0 })\n          .fromTo(clones.value, { x: direction }, { x: `+=${props.direction * (width)}`, ease: 'linear', duration: 1 / (props.speed ? props.speed : 0.25) });\n  \n      }\n  \n      /** control scroll effect on marquee */\n      function createTlControlSpeedOnScroll() {\n        data.tlScrollSpeed?.kill();\n        data.scrollTriggerMarquee?.kill();\n  \n        if (!el.value || !data.timeline) return;\n      \n        data.tlScrollSpeed = gsap.timeline()\n          .add('normal')\n          .to(data.timeline, { timeScale: props.scroll || 1 })\n          .add('speed')\n          .pause()\n          .seek('normal');\n        \n        const st: any = {\n          trigger: el.value,\n          // @TODO recheck this, some weird behavior with scroll trigger\n          start: props.horizontal ? 'right left+=10000' : 'top bottom',\n          end: props.horizontal ? '+=100000' : 'bottom top',\n          horizontal: props.horizontal,\n          // markers: true,\n          onToggle: ({ isActive }: { isActive: boolean }) => {\n            if (isActive) {\n              if (firstTimeShown) {\n                firstTimeShown = false;\n                data.tlIntro?.play();\n              }\n              if (props.speed) {\n                data.timeline?.play();\n              }\n            }\n            else data.timeline!.pause();\n          },\n        };\n  \n        if (props.scroll) {\n          let scrolling = false;\n          const onScroll = () => {\n            if (scrolling) return;\n            scrolling = true;\n            if (props.speed) {\n              data.tlScrollSpeed!.tweenTo('speed', {\n                duration: 0.3,\n                ease: 'power1.in',\n              });\n            } else {\n              data.timeline?.play();\n            }\n          };\n          const onStopScroll = debounce(() => {\n            scrolling = false;\n            if (props.speed) {\n              data.tlScrollSpeed!.tweenTo('normal', {\n                duration: 0.6,\n                ease: 'power3.out',\n              });\n            } else {\n              data.timeline?.pause();\n            }\n          }, 50);\n          st.onUpdate = () => {\n            onScroll();\n            onStopScroll();\n          }\n        }\n  \n        data.scrollTriggerMarquee = ScrollTrigger.create(st)\n      }\n  \n      /** fadeIn text + scaleX borders */\n      function createTlIntro() {\n        const tl = gsap.timeline().add('start', 0.1)\n          .set(clones.value, { opacity: 0 }, 0)\n          .to(clones.value, { opacity: 1, duration: 0.6 }, 'start');\n  \n        if (props.border) {\n          const els = [...borders.value]\n          tl\n            .to(els, {\n              scaleX: 1,\n              duration: 0.2, stagger: 0.02\n            }, 'start')\n        }\n  \n        data.tlIntro = tl\n          .add('end')\n          .pause()\n          .seek('start')\n      }\n  \n      return {\n        ...props,\n        ...toRefs(data), //data\n        el,\n        borders,\n      };\n    },\n  });\n  export default UiMarquee\n  \n  </script>\n  \n<template>\n  <component :is=\"tag\"\n             ref=\"el\"\n             class=\"UiMarquee\"\n  >\n    <span v-if=\"border\"\n          :ref=\"borders.set\"\n          class=\"border -top\"\n    />\n    <div ref=\"model\"\n         class=\"list model\"\n    >\n      <span ref=\"modelItem\"\n            class=\"item\"\n      >\n        <template v-if=\"Array.isArray(text)\">\n          <span v-for=\"(entry, index) in text\"\n                :key=\"`marquee-entry-${index}`\"\n                class=\"text\"\n                v-html=\"entry\"\n          />\n        </template>\n        <span v-else\n              class=\"text\"\n              v-html=\"text\"\n        />\n      </span>\n    </div>\n    <div ref=\"wrapper\" class=\"wrapper\">\n      <div ref=\"clones\" class=\"list clones\" />\n    </div>\n    <span v-if=\"border\"\n          :ref=\"borders.set\"\n          class=\"border -bottom\"\n    />\n  </component>\n</template>\n  \n<style lang=\"stylus\" scoped>\n.UiMarquee\n  position relative\n  rp(padding-top, 100px, 40px)\n  rp(padding-bottom, 100px, 40px)\n  width 100%\n  overflow hidden\n  white-space nowrap\n\n.list\n  f(row, $align: center)\n  width fit-content\n\n.item\n  f(row, $align: center)\n  width fit-content\n  flex-shrink 0\n\n.model\n  visibility hidden\n  position absolute\n\n.text\n  display block\n  position relative\n  font-family $ff-title\n  font-weight $fw-semibold\n  rp(font-size, 158px 30px)\n  line-height 1\n  rp(padding-right, 100px 60px)\n  f(row, $align: center)\n  flex-shrink 0\n\n.border\n  height 1px\n  background-color currentColor\n  display block\n  &.-top\n    margin-bottom 1em\n  &.-bottom\n    margin-top 1em\n</style>\n  "],"names":["nativeCeil","nativeMax","baseRange","start","end","step","fromRight","index","length","result","_baseRange","require$$0","isIterateeCall","require$$1","toFinite","require$$2","createRange","_createRange","range","range_1","UiMarquee","defineComponent","motion","DIRECTION","props","initialized","ref","scrollable","toRefs","scrollStore","viewport","el","templateRef","model","onInit","onInitUi","useFlow","firstTimeShown","data","reactive","init","resetOnResize","els","borders","gsap","until","createTlIntro","createTlMarquee","debouncedWatch","createTlControlSpeedOnScroll","modelEl","content","width","parentWidth","interfaceStore","repeat","clones","each","_a","direction","_hoisted_1","_hoisted_2","_hoisted_4","_hoisted_5","_hoisted_6","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createBlock","_resolveDynamicComponent","_withCtx","_createElementBlock","_createCommentVNode","_createElementVNode","text","_Fragment","_renderList","entry","_hoisted_3","border"],"mappings":"kUACA,IAAIA,GAAa,KAAK,KAClBC,GAAY,KAAK,IAarB,SAASC,GAAUC,EAAOC,EAAKC,EAAMC,EAAW,CAK9C,QAJIC,EAAQ,GACRC,EAASP,GAAUD,IAAYI,EAAMD,IAAUE,GAAQ,EAAE,EAAG,CAAC,EAC7DI,EAAS,MAAMD,CAAM,EAElBA,KACLC,EAAOH,EAAYE,EAAS,EAAED,CAAK,EAAIJ,EACvCA,GAASE,EAEX,OAAOI,CACT,CAEA,IAAAC,GAAiBR,GC3BbA,GAAYS,GACZC,GAAiBC,EACjBC,EAAWC,EASf,SAASC,GAAYV,EAAW,CAC9B,OAAO,SAASH,EAAOC,EAAKC,EAAM,CAChC,OAAIA,GAAQ,OAAOA,GAAQ,UAAYO,GAAeT,EAAOC,EAAKC,CAAI,IACpED,EAAMC,EAAO,QAGfF,EAAQW,EAASX,CAAK,EAClBC,IAAQ,QACVA,EAAMD,EACNA,EAAQ,GAERC,EAAMU,EAASV,CAAG,EAEpBC,EAAOA,IAAS,OAAaF,EAAQC,EAAM,EAAI,GAAMU,EAAST,CAAI,EAC3DH,GAAUC,EAAOC,EAAKC,EAAMC,CAAS,CAC7C,CACH,CAEA,IAAAW,GAAiBD,GC7BbA,GAAcL,GA2CdO,GAAQF,GAAa,EAEzBG,GAAiBD,oBCoBH,CAUA,WAAA,EACN,eACFE,GAAAC,EAAA,CAEW,iBACH,OACa,KAAA,CAErB,KAAA,CAAA,MAAA,MAAA,EAAA,QAAA,EAAA,EAGE,IAAA,CAEF,KAAA,OACF,QAAA,KAAA,EAEQ,MAAA,CAEE,KAAA,QACF,QAAA,EAAA,EAEA,OAAA,CAEE,KAAA,QACJ,QAAiB,EAAA,EAGnB,MAAA,CAES,KAAA,OACa,QAAAC,EAAA,IAAA,CACvB,EAED,OAAA,CAEC,KAAA,OAED,QAAqBA,EAAA,IAAA,CACL,EAGd,UAAA,CAEgB,KAAA,OACZ,QAAAC,EAAA,UACF,EAIgB,WAAA,CACa,KAAA,QAC/B,QAAA,EAAA,CAGF,EACE,MAAAC,EAAA,CACE,MAAAC,EAAqBC,EAAA,EAAA,EACf,CACC,WAAAC,CACW,EAAAC,EAAAC,EAAA,KAAA,EACa,CAC/B,SAAAC,CAAA,EAAAF,IAC4B,KAAA,EAC9BG,EAAAC,EAAA,IAAA,EACFC,EAAAD,EAAA,OAAA,IAGoBA,EAAA,QAAA,QAID,CACf,OAAAE,EACA,SAAAC,CACM,EAAAC,EAAA,EAIN,IAAAC,EAAW,GACT,MAAAC,EAAAC,EAAA,CACA,SAAA,OAEI,cAAa,OACf,QAAA,OAIJ,qBAAY,MACR,CAAA,EACRL,EAAA,IAAA,CAGAM,EAAA,CAA2B,CACzB,EAIAL,EAAA,SAAgB,IAChBM,EAAsB,KAIN,GAAAjB,EAAA,OAAAA,EAAA,OAAA,CAGlB,MAAAkB,EAAA,CAAA,GAAAC,EAAA,KAAA,EAGAC,EAAA,IAAAF,EAAA,CACE,OAAA,kBAGiC,UAE5B,CAAA,CAAA,qBAQS,MAAAG,EAAApB,CAAA,EAAA,KAAA,EAAA,EAECD,EAAA,OAAAsB,EAAA,EACwBC,EAAA,MACnB,CAElB,EACE,MAAAN,EAAA,IAAA,CAEqBO,EAAA,IAAAlB,EAAA,MAAA,MAAA,IAAA,CACjBU,IAGAO,EAAoB,EACtBE,EAAA,CACF,EAAA,CAEF,aACF,KAAA,EAIE,EACE,EACYT,EAAA,SAAA,CACZ,GAAA,CAAAP,EAAiB,MAAA,OACV,MAAAiB,UACO,WAAA,KACV,MAAAC,EAAAD,EAAA,UACDE,EAAAF,EAAA,YACHG,EAAAC,EAAA,SAAA,MAEAC,EAAAH,GAAAC,EAAA,EAAA,KAAA,MAAAA,EAAAD,GAAAA,CAAA,EACFI,EAAA,QACMA,EAAA,MAAA,UAAA,GAGGC,iBACO,gBAIS,WAAAN,EAGzB,CAAA,GAMG1B,EAAA,MAAA,EAKC,EAAA,GAAA,CAIN,EACE,oBAEWiC,EAAApB,EACC,WADD,MAAAoB,EACC,OAad,QAZ8BzB,QAYhB,cAAAT,EAAA,YAAAD,EAAA,WAAA,EAAA6B,EAAA,GAAA,EAAAd,EAAA,SAAAM,EAAA,SAAA,CAEd,OAAA,GACF,OAAApB,EAAA,QAAA,CAAA,CAAA,WACF,MAAA,CAAA,EAAAmC,CAAA,EAEa,0tCAcRC,GAAM,CAAA,IAAA,4BAGHC,GAAY,CAAA,IAAA,2CAeZC,GAAU,CAAA,WAAA,EAACC,GAAe,CAAA,IAAA,2BACdC,GAAM,CAAA,IAAA,uCA3BbC,GAAIC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,CACH,OAAAC,EAAY,EAAAC,EAAAC,EAAAR,EAAA,GAAA,EAAA,CAAA,IAAA,KA/R9B,MAAA,WAAA,EAAA,CAiSI,QAAAS,EAAA,IAAA,CAAAT,EAjSJ,YAkS2BU,EAAA,OAAA,CACjB,IAAK,EAAA,IAAAV,EAAA,QAAA,IAnSf,MAAA,aAqSI,EAAA,KAAA,GAAA,GAGEW,EAcO,GAdP,EAAA,EAAAC,EAGgCC,MAAInB,GAAA,CAChCkB,EAAA,OAAAjB,GAAA,CAAA,MAAA,QAAAK,EAAA,IAAA,GAAAM,EACU,EAAwB,EAAAI,EAAAI,EAAA,CAAA,IAAA,CAAA,EAAAC,EAAAf,EAAA,KAAA,CAAAgB,EAAA3E,KACvBiE,EAAO,EAAAI,EAAA,OAAA,CACZ,IAAa,iBAAArE,CAAA,GAAA,MAAA,kBAGrB,EAAA,KAAA,EAAA4E,EAAA,EAAA,EAlTR,WAmT0BP,EAAA,OAAA,CACZ,IAAA,EAAA,MAAA,oCAIV,EAAA,GAAA,CACE,EAAA,GAAA,EAAAE,EAAA,MAAAf,GAAA,CAEUqB,EAAM,MAAApB,GAAA,KAAA,GAAA,CAAA,EAAA,GAAA,EA3TtBE,EAAA,QAAAM,IA4T2BI,EAAA,OAAA,CACjB,IAAK,EAAA,IAAAV,EAAA,QAAA,IA7Tf,MAAA,gBAAA,EAAA,KAAA,GAAA,GAAAW,EAAA,GAAA,EAAA,CAAA,CAAA","x_google_ignoreList":[0,1,2]}