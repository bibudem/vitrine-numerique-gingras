{"version":3,"file":"Textarea-BhCBKXMZ.js","sources":["../../src/vue/src/components/UiKit/KoddeinVueForm/Field/Textarea.vue"],"sourcesContent":["<docs>\n# KoddeinFormTextArea\n> Text area field\n\n@author Nicolas Husson <nicolas@kffein.com>\n@author Kevin Bastien <kevin@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs, watch, computed } from 'vue';\n\ninterface Data {\n  internalValue?: string,\n}\n\nconst KoddeinFormText = defineComponent({\n  name: \"KoddeinFormText\",\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n    /** input value */\n    value: {\n      type: String,\n      default: undefined,\n    },\n    /** input placeholder */\n    placeholder: {\n      type: String,\n      default: undefined,\n    },\n    /** char limit */\n    limit: {\n      type: Number,\n      default: undefined,\n    },\n    /** input error */\n    error: {\n      type: String,\n      default: undefined,\n    },\n  },\n  emits: ['inputChange', 'onFocus', 'onBlur'],\n  setup(props, { emit }){\n    const data:Data = reactive(\n      {\n        internalValue: undefined,\n      }\n    );\n\n    const focus = () => {\n      emit('onFocus');\n    }\n    const blur = () => {\n      emit('onBlur');\n    }\n\n    /**\n     * Watch value, on value update -> set internal value\n     */\n    watch(\n      ()=>props.value,\n      (value) => { \n        data.internalValue = value;\n      },\n      { immediate:true }\n    )\n\n    /**\n     * Watch internal value, on value update -> send value to parent\n     */\n    watch(\n      ()=>data.internalValue,\n      (value) => { \n        // handle limit\n        if (props.limit && value && value.length > props.limit) {\n          data.internalValue = value.substr(0, props.limit);\n        }\n\n        if (value === props.value) return;\n        emit('inputChange', value);\n      },\n      // { immediate:true }\n    )\n\n    const nbChar = computed(()=> {\n      return data.internalValue && data.internalValue.length ? data.internalValue.length : 0;\n    });\n\n\n    return {\n      ...toRefs(data), //data\n      isFocus: focus,\n      isBlur: blur,\n      nbChar,\n    }; \n  },\n});\nexport default KoddeinFormText\n</script>\n\n<template>\n  <div class=\"wrapper\">\n    <textarea :id=\"id\"\n              v-model=\"internalValue\"\n              :placeholder=\"placeholder\"\n              :class=\"[error ? '-error' : '']\"\n              class=\"input\"\n              spellcheck=\"false\"\n              @focus=\"isFocus\"\n              @blur=\"isBlur\"\n    />\n    <span v-if=\"limit\"\n          class=\"limit\"\n          v-text=\"`${nbChar} / ${limit}`\"\n    />\n  </div>\n</template>\n\n<style lang=\"stylus\" scoped>\n  /**\n   * TABLE OF CONTENT\n   * --------\n   *  - LAYOUT\n   *  - FILE\n   *  - THEMES\n   *  - DEBUG\n   *  - NO_SCOPE\n   */\n  $c-f-main ?= black\n\n  //  ===LAYOUT===\n  .wrapper\n    position relative\n\n  .input\n    min-height 100px\n    max-width 100%\n    min-width 100%\n    display block\n    font-family $ff-text\n  \n  .limit\n    display block\n    text-align right\n    color $c-f-main\n    margin-top 7px\n    font-size 1.2rem\n\n  //  ===DEBUG===\n  [data-debug-mode=\"true\"] .KoddeinFormTextArea\n    //\n</style>\n"],"names":["KoddeinFormText","defineComponent","props","emit","data","reactive","focus","blur","watch","value","nbChar","computed","toRefs","_hoisted_1","_ctx","_cache","$props","$setup","$data","$options","id","_createElementBlock","_withDirectives","_createElementVNode","error","$event","_normalizeClass","args","internalValue","_hoisted_2","limit","_vModelText","_openBlock","_toDisplayString","_hoisted_3","_createCommentVNode"],"mappings":"yMAeA,MAAMA,EAAkBC,EAAgB,CACtC,KAAM,kBACN,MAAO,CACL,GAAI,CACF,KAAM,OACN,SAAU,EACZ,EAEA,MAAO,CACL,KAAM,OACN,QAAS,MACX,EAEA,YAAa,CACX,KAAM,OACN,QAAS,MACX,EAEA,MAAO,CACL,KAAM,OACN,QAAS,MACX,EAEA,MAAO,CACL,KAAM,OACN,QAAS,MAAA,CAEb,EACA,MAAO,CAAC,cAAe,UAAW,QAAQ,EAC1C,MAAMC,EAAO,CAAE,KAAAC,GAAO,CACpB,MAAMC,EAAYC,EAChB,CACE,cAAe,MAAA,CAEnB,EAEMC,EAAQ,IAAM,CAClBH,EAAK,SAAS,CAChB,EACMI,EAAO,IAAM,CACjBJ,EAAK,QAAQ,CACf,EAKAK,EACE,IAAIN,EAAM,MACTO,GAAU,CACTL,EAAK,cAAgBK,CACvB,EACA,CAAE,UAAU,EAAK,CACnB,EAKAD,EACE,IAAIJ,EAAK,cACRK,GAAU,CAELP,EAAM,OAASO,GAASA,EAAM,OAASP,EAAM,QAC/CE,EAAK,cAAgBK,EAAM,OAAO,EAAGP,EAAM,KAAK,GAG9CO,IAAUP,EAAM,OACpBC,EAAK,cAAeM,CAAK,CAAA,CAG7B,EAEM,MAAAC,EAASC,EAAS,IACfP,EAAK,eAAiBA,EAAK,cAAc,OAASA,EAAK,cAAc,OAAS,CACtF,EAGM,MAAA,CACL,GAAGQ,EAAOR,CAAI,EACd,QAASE,EACT,OAAQC,EACR,OAAAG,CACF,CAAA,CAEJ,CAAC,EAlGDG,EAAA,CAAA,MAAA,SAAA,sDAwGIC,EAQEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,QARaC,EAAE,EAAAC,EAAA,MAAAR,EAAA,CAxGrBS,EAAAC,EAAA,WAAA,CA0Ge,GAAAT,EAAA,GACA,sBA3GfC,EA2GuBS,CAAAA,IAAKT,EACD,CAAA,EAAAU,GAAAX,EAAA,cAAAW,GACb,YAAWX,EAAA,YACV,MAAKY,EAAE,CAAA,CAAAZ,EAAA,MAAA,SAAA,EAAA,EAAA,OAAA,CAAA,EACP,WAAI,QA/GnB,QAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,IAAAY,IAAAb,EAAA,SAAAA,EAAA,QAAA,GAAAa,CAAA,GAAA,OAAAZ,EAyGuBa,CAAa,IAAAb,EAAA,CAAA,EAAA,IAAAY,IAAAb,EAAA,QAAAA,EAAA,OAAA,GAAAa,CAAA,EAAA,EAAA,KAAA,GAAAE,CAAA,EAAA,CAQpBC,CAAKC,EAAAjB,EAAA,aAAA,CAAA,CAAA,EAjHrBA,EAAA,OAAAkB,IAkHuBX,EAAA,OAAA,CAlHvB,IAAA,EAAA,MAAA,QAAA,YAAAY,EAAA,GAAAnB,EAAA,MAAA,MAAAA,EAAA,KAAA,EAAA,CAAA,EAAA,KAAA,EAAAoB,CAAA,GAAAC,EAAA,GAAA,EAAA"}