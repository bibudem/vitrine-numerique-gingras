{"version":3,"file":"Item-BFgw8M8a.js","sources":["../../src/vue/src/components/UiKit/Accordions/Item.vue"],"sourcesContent":["<docs>\n# ui-accordions-item\n\nAccordions single item\n\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef } from '@vueuse/core';\nimport scrollStore from 'components/SmoothScroll/store';\nimport { gsap, ScrollTrigger } from 'vendors/gsap';\nimport { defineComponent, getCurrentInstance, inject, onMounted, PropType, reactive, toRefs, watch } from 'vue';\n\nexport interface Data {\n  isOpen: boolean,\n}\nexport interface Target {\n  label?: string,\n  url?: string,\n  target?: 'internal' | 'external',\n}\n\nconst UiAccordionsItem = defineComponent({\n  name: \"UiAccordionsItem\",\n  props: {\n    /** need props for title - for content please use slots */\n    title: {\n      type: String,\n      default: '',\n    },\n    /** Never Used but -> optional link targets - above title {title: string, url: string, target: string} */\n    targets: {\n      type: Array as PropType<Array<Link>>,\n      default: undefined,\n    },\n    /** you may disable this item - so you can't interact within */\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    /** is item open on init */\n    open: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    const content = templateRef('content')\n    const internalInstance = getCurrentInstance();\n    const data: Data = reactive(\n      {\n        isOpen: false,\n      }\n    );\n\n    // this is coming from the parent cpn\n    const active = inject('active', [])\n    const updateActive: any = inject('updateActive')\n\n    onMounted(() => {\n      data.isOpen = props.open;\n      if (props.open) {\n        updateActive(internalInstance?.uid || 0, props.disabled);\n      }\n    });\n\n    // Watch \n    watch(\n      active,\n      (value: Array<number>) => {\n        data.isOpen = (value.indexOf(internalInstance?.uid || 0) > -1);\n      }\n    )\n    watch(\n      () => data.isOpen,\n      (value: boolean) => {\n        if (content?.value) {\n          if (value) {\n            gsap.to(content.value, {\n              height: 'auto', duration: 0.4, onComplete: () => {\n                if (!scrollStore.mainScroll) return;\n                ScrollTrigger.refresh()\n              }\n            });\n          } else {\n            gsap.to(content.value, {\n              height: 0, duration: 0.4,\n              onComplete: () => {\n                if (!scrollStore.mainScroll) return;\n                ScrollTrigger.refresh()\n              }\n            });\n          }\n        }\n      }\n    )\n\n    /**\n     * toggle event\n    */\n    function toggle() {\n      updateActive(internalInstance?.uid || 0, props.disabled);\n    }\n\n    return {\n      ...props,\n      ...toRefs(data), //data\n      // functions\n      onToggle: toggle,\n      // injected\n      active,\n    };\n  },\n});\nexport default UiAccordionsItem\n\n</script>\n\n<template>\n  <div class=\"UiAccordionsItem entry\"\n       :data-open=\"isOpen || undefined\"\n       :data-disabled=\"disabled || undefined\"\n  >\n    <span class=\"border -top\" />\n    <div :class=\"['header', { '-active': isOpen }]\" @click=\"onToggle\">\n      <div class=\"left\">\n        <div v-if=\"targets && targets.length\" class=\"targets\">\n          <a v-for=\"(link, index) in targets\"\n             :key=\"index\"\n             :href=\"link.url\"\n             :target=\"link.target && link.target === '_blank' ? '_blank' : ''\"\n             :rel=\"link.target && link.target === '_blank' ? 'noopen' : ''\"\n             class=\"target\"\n          >{{ link.label }}</a>\n        </div>\n        <p class=\"title\" v-text=\"title\" />\n      </div>\n\n      <!-- @slot toggle -you can use some other btn -->\n      <slot name=\"toggle\">\n        <button aria-label=\"more\" :class=\"['btn toggle-btn no', 'plus', { '-active': isOpen }]\" />\n      </slot>\n    </div>\n\n    <div ref=\"content\"\n         class=\"togglable wysiwyg\"\n         :aria-hidden=\"!isOpen\"\n    >\n      <!-- v-show-slide=\"isOpen\" this is dead -->\n      <div class=\"content\">\n        <!-- @slot Default - content goes here -->\n        <slot />\n      </div>\n    </div>\n    <span class=\"border -bottom\" />\n  </div>\n</template>\n\n<style lang=\"stylus\" scoped>\n  /**\n   * TABLE OF CONTENT\n   * --------\n   *  - CORE\n   *  - STYLE\n   *  - CUSTOM + BTN\n   */\n\n  $c-border ?= black\n  $c-accent ?= red\n\n  //  ===CORE===\n  .UiAccordionsItem\n    position relative\n    width 100%\n\n    &[data-disabled]\n      pointer-events none\n      > *\n        opacity 0.4\n\n    &:not([data-disabled])\n      &:hover\n        .no-touch &\n          .toggle-btn\n            transform rotate(-90deg)\n            &::before\n              opacity 0\n              // transform translate(-50%, -50%) rotate(-90deg)\n\n    .toggle-btn\n      position relative\n      cursor pointer\n      flex-shrink 0\n\n    .title\n      margin-right 20px\n      rp(font-size, 4rem 2.2rem)\n      font-weight $fw-bold\n      line-height 1.2\n      text-decoration none\n\n  //  ===STYLE===\n  .UiAccordionsItem\n    position relative\n    // border-top 1px solid $c-border\n    // &:last-of-type\n    //   border-bottom 1px solid $c-border\n    .border\n      absolute top 0 left 0 right 0\n      transform-origin left center\n      height 1px\n      background $c-black\n      &.-bottom\n        top auto\n        bottom -1px\n\n    .header\n      f row\n      position relative\n      cursor pointer\n      rp(padding-top, 80px 30px)\n      rp(padding-bottom, 80px 30px)\n\n    // Never used... \n    // .targets \n    //   f-style($size: 1.7rem 1.5rem , $lh: 1)\n    //   width 100%\n    //   margin-bottom 20px\n    //   .target\n    //     // display block\n    //     position relative\n    //     margin 0 8px\n    //     &::after\n    //       content ''\n    //       absolute top 50% left -8px\n    //       transform translate(-50%, -50%)\n    //       size 4px\n    //       border-radius 50%\n    //       background $c-black\n    //     &:last-of-type\n    //       &::before\n    //         content ''\n    //         absolute top 50% right -8px\n    //         transform translate(50%, -50%)\n    //         size 4px\n    //         border-radius 50%\n    //         background $c-black\n\n    .content\n      rp(padding-bottom, 90px 24px)\n      \n      +layout(desktop)\n        max-width 66%\n    \n    .togglable\n      height 0\n      overflow hidden\n\n    //  ===CUSTOM + BTN===\n    .plus\n      position relative\n      rp(size, 30px 15px)\n      // background $c-accent\n      rp(margin-right, 50px 0)\n      transform rotate(0deg)\n      transform-origin center center\n      transition all 0.3s easing('in-out-quad')\n\n      &::before\n        content ''\n        absolute top 50% left 0\n        rp(width, 30px 15px)\n        height 1px\n        background $c-border\n        transition all 0.3s easing('in-out-quad')\n\n      &::after\n        content ''\n        absolute top 0 left 50%\n        rp(height, 30px 15px)\n        width 1px\n        background $c-border\n\n      &.-active\n        transform rotate(-90deg)\n        // background $c-accent\n        &::before\n          opacity 0\n      // &:hover\n      //   background $c-accent\n\n</style>\n"],"names":["UiAccordionsItem","defineComponent","props","content","templateRef","internalInstance","getCurrentInstance","data","reactive","active","inject","updateActive","onMounted","watch","value","gsap","scrollStore","ScrollTrigger","toggle","toRefs","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","isOpen","_createElementVNode","_normalizeClass","args","_Fragment","_renderList","link","index","_createCommentVNode","_renderSlot","_hoisted_6"],"mappings":"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"}