{"version":3,"file":"index-DVTDjsvL.js","sources":["../../src/vue/src/pages/Credit/index.vue"],"sourcesContent":["<docs>\n  # PageFund\n  > The fund page\n  \n  @author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, tryOnMounted, until } from '@vueuse/core';\nimport axios from 'axios';\nimport scrollStore from 'components/SmoothScroll/store';\nimport { store as appStore } from \"store/app\";\nimport usePageFlow from 'utils/flow/page';\nimport { gsap } from \"vendors/gsap\";\nimport { defineComponent, onBeforeMount, provide, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nexport default defineComponent({\n  name: \"PageFund\",\n  setup() {\n    const router = useRouter();\n    const hero = ref<any>()\n    const route = useRoute();\n    const el = templateRef<HTMLElement>(\"el\");\n    const { readyToRender, getData } = usePageFlow<PageCredit>({\n      load() {\n        return axios.get(`/credit/data.json`)\n          .then(({ data }) => {\n            return {\n              ...data\n            }\n          })\n      },\n    });\n\n    onBeforeMount( () => {\n      if(!appStore.introSeen && appStore.redirection) {\n        router.push(\"/\");\n        return;\n      }\n    });\n\n    tryOnMounted( async () => {\n      await until(readyToRender).toBe(true);\n\n      gsap.timeline()\n        .add( () => {\n          appStore.setAppBgColor(\"229, 240, 248\");\n        }, 0)\n        .fromTo(document.querySelector(\".page.credit\"), {opacity:0}, {opacity:1, duration: 1, ease: \"power4.inOut\"}, .5)\n        .add( () => {\n          scrollTarget();\n        }, .5)\n    })\n\n    const page = getData();\n    provide(\"page\", page);\n\n    const getAssetPath = (image: string): string => {\n      return new URL(`./assets/${image}`, import.meta.url).href;\n    };\n\n    const scrollTarget = () => {\n      const sectionId = route.query.section; // \n\n      if (!sectionId || !el.value) return;\n\n      const target = el.value.querySelector(`[data-section=\"${sectionId}\"]`) as HTMLElement;\n      if (target) {\n        scrollStore.scrollTo(target, {duration:1});\n      }\n    };\n\n    return {\n      readyToRender,\n      page,\n      hero,\n      getAssetPath,\n    };\n  },\n});\n</script>\n\n<template>\n  <main v-if=\"readyToRender\"\n        ref=\"el\"\n        class=\"page credit\"\n  >\n    <div v-for=\"(sec, index) in page.thematique\"\n         :key=\"index\"\n         class=\"section\"\n    >\n      <div class=\"left-section\">\n        <h2 class=\"sect-title\"\n            :data-section=\"sec.id\"\n            v-html=\"sec.title\"\n        />\n      </div>\n      <div class=\"right-section\">\n        <div v-for=\"(section, indexSec) in sec.section\"\n             :key=\"indexSec\"\n             class=\"right-section-int\"\n        >\n          <div class=\"index-title\" v-html=\"section.title\" />\n          <div class=\"bottom-right\">\n            <div class=\"objects\">\n              <div v-for=\"(object, indexObj) in section.object\"\n                   :key=\"indexObj\"\n                   class=\"obj-text\"\n                   :data-section=\"object.id\"\n              >\n                <div v-if=\"object.title\"\n                     class=\"obj-title\"\n                     v-html=\"object.title\"\n                />\n                <div v-for=\"(sources, indexSources) in object.sources\"\n                     :key=\"indexSources\"\n                     class=\"sources\"\n                >\n                  <div class=\"sources-type\" v-html=\"`${sources.type} : `\" />\n                  <div class=\"sources-text wysiwyg\" v-html=\"sources.text\" />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .credit\n    color $c-main\n    r padding-top, 200px\n\n    .section\n      f($align: flex-start)\n      .left-section\n        width 50%\n        .sect-title\n          f-style('h2')\n          text-transform uppercase\n          width 100%\n          r padding-bottom, 10px\n          \n          r height, 50px\n          r padding-left, 10px\n      .right-section\n        width 50%\n        f(column)\n\n        .objects\n          r margin-top, 80px\n          r margin-bottom, 120px\n          .obj-text\n            r margin-bottom, 20px\n          .obj-title\n            f-style('h4')\n            r margin-bottom, 40px\n            text-transform uppercase\n        .sources\n          f-style('subtitle')\n          r margin-bottom, 40px\n          .sources-type\n            r margin-bottom, 25px\n\n        .index-title\n          f-style('h3')\n          width 100%\n          r padding-bottom, 10px\n          r height, 50px\n          position relative\n          f($align: flex-end)\n          r margin-right, 10px\n          &:after\n            content ''\n            height 1px\n            background $c-main\n            width 100vw\n            position absolute \n            left -50vw\n            bottom 0\n  \n        .bottom-right\n          r margin-right, 10px\n          f(column)\n        .text-sect\n          r margin-top, 80px\n          r margin-bottom, 80px\n          f-style('subtitle')\n  </style>\n"],"names":["_sfc_main","defineComponent","router","useRouter","hero","ref","route","useRoute","el","templateRef","readyToRender","getData","usePageFlow","axios","data","onBeforeMount","appStore","tryOnMounted","until","gsap","scrollTarget","page","provide","getAssetPath","image","sectionId","target","scrollStore","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_Fragment","_renderList","sec","index","_createElementVNode","section","indexSec","object","indexObj","_createCommentVNode","sources","indexSources","_hoisted_10"],"mappings":"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"}