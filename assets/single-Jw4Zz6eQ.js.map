{"version":3,"mappings":";gpBAAA,MAAeA,GAAA;AAAA,ECAAC,GAAA;AAAA;AAAA,QCAAC,GAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAAC,GAAA;AAAA;AAAA;AAAA,ECAAC,GAAA,graCgBfC,GAAeC,GAAgB,CAC7B,KAAM,cACN,MAAO,CACL,SAAU,CACR,KAAM,OACN,SAAU,GAEd,EACA,MAAMC,EAAO,CACL,MAAAC,EAAKC,EAAyB,IAAI,EAClCC,EAAQC,EAA6B,IAAI,EACzCC,EAAYD,EAAI,EAAK,EACrBE,EAAcF,EAAI,CAAC,EACnBG,EAAWH,EAAI,CAAC,EAChBI,EAAaJ,EAA2B,IAAI,EAI5CK,EAAa,IAAM,CAClBN,EAAM,QAEPE,EAAU,OACZF,EAAM,MAAM,MAAM,EAEVO,EAAA,KAAKC,EAAO,cAAc,IAElCR,EAAM,MAAM,KAAK,EACDS,EAAA,EACRF,EAAA,KAAKC,EAAO,aAAa,GAIzBN,EAAA,MAAQ,CAACA,EAAU,MAC/B,EAEMO,EAAkB,IAAM,OACxB,IAACT,EAAM,MAAO,OAClB,MAAMU,GAAQC,EAAAb,EAAG,QAAH,YAAAa,EAAU,IAAI,iBAAiB,oBACvCC,EAAWZ,EAAM,MAAM,YAAcA,EAAM,MAAM,SACjDa,EAAc,KAAK,MAAMD,EAAWF,EAAM,MAAM,EAGhDA,EAAA,QAAQ,CAACI,EAAiBC,IAAe,CACvC,MAAAC,EAAcN,EAAMK,CAAK,EAC3BA,EAAQF,EACLI,EAAA,GAAGD,EAAa,CAAE,QAAS,EAAG,SAAU,GAAK,UAAW,OAAQ,EAEhEC,EAAA,GAAGD,EAAa,CAAE,QAAS,GAAK,SAAU,GAAK,UAAW,OAAQ,CACzE,CACD,CACH,EAKME,EAAcC,GAAiB,CACnC,MAAMC,EAAU,KAAK,MAAMD,EAAO,EAAE,EAC9BE,EAAU,KAAK,MAAMF,EAAO,EAAE,EACjC,WACA,SAAS,EAAG,GAAG,EACX,SAAGC,CAAO,IAAIC,CAAO,EAC9B,EAEMC,EAAaC,GAAsB,CACvC,GAAI,CAACvB,EAAM,OAAS,CAACK,EAAW,MAAO,OACvCkB,EAAM,gBAAgB,EAChB,MAAAC,EAAOnB,EAAW,MAAM,sBAAsB,EAE9CoB,GADSF,EAAM,QAAUC,EAAK,MACVA,EAAK,MAASpB,EAAS,MAEjDJ,EAAM,MAAM,YAAcyB,EAC1BtB,EAAY,MAAQsB,CACtB,EAEAC,GAAU,IAAM,CACT1B,EAAM,QAELA,EAAA,MAAM,iBAAiB,aAAc2B,CAAY,EACjD3B,EAAA,MAAM,iBAAiB,iBAAkB4B,CAAU,EACnD5B,EAAA,MAAM,iBAAiB,QAAS6B,CAAO,GAC9C,EAED,MAAMF,EAAe,IAAM,CACpB3B,EAAM,QACCG,EAAA,MAAQH,EAAM,MAAM,YAChBS,EAAA,EAClB,EAEMmB,EAAa,IAAM,OAClB5B,EAAM,QACFI,EAAA,OAAQO,EAAAX,EAAM,QAAN,YAAAW,EAAa,SAChC,EAEMkB,EAAU,IAAM,CACTvB,EAAA,CACb,EAEAwB,GAAgB,IAAM,CAEZvB,EAAA,KAAKC,EAAO,cAAc,EACnC,EAEK,MAAAuB,EAAOC,GAAO,MAAM,EAEnB,OACL,MAAAhC,EACA,GAAAF,EACA,KAAAiC,EACA,GAAGlC,EACH,UAAAK,EACA,WAAAG,EACA,YAAAF,EACA,WAAAG,EACA,WAAAY,EACA,UAAAI,EACA,SAAA7B,GACA,UAAAD,GACA,WAAAE,EACF,EAEJ,CAAC,aAaUuC,GAAM,CAAa,4BAACC,GAAa,oCArJ5CC,GAAA,cAwJ8BC,GAAM,8BAxJpCC,GAAA,cAgK6BC,GAAY,4DApBvCC,EAsBY,aArBI,OAAAC,EAAA,EAAeC,EAAAC,EAAA,CACpB,IAAK,KACJ,qBACA,MAAK,wBAAA/B,EAAAgC,EAAA,0BAAAhC,EAAA,GAhJnB,QAAAgC,EAAA,qBAkJeC,GAAO,KAAeC,EAAA,qBAEjC,IAAAF,EAAA,UACE,KAEM,EAAAG,EAAA,EAAAD,EADJ,MAA0EZ,GAAA,CAAAY,EAA9D,MAAiBX,GAAA,CAAAW,EAAS3C,OAAS,uEAE3B,OAAAiC,EAAA,MAxJ5B,UAyJWY,EAAgB,QAArBP,EAAA,EAAAQ,EAKE,gCALmBH,EAzJ3B,MA0JiB,CAEL,iBACD,SAAQnD,CAAU,aAAAiD,EAAA,8BA7J7B,QAAAM,EAAA,KAAAA,EAAA,OAAAC,IAAAP,EAAA,WAAAA,EAAA,aAAAO,CAAA,GAgKkBhD,UAASyC,EAAA,YAArB,QAAAN,EAAA,EAhKNM,EAAA,WAAAH,EAAA,EAAAQ,EAAA,OAAAV,GAAAa,GAAAR,EAAA,WAAAA,EAAA,kBAAAI,EAAA,8GCAeK,GAAA;AAAA;AAAA,4BCCXC,EAAUC,GAAO,QAAU,CAAC,EAO5BC,EACAC,EAEJ,SAASC,IAAmB,CAClB,UAAI,MAAM,iCAAiC,CACrD,CACA,SAASC,IAAuB,CACtB,UAAI,MAAM,mCAAmC,CACvD,EACC,UAAY,CACL,IACI,OAAO,YAAe,WACHH,EAAA,WAEAA,EAAAE,QAEf,CACWF,EAAAE,EAAA,CAEnB,IACI,OAAO,cAAiB,WACHD,EAAA,aAEAA,EAAAE,QAEjB,CACaF,EAAAE,EAAA,CAE7B,GAAG,EACH,SAASC,GAAWC,EAAK,CACrB,GAAIL,IAAqB,WAEd,kBAAWK,EAAK,CAAC,EAG5B,IAAKL,IAAqBE,IAAoB,CAACF,IAAqB,WAC7C,OAAAA,EAAA,WACZ,WAAWK,EAAK,CAAC,EAExB,IAEO,OAAAL,EAAiBK,EAAK,CAAC,OACxB,CACF,IAEA,OAAOL,EAAiB,KAAK,KAAMK,EAAK,CAAC,OACnC,CAEN,OAAOL,EAAiB,KAAK,KAAMK,EAAK,CAAC,EAC7C,CAIR,CACA,SAASC,GAAgBC,EAAQ,CAC7B,GAAIN,IAAuB,aAEvB,OAAO,aAAaM,CAAM,EAG9B,IAAKN,IAAuBE,IAAuB,CAACF,IAAuB,aAClD,OAAAA,EAAA,aACd,aAAaM,CAAM,EAE1B,IAEA,OAAON,EAAmBM,CAAM,OACzB,CACH,IAEO,OAAAN,EAAmB,KAAK,KAAMM,CAAM,OACpC,CAGA,OAAAN,EAAmB,KAAK,KAAMM,CAAM,EAC/C,CAKR,CACA,IAAIC,EAAQ,CAAC,EACTC,EAAW,GACXC,EACAC,GAAa,GAEjB,SAASC,IAAkB,CACnB,CAACH,GAAY,CAACC,IAGPD,EAAA,GACPC,EAAa,OACLF,EAAAE,EAAa,OAAOF,CAAK,EAEpBG,GAAA,GAEbH,EAAM,QACKK,GAAA,EAEnB,CAEA,SAASA,IAAa,CAClB,GAAI,CAAAJ,EAGA,KAAAK,EAAUV,GAAWQ,EAAe,EAC7BH,EAAA,GAGX,QADIM,EAAMP,EAAM,OACVO,GAAK,CAGA,IAFQL,EAAAF,EACfA,EAAQ,CAAC,EACF,EAAEG,GAAaI,GACdL,GACaA,EAAAC,EAAU,EAAE,IAAI,EAGxBA,GAAA,GACbI,EAAMP,EAAM,OAEDE,EAAA,KACJD,EAAA,GACXH,GAAgBQ,CAAO,EAC3B,CAEAhB,EAAQ,SAAW,SAAUO,EAAK,CAC9B,IAAIV,EAAO,IAAI,MAAM,UAAU,OAAS,CAAC,EACrC,aAAU,OAAS,EACnB,QAASqB,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAClCrB,EAAKqB,EAAI,CAAC,EAAI,UAAUA,CAAC,EAGjCR,EAAM,KAAK,IAAIS,GAAKZ,EAAKV,CAAI,CAAC,EAC1Ba,EAAM,SAAW,GAAK,CAACC,GACvBL,GAAWS,EAAU,CAE7B,EAGA,SAASI,GAAKZ,EAAKa,EAAO,CACtB,KAAK,IAAMb,EACX,KAAK,MAAQa,CACjB,CACAD,GAAK,UAAU,IAAM,UAAY,CAC7B,KAAK,IAAI,MAAM,KAAM,KAAK,KAAK,CACnC,EACAnB,EAAQ,MAAQ,UAChBA,EAAQ,QAAU,GAClBA,EAAQ,IAAM,CAAC,EACfA,EAAQ,KAAO,CAAC,EAChBA,EAAQ,QAAU,GAClBA,EAAQ,SAAW,CAAC,EAEpB,SAASqB,GAAO,CAAC,CAEjBrB,EAAQ,GAAKqB,EACbrB,EAAQ,YAAcqB,EACtBrB,EAAQ,KAAOqB,EACfrB,EAAQ,IAAMqB,EACdrB,EAAQ,eAAiBqB,EACzBrB,EAAQ,mBAAqBqB,EAC7BrB,EAAQ,KAAOqB,EACfrB,EAAQ,gBAAkBqB,EAC1BrB,EAAQ,oBAAsBqB,EAE9BrB,EAAQ,UAAY,SAAUsB,EAAM,CAAE,MAAO,CAAC,CAAE,EAEhDtB,EAAQ,QAAU,SAAUsB,EAAM,CACxB,UAAI,MAAM,kCAAkC,CACtD,EAEAtB,EAAQ,IAAM,UAAY,CAAS,SAAI,EACvCA,EAAQ,MAAQ,SAAUuB,EAAK,CACrB,UAAI,MAAM,gCAAgC,CACpD,EACAvB,EAAQ,MAAQ,UAAW,CAAS,QAAG,oBCtJnC,MAAAwB,GACMjF,GAAA,CAKE,qBAER,OACQ,SACC,oBACP,QAAS,MAEb,MACQ,YACF,mBAEJ,qBAEA,cAEA,QACqB,qBACf,UAAiB,CAEjB,EACN,iBACA,MAAAC,EAAiB,CACX,KAAAiF,CAEN,EAAM,CAAsB,KACX,GAAAC,CACP,EAAAC,KAEUC,KAAA,EACNC,EAAAjF,EAAA,EAAAkF,EAAAlF,EAAA,EAEIH,EAAAC,EAAA,MACC,IAAAqF,EAAA,EACFC,EAAA,QAAAC,IAAA,MAEXC,EAAMtF,EAAA,IAAAuF,EACUvF,EAAA,MAEhBwF,EAAAC,GAAA,CACF,MACI,IAEc,MAAAC,CAEhB,EAAAC,GAAAC,GAAA,OAEmBC,EAAA7F,EAAA,IACnB8F,EAAAL,GAAA,eACF,oBAEH,kBAE4B,YAER,GAGnB,gBACmB,6BAOnB,sBAKoB,gBAElB,EACA,IACU,gCAEdzE,EAAA,+BAI0B,UACf,QAEF,YACR,IAEK,EAEJ,gCAGwB,CAGpB,CAGA,CAEF,CACO,GACT,CACA,SAAA+E,CACD,EAAAC,GAAA,EAAAD,EAGK,UACG,MAAAE,GAAAP,CAAA,WAIH,gBAEJQ,EAAuB,CACd,MAAQ,CAEjB,EACqB,MAAAA,EAAA,WACnBlF,EAAA,uBAGM,UAGF,OACJ,GAGE,UACA,0BAGM,YACN,SACA,EACF,MAAAmF,GAAAzF,EAAAb,EAAA,oBAAAa,EAAA,2BAGM0F,GAAAD,EAAAE,IACA,MAAAC,EAAAD,EAAoB,wBAAc,0BAGlCE,EAAAF,EAAsB,sBAAuB,wBAC7CvF,EAAA,UAAAuF,GAAA,YAAAA,EAAA,+CAENR,EAAM,MAAA/E,CAAA,EAAAyF,GAAAD,EAAA,MAAAC,EAAA,WAEF,CAEA,EACGC,IAAA,gCAAA5G,EAAA,+CAI0B,EAEjC,EAGiB,GAIb6G,SACwB,MAAAC,EAAAC,EAAA,gBAAmB,OAC/C,iBAAA/G,EAAA,SAKA,OAAcgH,GAAAhH,EAAA,QAAAiH,GAAA,WAGe,gBAIdC,EAAAD,EAAA,uBACZA,EAAA,YAAAE,IAAA,GAAAA,EAAAD,CAAA,EAAAJ,CAIE,GAEH,UAAA9G,EAAU,2BACHA,EAAA,wBAAAkH,EAAAlH,EAAA,wBACD,OAAAA,EAAA,oBAAAmH,IAAA,GAAAA,EAAAD,CAAA,EAAAJ,CAAA,CACP,CACF,SACH,EAKEM,IAAuB,IAEpB,sBAAuC,EAAApH,EAAA,QAAAA,EAAA,OAI5C,EAEMqH,EAAAnG,GAA6CkG,EAAA,MAAAlG,CAAA,MAGjDoG,GAAc,CAAAC,EAAA7F,iBAII,SAAA8F,YAAA,YAChB,GADgB7B,EAChB,8EAEqB8B,EAAA,EAAAC,EAAAzH,EAAA,8BACf,IAAA0H,EAAA,EAENC,IACF,GAAAlG,aAAA,WAEMiG,EAAAjG,EAAA,QAKakG,EAAAlG,EAAA,gBAGDA,aAAA,YAAAA,EAAA,oBAKZA,iBAA8B,EAE/B,MAAAmG,GAA6BnG,EAAA,WAChCiG,EAAAE,GAAA,QAEAD,KAAU,OAGd,CAMQ,WAAuBF,EAAA,KAE7BI,GAAAF,IAA4B,IAC9BG,GAAAC,GAAAN,EAAA,aAEsBI,GAAAJ,EAAA,WAChBO,GAAA7G,EAAA,eAAAuE,EAAA,OACL,MAAA8B,EAIA,0BAAAS,EAAA,MAGgB,EACf,aAEA,KACAnB,EAAA,aACAkB,GAAA,oCAGA,EACA,QACA,kBAEA,UACc,MAEd1C,EAAAyC,GAEaxC,EAAyCsC,KAC7B,UAEzB7H,EAAA,mCAAAkI,CAAA,EAGAlD,aAAA,GACFnE,GAAAsH,GAAA,IAAAzC,EAAA,eAAA7E,GAAA,OACFiG,EAAA,aACD,OAAApB,EAAA,ysCCpUc0C,GAAA,gCD4U8CpF,GAAW,oBA5UxEb,GAAA,wBAAAC,GAAA,cAAAC,GAAA,cAAAC,GAAA,4BAAAE,GAAA,cA8ZgB6F,GAAY,CACf,IAAK,iGAvFhB5F,EA6FU,oBA5FKmE,EAAiB,EAAA1D,EAAA,WACvB,IAAK,SAAAL,EAAA,yBAEAyF,4CACVzF,EA2CY,SAxXlBA,aA8U6B,EAAAK,EAAA,MAAAF,GAAA,EAAAN,EAAA,EACWC,EAAA4F,GAAA1F,EAAA,6BACtB,aACD,QAAQA,EAAA,cACR,cAAMA,EAAS,SACd,SACA,gBACA,6FArVlB,qBA4VuBH,EAAA,IAAAQ,EAA4BsF,GAAK,KAAAC,GAAA5F,EAAA,mBAAA6F,EAAAzH,KAChCyB,EAAA,EAAaC,EAAA4F,GAAA1F,EAAA,sBACjB,IAAsB,0BAAA5B,CAAA,sBA9V1C,cAsXgB,CAAA4B,EAAA,mBArBJC,GAKE,KAAAC,EALc,MAAkBoC,GAAM,CAAAwD,EACtBC,EAAqB,CAC3B,IAAK,gBAAC/F,EAAkC,mCAAA6F,CAAA,GACxC,MAAM,sBACL,yDAEe,kBAA5B,kBAvWZ7F,EAAA,SAAA5B,CAAA,EAAAgC,EAAA,QAAAP,EAAA,EAAAC,EAAAC,EAAA,CAwWuB,IAAI,EACJ,QAAM,GACN,IAAK,SACL,MAAK,QACL,sCACA,YACC,eA9WxB,kBA8WuFoD,oDAG/D,SAAKnD,EAAEwE,wBAjX/B,QAmXwDwB,GAAAhG,EAAA,0BAAAA,EAAA,mCAAA6F,CAAA,GAAAG,CAAA,IAA/B,QAAA/F,GAAC,IAAQ,CAAAC,EAASO,OAAS,gBACtC,UAAAT,EAAA,WAAM,KAAM,EAAMT,EAAA,EAAAW,EAAS+F,OAAQ,kCApXjD,SAAAzG,EAAA,6EAyXiBsE,gCAAX,YAgBM,IAAA9D,EAzYZ,cA0X6BK,EAAA,OACjB,yBAEJ,eAKEL,EAAA,YAJeD,EAAW,CACjB,IAAK,SACL,MAAM,YACL,MAAMmG,qBAElB,KAKElG,EAAA,UALS,KAAI,EAAQ,UAAA8F,EACN/F,EAAW,CACjB,IAAK,SACL,MAAM,YACL,MAAMmG,qBAvY1B,KAAAlG,EAAA,gCA2YyB,GAAnBI,EAAA,OAAAJ,EA3YN,cA4YyCK,EAAA,OAC7B,6CAEOsC,EAAc,KAAArC,EAAA,GAAA0F,GAAAhG,EAAA,cAAAA,EAAA,cA/YjCA,EAAA,gBAAAH,IAgZqCQ,EAAA,OACvB,IAAKsC,EACN,IAAK,qBAlZlB,IAAA3C,EAAA,qCAoZQ,KAQY,OARDI,EAAiB,OAAA0F,EACX/F,EAAO,CACb,IAAK,cACL,MAAK,QACL,0BACC,6CAzZpB,QA2ZkDO,EAAA,KAAAA,EAAA,GAAA0F,GAAAhG,EAAA,sBAA7BC,GAAO,KAAAC,EAASiG,OAAS,mCA3Z9C,SAAAxG,EAAA,IA6ZoByG,aAIV,aAAyCpG,EAAA,WAAAH,EAAA,EAAAQ,EAAA,MAAAmF,GAAAlF,EAAA,KAAAA,EAAA,IAjanDJ,EAAA,WAAAqF,EAAA,mBAAAnF,EAAA,UAAAA,EAAA,UAAAA,EAAA,yEEgBAiG,GAAepJ,GAAgB,CAC7B,KAAM,oBACN,MAAO,CACL,GAAI,CACF,KAAM,OACN,QAAS,IACX,EACA,QAAS,CACP,KAAM,OACN,QAAS,IACX,EACA,KAAM,CACJ,KAAM,OACN,QAAS,OACX,EACA,QAAS,CACP,KAAM,CAAC,OAAQ,KAAK,EACpB,QAAS,IACX,EACA,cAAe,CACb,KAAM,OACN,QAAS,CACX,EACA,eAAgB,CACd,KAAM,OACN,QAAS,CACX,EACA,eAAgB,CACd,KAAM,OACN,QAAS,IACX,EACA,eAAgB,CACd,KAAM,OACN,QAAS,IACX,EACA,QAAQ,CACN,KAAM,OACN,QAAS,IACX,EACA,OAAQ,CACN,KAAM,OACN,QAAS,IACX,EACA,OAAQ,CACN,KAAM,OACN,QAAS,KAEb,EACA,MAAMC,EAAO,CACL,MAAE,CAAE,EAAImF,GAAQ,EAChBiE,EAAQlJ,EAAyB,OAAO,EACxCkF,EAAQiE,GAAS,EACjBC,EAAclJ,EAAI,EAAI,EAEtB,CAAE,SAAA+F,GAAaC,GAAQ,CAC3B,GAAI,CACF,MAAO,IAAMmD,GAAA,WAAO,0BAAoB,sCACxC,KAAM,IAAMA,GAAA,WAAO,yBAAmB,sCACtC,GAAI,IAAMA,GAAA,WAAO,uBAAiB,oCACnC,CAEH,EAEMC,EAAS,gBAAgBpE,EAAM,OAAO,UAAU,YAE5Ce,EAAA,CAAC,CAAC,GAAAsD,KAAQ,CACV/I,EAAA,GAAGC,EAAO,oBAAqB+I,CAAO,EAE1C,IAAAC,EAAQF,EAAG,MAAM,WAClBzJ,EAAM,OAAS,SAAQ2J,EAAQF,EAAG,KAAK,WACvCzJ,EAAM,OAAS,OAAM2J,EAAQF,EAAG,GAAG,SAEtCG,GACA,CACE,CACE,QAASD,EACT,SAAU,CACR,OAAAH,EACA,GAAIxJ,EAAM,GACV,QAASA,EAAM,QACf,MAAOA,EAAM,eACb,MAAOA,EAAM,eACb,QAASA,EAAM,QACf,cAAeA,EAAM,eAAiB,EACtC,eAAgBA,EAAM,gBAAkB,EACxC,OAAQA,EAAM,OACd,OAAQA,EAAM,OAChB,CAEJ,EAAG,CAAE,UAAU,GAAM,gBAAiBoJ,EAAM,MAAO,MAAM,GAAM,WAAY,CAAC,GAAGA,EAAM,KAAO,EAAC,EAG9F,EAED,MAAMM,EAAU,IAAM,CACpBJ,EAAY,MAAQ,EACtB,EAEA,OAAAO,GAAe,IAAM,CACXnJ,EAAA,IAAIC,EAAO,oBAAqB+I,CAAO,EAC/CI,GAAW,EAAI,EAChB,EAEM,CACL,EACA,GAAG/D,GAAO/F,CAAK,EACf,YAAAsJ,CACF,EAEJ,CAAC,EAKUrG,GAAM,qCAEIb,GAAM,wDAAvB,SAAA2H,GAAAjH,EAA4CM,EAA5C4G,EAA4CC,EAAAC,EAAAC,EAAA,QAC5CxH,EAAiD,EAAAQ,EAAA,UAAAF,GAAA,CAAAD,EAA/BsG,MAAWlH,GAAA,UAAiBY,EAAA,QArIlD,YAAAF,EAAA,8GCmCKsH,GAAerK,GAAW,CAC7B,KAAM,uBACN,WAAY,CACV,YAAAsK,GACA,cAAAC,GACA,kBAAAC,EACF,EACA,OAAQ,CACN,MAAMnF,EAAQiE,GAAS,EACjBmB,EAASC,GAAU,EACnBC,EAAQxK,EAAyB,OAAO,EACxCyK,EAAUzK,EAAyB,SAAS,EAC5C0K,EAAW1K,EAAyB,UAAU,EAC9CD,EAAKC,EAAyB,IAAI,EAClC2K,EAAWC,EAAS,IAAMC,EAAS,QAAQ,EAC3CC,EAAc5K,EAAI,EAAK,EACvB6K,EAAgB7K,EAAI,EAAK,EACzB,CAAE,KAAA0F,CAAS,EAAAC,GAAOC,GAAY,KAAK,EACnCkF,EAAgB9K,EAAI,EAAK,EACzB+K,EAAc/K,EAAI,CAAE,MAAO,EAAG,OAAQ,EAAG,EAGzCgL,EAAoBC,EAAW,UAAU,IAAIjG,EAAM,OAAO,UAAoB,GAAG,EAEjF,CAAE,cAAAkG,EAAe,QAAAC,EAAS,SAAApF,CAAA,EAAaqF,GAA0B,CACrE,MAAO,CAEL,OAAKJ,EAKEK,GAAM,IAAI,gBAAgBrG,EAAM,OAAO,UAAU,YAAY,EACjE,KAAK,CAAC,CAAE,KAAAc,CAAA,IAAW,CAClBmF,EAAW,OAAOnF,CAAI,EACXmF,EAAA,WAAWnF,EAAK,EAAE,EAC7B,MAAMwF,EAASL,EAAW,iBAAiBjG,EAAM,OAAO,IAAc,EAEtE,OAAIsG,GAGFX,EAAS,SAAS,EAEb,CACL,OAAQ7E,EACR,GAAGwF,CACL,EACD,GAnBDlB,EAAO,KAAK,GAAG,EACR,QAAQ,QAAQ,EAkBtB,CACL,CACD,EAEDmB,GAAe,IAAM,CACnB,GAAG,CAACZ,EAAS,WAAaA,EAAS,YAAa,CAC9CP,EAAO,KAAK,GAAG,EACf,OACF,CACD,EAEDrE,EAAS,SAAY,CACd0E,EAAS,OAAOE,EAAS,WAAW,EAAI,EAGzCM,EAAW,UACJN,EAAA,cAAcM,EAAW,QAAQ,OAAO,EACjDA,EAAW,eAAe,GAG5BO,GAAY,cAAc,EAAK,EACvBlL,EAAA,GAAGC,EAAO,oBAAqBkL,CAAa,EAC5CnL,EAAA,GAAGC,EAAO,oBAAqBmL,CAAa,EAEpD,MAAMzF,GAAMP,CAAI,EAAE,KAAK,EAAI,EAE3B,IAAIiG,EAAQ,EAER7J,EAAK,MAAM,OAAS,SAAWA,EAAK,MAAM,OAAS,YACrD,MAAMmE,GAAM6E,CAAa,EAAE,KAAK,EAAI,EAE5Ba,EAAA,KAIV,WAAW,IAAM,CACLC,EAAA,GACTD,CAAK,EACT,EAGD,MAAMC,EAAY,IAAM,CACjB5K,EAAA,WACF,IAAI,IAAM,CACHsJ,EAAA,MAAM,UAAU,OAAO,QAAQ,EAC7BC,EAAA,MAAM,UAAU,OAAO,QAAQ,EACvCsB,GAAoB,EAAG,CACrB,SAAU,OACX,GACA,CAAC,EACH,OAAOvB,EAAM,MAAO,CAAE,SAAU,KAAQ,CAAE,SAAU,EAAG,QAAS,EAAG,KAAM,aAAc,SAAU,KAAO,EAAG,EAC3G,OAAOE,EAAS,MAAO,CAAE,SAAU,IAAK,EAAG,CAAE,SAAU,EAAG,QAAS,EAAG,KAAM,aAAc,SAAU,KAAO,EAAG,EAC9G,IAAI,IAAM,CACTqB,GAAoB,EAAG,CACrB,SAAU,sBACV,OAAQ,GACT,GACA,EAAE,EACJ,IAAI,IAAM,CACTlB,EAAS,WAAW,EAAK,GACxB,GAAG,CACV,EAGAlB,GAAe,IAAM,CACnB+B,GAAY,cAAc,EAAI,EAC/B,EAED,MAAMM,EAAgB,IAAM,CAC1Bb,EAAW,kBAAkB,EAAI,EACjCN,EAAS,WAAW,EAAI,EACxB3J,EAAK,WACF,GAAGnB,EAAG,MAAO,CAAE,QAAS,EAAG,KAAM,aAAc,SAAU,CAAE,EAAG,CAAC,EAC/D,IAAI,IAAM,CACFuK,EAAA,KAAK,CAAE,KAAM,aAAc,OAAQ,CAAE,KAAMpF,EAAM,OAAO,UAAW,EAAG,GAC5E,CAAC,CACR,EAEMyG,EAAgB,IAAM,CAC1BX,EAAc,MAAQ,EACxB,EAEMY,EAAiBK,GAA0B,CACnChB,EAAA,MAAQ,CAAE,OAAOgB,GAAA,YAAAA,EAAM,OAAQ,IAAK,QAAQA,GAAA,YAAAA,EAAM,QAAS,GAAI,EAC3EnB,EAAY,MAAQ,EACtB,EAEMoB,EAAsB,IAAM,CAChCpB,EAAY,MAAQ,GAEpB,WAAW,IAAM,CACfiB,GAAoB,EAAG,CACrB,SAAU,sBACX,GACA,GAAG,CACR,EAEMI,EAAmBC,GAAmB,CAC1CrB,EAAc,MAAQqB,CACxB,EAEMC,GAAgB,CAACC,EAAQpH,IAAe,CAC5CoH,EAAE,eAAe,EACjBzB,EAAS,WAAW,EAAI,EAExB3J,EAAK,WACF,GAAGnB,EAAG,MAAO,CAAE,QAAS,EAAG,KAAM,aAAc,SAAU,CAAE,EAAG,CAAC,EAC/D,IAAI,IAAM,CACTuK,EAAO,KAAKpF,CAAK,GAChB,CAAC,CACR,EAEAyE,GAAe,IAAM,CACXnJ,EAAA,IAAIC,EAAO,oBAAqBkL,CAAa,EAC7CnL,EAAA,IAAIC,EAAO,oBAAqBmL,CAAa,EACtD,EAED,MAAM5J,EAAOqJ,EAAQ,EACrB,OAAAkB,GAAQ,OAAQvK,CAAI,EAEb,CACL,cAAAoJ,EACA,KAAAxF,EACA,KAAA5D,EACA,SAAA2I,EACA,cAAAqB,EACA,oBAAAE,EACA,gBAAAC,EACA,cAAAE,GACA,MAAA7B,EACA,SAAAhL,GAAA,UACAuJ,GACA,GAAAhJ,EACA,YAAA+K,EACA,cAAAC,EAAA,SACAjC,GACA,UAAAzF,GACA,SAAAwF,GACA,MAAA3D,EACA,SAAAwF,EACA,UAAAnL,GACA,aAAcqL,EAAS,IAAM,GAAGK,EAAY,MAAM,KAAK,IAAI,EAC3D,cAAeL,EAAS,IAAM,GAAGK,EAAY,MAAM,MAAM,IAAI,CAC/D,EAEJ,CAAC,sKAea/I,GAAW,iBAACC,GAAM,sCAmCXC,GAAA,iBArRrBC,GAAA,6CAAAE,GAAA,cAyRkC6F,GAAY,qBAzR9CoE,GAAA,cAAAC,GAAA,cAySuBC,GAAA,cAzSvBC,GAAA,2LAuO+B/G,IAAQ5D,aAAI,SACnCY,EAAI,eAAIA,oBACaK,EAAA,QACpB,SACA,cAAa,uBAAE0H,GAChB,gBAAMiC,EAAAhK,EAAwB,cAAxB,YAAAgK,EAAwB,mBAAAhK,EAAA,SAElC,mCACW,MAAgB,CACrB,qCAEJ,gBAAAiK,EAAAjK,EA4BM,KA5BN,qBAAAiK,EAAA,aACE1K,GAOE,CAAAS,EA1PV,wEAoP6C,EAAAF,EAAAoK,EAAA,CACrB,IAAI,EACJ,QAAU9K,eACV,KAASA,YACT,YAASA,SAAK,SAALA,cAAW,GACpB,SAAM+K,EAAAnK,EAAEuJ,cAAF,YAAAY,EAAEZ,2BAzPhC,SAAAvJ,EAAA,eA2PiCZ,OAAK,EAAI,CAAeA,4BAAS,UAAaA,UAAK,UAAI,MAAhF,GAYE,IAvQVY,EAAA,oBAAAA,EAAA,kBAAAA,EAAA,qBAAAH,IA4PoCC,EAAGsK,EAAA,CACX,IAAI,EACJ,GAAShL,UACT,KAAeA,YACf,UAAc,KAAEA,QAChB,cAAcY,EAAEZ,KAAI,cACpB,eAAgBA,EAAK,oBACrB,eAASA,EAAK,KAAO,eACrB,eAASA,EAAK,KAAM,eACpB,QAAQA,EAAK,aACb,SAAQA,SAAK,SAALA,cAAW,UAAAY,EAAA,YAtQ/C,OAAAA,EAAA,kBAwQ6B,EAAI,aAAgBZ,UAAK,gBAAK,8FAAnD,GAIE,IAAAY,EA5QV,uCAyQsCF,EAAAuK,EAAA,CACnB,MACA,MAAG,sCAAArK,EAAA,8CAAAA,EAAA,cA3QtB,oBAAAA,EAAA,mCAAAA,EAAA,cA6QQ,iBAA4G,SAAtGI,EA7Qd,OA6Q2FF,EAAA,aAAAoK,GAAA,4BAAAtK,EAAA,aAAAA,EAAA,gGAErF,WAAK,GAAG,EACGE,EAAA,OACN,YACC,0DAEJ,gBAAAqK,EAAAvK,EAqCM,KArCN,qBAAAuK,EAAA,OAEI,MAEM9K,GAAA,CAFYS,EAAA,MAAAR,GAAA,CAAOQ,EAAA,qBACvB,QAAwCI,EAAA,KAAAA,EAAA,GAAA0F,GAAAhG,EAAA,qBAAbmG,MAAS,oCAE3B/G,OAAK,EAAIO,EAAA,mBAWX,EAAAU,EAAA,MAAAmF,GAAA,EAAA3F,EATU,EAAAQ,EAAAsF,GAAA,KAAAC,GAAA,GAAA4E,EAAApM,IACL8B,EA5R1B,QA4R2D,IAAA9B,EAAA,MAAkEkM,GAAoB,OAIvHlM,EAAW,cAAA4B,EAAA,gBAAA5B,EAAA,cAAA4B,EAAA,YAAAA,EAAA,eAErB,oBAA0BpD,OAAQ,aAClC,UAAAoD,EAAA,UAAM,KAAM,EAAQ4J,EAAA,EAAA1J,EAAStD,OAAQ,2DAnSrD0D,EAAA,KAAAA,EAAA,GAAAJ,EAAA,4DAuSgBE,EAAoB,OAAAF,EAASd,KAAK,sBACtC,UAAsDY,EAAA,YAAjD,KAAM,EAAc8J,EAAA,EAAA5J,EAASd,MAAK,sBACvC,UAQMY,EAAA,kBAPJ,KAME,EAAA+J,EAAA,EANqB7J,EAAA,MAAAuK,GAAA,CAAA3E,EACN/F,EAAS,CACd,MAAE,OACF,MAAO,UACR,GAAG,CAAC,KAAG,wBAAAC,EAAA,UACN,SAAK0K,EAAA1K,EAAA,0BAAA0K,EAAA,yHAIVtL,KAnTrBY,EAAA,YAAAH,EAAA,EAoToCQ,EAAA,OACpB,4BAEJ,gBAA4FsK,EAAA3K,EAAA,0BAAA2K,EAAA,UAvTxG,4BAAA3K,EAAA,mCAAAA,EAAA,uCAAA4K,EAAA,GAAAxK,EAAA,YAAAZ,EAAA,KAAAF,EAAA,KAAAa,EAAA,GAAAC,EAAA","names":["IconClose","StarIcon","PauseIcon","PlayIcon","PlayerIcon","_sfc_main$2","defineComponent","props","el","templateRef","audio","ref","isPlaying","currentTime","duration","visualizer","togglePlay","emitter","EVENTS","startVisualizer","paths","_a","progress","activePaths","pathSingle","index","pathElement","gsap","formatTime","time","minutes","seconds","seekAudio","event","rect","newTime","onMounted","onTimeUpdate","onMetadata","onEnded","onBeforeUnmount","page","inject","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_resolveComponent","_openBlock","_createBlock","_component_ui_button","_ctx","_withCtx","_createElementVNode","_hoisted_1","_createCommentVNode","_createElementBlock","_cache","args","_toDisplayString","BorderSvg","process","browserModule","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","len","i","Item","array","noop","name","dir","_sfc_main$1","emit","t","useI18n","route","elPrev","elNext","initialOffsetX","initialOffsetY","zoomedImageSrc","isZoomed","zoomedImageElement","lastTouchPosition","reactive","done","toRefs","loaderStore","imageSize","data","onInitUi","useFlow","until","updateZoomButton","slides","each","pic","bounds","imgBounds","isSwiper","normalizedArticle","extension","interfaceStore","map","article","png","jpg","normalizedNoZoom","isNoZoom","startZoom","imageSrc","nextTick","scale","sectionBounds","clientX","clientY","touch","offsetY","percentX","offsetX","tl","percentY","onMove","Draggable","_imports_0","_hoisted_8","type","_resolveDynamicComponent","_Fragment","_renderList","image","_createVNode","_component_ui_picture","$event","IconPlus","SvgArrow","CloseIcon","hasInteract","_sfc_main","Scene","useRoute","showSpinner","__vitePreload","folder","ui","onReady","scene","useWebGL","tryOnUnmounted","clearWebGL","_sfc_render","$props","$setup","$data","$options","__default__","AudioPlayer","ArticleObject","InteractiveObject","router","useRouter","Panel","Content","LeftSide","disabled","computed","appStore","showArticle","zoomedArticle","isDetailReady","reducerSize","isValidThematique","themeStore","readyToRender","getData","usePageFlow","axios","object","onBeforeMount","scrollStore","onDetailReady","onShowArticle","delay","animateIn","interactWithSceneAt","goBackListing","size","onBackToInteractive","onZoomedArticle","value","onClickCredit","e","provide","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_b","_c","_component_ArticleObject","_e","_component_InteractiveObject","_component_ui_video","_normalizeClass","_g","note","_hoisted_13","_h","_i","_hoisted_14"],"ignoreList":[7],"sources":["../../src/vue/src/assets/svg/close.svg?raw","../../src/vue/src/assets/svg/star.svg?raw","../../src/vue/src/components/UiKit/AudioPlayer/assets/pause.svg?raw","../../src/vue/src/components/UiKit/AudioPlayer/assets/play.svg?raw","../../src/vue/src/components/UiKit/AudioPlayer/assets/player-visualizer.svg?raw","../../src/vue/src/components/UiKit/AudioPlayer/AudioPlayerBar.vue","../../src/vue/src/pages/Thematique/assets/border.svg?raw","../../src/vue/node_modules/process/browser.js","../../src/vue/src/pages/Thematique/blocks/ArticleObject.vue","../../../../../../../../assets/interaction-touch.png","../../src/vue/src/pages/Thematique/blocks/InteractiveObject.vue","../../src/vue/src/pages/Thematique/single.vue"],"sourcesContent":["export default \"<svg fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 50 50\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M13.6 10 10 13.6l11.38 11.38-.021.02.02.02L10 36.4l3.6 3.6 11.38-11.38L36.358 40l3.6-3.6-11.38-11.38.021-.02-.02-.02L39.958 13.6l-3.6-3.6-11.38 11.38L13.6 10Z\\\" fill=\\\"currentColor\\\"/></svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\n  <path d=\\\"M7.55778 1.40966C7.74538 1.05408 8.25462 1.05408 8.44222 1.40966L10.0792 4.51223C10.2962 4.9236 10.6918 5.21101 11.1501 5.29031L14.6067 5.88839C15.0028 5.95693 15.1602 6.44124 14.88 6.72954L12.4351 9.24511C12.1109 9.57865 11.9598 10.0437 12.026 10.5041L12.5254 13.9763C12.5826 14.3742 12.1706 14.6735 11.8098 14.4961L8.66187 12.9483C8.24449 12.743 7.75551 12.743 7.33813 12.9483L4.19017 14.4961C3.82939 14.6735 3.41741 14.3742 3.47464 13.9763L3.97397 10.5041C4.04018 10.0437 3.88908 9.57865 3.56491 9.24511L1.12003 6.72955C0.839833 6.44125 0.997199 5.95693 1.39334 5.88838L4.84991 5.29031C5.30821 5.21101 5.7038 4.9236 5.92084 4.51223L7.55778 1.40966Z\\\" stroke=\\\"currentColor\\\"/>\\n</svg>\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 18 18\\\">\\n  <g>\\n    <rect x=\\\"11\\\" y=\\\"3\\\" width=\\\"4\\\" height=\\\"12\\\" style=\\\"fill: currentColor\\\"/>\\n    <rect x=\\\"3\\\" y=\\\"3\\\" width=\\\"4\\\" height=\\\"12\\\" style=\\\"fill: currentColor\\\"/>\\n  </g>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 18 18\\\">\\n  <polygon points=\\\"3 3 3 15 15 9 3 3\\\" style=\\\"fill-rule: evenodd; fill: currentColor\\\"/>\\n</svg>\\n\"","export default \"<svg class=\\\"vis-svg\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 365 15\\\"><path d=\\\"M.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5C0,.22.22,0,.5,0Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M4.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M8.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M12.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M16.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M20.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M24.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M28.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M32.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M36.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M40.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M44.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M48.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M52.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M56.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M60.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M64.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M68.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M72.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M76.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M80.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M84.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M88.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M92.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M96.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M100.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M104.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M108.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M112.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M116.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M120.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M124.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M128.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M132.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M136.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M140.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M144.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M148.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M152.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M156.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M160.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M164.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M168.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M172.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M176.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M180.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M184.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M188.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M192.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M196.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M200.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M204.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M208.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M212.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M216.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M220.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M224.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M228.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M232.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M236.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M240.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M244.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M248.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M252.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M256.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M260.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M264.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M268.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M272.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M276.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M280.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M284.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M288.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M292.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M296.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M300.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M304.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M308.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M312.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M316.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M320.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M324.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M328.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M332.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M336.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M340.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M344.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M348.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M352.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M356.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M360.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/><path d=\\\"M364.5,0h0c.28,0,.5.22.5.5v14c0,.28-.22.5-.5.5h0c-.28,0-.5-.22-.5-.5V.5c0-.28.22-.5.5-.5Z\\\" style=\\\"fill:currentColor; stroke-width:0px;\\\"/></svg>\"","<docs>\n  # AudioPlayerBar\n  > the whole bar with play and next etc\n  \n  @author Nicolas Husson <nicolas@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { VueInstance, templateRef } from '@vueuse/core';\nimport gsap from \"gsap\";\nimport emitter, { EVENTS } from 'plugins/store/events';\nimport { defineComponent, inject, onBeforeUnmount, onMounted, ref } from 'vue';\nimport PauseIcon from './assets/pause.svg?raw';\nimport PlayIcon from './assets/play.svg?raw';\nimport PlayerIcon from './assets/player-visualizer.svg?raw';\n\nexport default defineComponent({\n  name: \"AudioPlayer\",\n  props: {\n    audioSrc: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const el = templateRef<VueInstance>(\"el\");\n    const audio = ref<HTMLAudioElement | null>(null);\n    const isPlaying = ref(false);\n    const currentTime = ref(0);\n    const duration = ref(0);\n    const visualizer = ref<HTMLDivElement | null>(null);\n\n    let animation: gsap.core.Tween | null = null; // GSAP timeline for animations\n\n    const togglePlay = () => {\n      if (!audio.value) return;\n\n      if (isPlaying.value) {\n        audio.value.pause();\n        stopVisualizer();\n        emitter.emit(EVENTS.RESET_INACTIVE);\n      } else {\n        audio.value.play();\n        startVisualizer();\n        emitter.emit(EVENTS.STOP_INACTIVE);\n      }\n\n\n      isPlaying.value = !isPlaying.value;\n    };\n\n    const startVisualizer = () => {\n      if (!audio.value) return;\n      const paths = el.value?.$el.querySelectorAll(\".visualizer path\");\n      const progress = audio.value.currentTime / audio.value.duration; // Calculate progress\n      const activePaths = Math.floor(progress * paths.length); // Calculate how many paths to animate\n\n      // Animate opacity with GSAP\n      paths.forEach((pathSingle: any, index: any) => {\n        const pathElement = paths[index];\n        if (index < activePaths) {\n          gsap.to(pathElement, { opacity: 1, duration: 0.2, overwrite: \"auto\" });\n        } else {\n          gsap.to(pathElement, { opacity: 0.6, duration: 0.2, overwrite: \"auto\" });\n        }\n      });\n    };\n    const stopVisualizer = () => {\n      if (animation) (animation as gsap.core.Tween).kill(); // Stop GSAP animation\n    };\n\n    const formatTime = (time: number) => {\n      const minutes = Math.floor(time / 60);\n      const seconds = Math.floor(time % 60)\n        .toString()\n        .padStart(2, \"0\");\n      return `${minutes}:${seconds}`;\n    };\n\n    const seekAudio = (event: MouseEvent) => {\n      if (!audio.value || !visualizer.value) return;\n      event.stopPropagation();\n      const rect = visualizer.value.getBoundingClientRect();\n      const clickX = event.clientX - rect.left;\n      const newTime = (clickX / rect.width) * duration.value;\n\n      audio.value.currentTime = newTime;\n      currentTime.value = newTime; // Update UI immediately\n    };\n\n    onMounted(() => {\n      if (!audio.value) return;\n\n      audio.value.addEventListener(\"timeupdate\", onTimeUpdate);\n      audio.value.addEventListener(\"loadedmetadata\", onMetadata);\n      audio.value.addEventListener(\"ended\", onEnded);\n    });\n\n    const onTimeUpdate = () => {\n      if (!audio.value) return;\n      currentTime.value = audio.value.currentTime;\n      startVisualizer(); // Call the visualizer on every timeupdate\n    }\n\n    const onMetadata = () => {\n      if (!audio.value) return;\n      duration.value = audio.value?.duration;\n    }\n\n    const onEnded = () => {\n      togglePlay();\n    }\n\n    onBeforeUnmount(() => {\n      stopVisualizer(); // Stop animation on unmount\n      emitter.emit(EVENTS.RESET_INACTIVE);\n    });\n\n    const page = inject('page') as ObjectSingle;\n\n    return {\n      audio,\n      el,\n      page,\n      ...props,\n      isPlaying,\n      visualizer,\n      currentTime,\n      togglePlay,\n      formatTime,\n      seekAudio,\n      PlayIcon,\n      PauseIcon,\n      PlayerIcon,\n    };\n  },\n});\n</script>\n\n<template>\n  <ui-button ref=\"el\"\n             class=\"media-player\"\n             theme=\"reset\"\n             :data-variant=\"page.parent?.id\"\n             @click=\"togglePlay\"\n  >\n    <audio ref=\"audio\" :src=\"audioSrc\" />\n\n    <div class=\"progress-container\">\n      <div class=\"play-button\" theme=\"reset\">\n        <span class=\"icon-play-pause\" v-html=\"isPlaying ? PauseIcon : PlayIcon\" />\n      </div>\n      <span v-if=\"!isPlaying\" class=\"text-not-play\">Ã‰couter l'extrait</span>\n      <div ref=\"visualizer\"\n           class=\"visualizer\"\n           :class=\"isPlaying ? 'active' : 'hidden'\"\n           @click=\"seekAudio\"\n           v-html=\"PlayerIcon\"\n      />\n\n      <span v-if=\"isPlaying\" class=\"time\">{{ formatTime(currentTime) }}</span>\n    </div>\n  </ui-button>\n</template>\n<style lang=\"stylus\" scoped>\n  .media-player\n    height 40px\n    padding 10px 15px\n    border-radius 5px\n    display flex\n    align-items center\n    gap 10px\n    addVariantProps(background-color, $dark: false)\n    addVariantProps(color, $dark: true)\n    cursor pointer\n    width 100%\n    :deep()\n      .inner\n        width 100%\n      .progress-container\n        f($align: center, $justify: space-between)\n        width 100%\n  \n      .play-button\n          .icon-play-pause\n            display block\n            rp(height, 10px)\n            rp(width, 10px)\n            addVariantProps(color, $dark: true)\n      .text-not-play\n        f-style('text14', $uppercase: true)\n  \n  \n      .visualizer\n        height 30px\n        flex-grow 1\n        margin-left 10px\n        margin-right 10px\n        &.hidden\n          display none\n  \n      .time\n        font-size 12px\n  </style>\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"62\\\" height=\\\"62\\\" viewBox=\\\"0 0 62 62\\\" fill=\\\"none\\\">\\n<circle cx=\\\"31\\\" cy=\\\"31\\\" r=\\\"30\\\" fill-opacity=\\\"0.8\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-dasharray=\\\"1 7\\\"/>\\n</svg>\"","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","<docs>\n  # ArticleObject\n  > A component that store an image slider to navigate through an article\n  \n  @author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, tryOnUnmounted, until, VueInstance } from \"@vueuse/core\";\nimport SvgArrow from 'assets/svg/arrow.svg?raw';\nimport { default as CloseIcon } from 'assets/svg/close.svg?raw';\nimport IconPlus from 'assets/svg/plus.svg?raw';\nimport { store as loaderStore } from \"components/ui/Loader/store\";\nimport { each, map } from \"lodash\";\nimport { nextTick } from \"process\";\nimport { store as interfaceStore } from \"store/interface\";\nimport useFlow from \"utils/flow\";\nimport { Draggable, gsap } from \"vendors/gsap\";\nimport { computed, defineComponent, onBeforeUnmount, PropType, reactive, ref, toRefs } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useRoute } from \"vue-router\";\nimport BorderSvg from \"../assets/border.svg?raw\";\n\nexport interface Data {\n  optionsSlider: Record<string, unknown>,\n}\n\nexport default defineComponent({\n  name: \"ArticleObject\",\n  props: {\n    article: {\n      type: [String, Array],\n      default: null\n    },\n    type: {\n      type: String,\n      default: \"article\"\n    },\n    themeId: {\n      type: String,\n      default: null\n    },\n    noZoom: {\n      type: [Boolean, Array] as PropType<boolean | boolean[]>,\n      default: false\n    }\n  },\n  emits: [\"zoomed\"],\n  setup(props, { emit }) {\n    const { t } = useI18n();\n    const route = useRoute();\n    const elPrev = ref<O<VueInstance>>()\n    const elNext = ref<O<VueInstance>>()\n    const el = templateRef<HTMLElement>(\"el\");\n    let initialOffsetX = 0;\n    let initialOffsetY = 0;\n    const zoomedImageSrc = ref<string | null>(null);\n    const isZoomed = ref(false);\n    const zoomedImageElement = ref<HTMLElement | null>(null);\n    const lastTouchPosition = reactive({ x: 0, y: 0 });\n    const { done } = toRefs(loaderStore.state)\n    const imageSize = ref<number[]>([]);\n\n    const data: Data = reactive({\n      optionsSlider: {\n        loop: true,\n        pagination: false,\n        centeredSlides: true,\n        overflow: false,\n        // mobile\n        spaceBetween: 20,\n        slidesPerView: 1,\n        breakpoints: {\n          // desktop\n          1001: {\n            spaceBetween: 45,\n            slidesPerView: 1,\n          },\n        },\n        on: {\n          slideChangeTransitionStart: () => {\n            gsap.timeline()\n              .set(\".button-zoom\", { opacity: 0, scale: 0, overwrite: true }, 0)\n          },\n          slideChangeTransitionEnd: () => {\n            updateZoomButton();\n          },\n        }\n      },\n    });\n\n    const { onInitUi } = useFlow();\n\n    onInitUi(async () => {\n      await until(done).toBe(true);\n\n      setTimeout(() => {\n        updateZoomButton();\n      }, 500)\n\n    });\n\n    const updateZoomButton = () => {\n\n      gsap.fromTo(\".button-zoom\", { opacity: 0, scale: 0 }, { opacity: 1, scale: 1, ease: \"power4.out\", duration: .5, delay: .1 })\n\n      // get all images size\n      const slides = el.value?.querySelectorAll('.slide') as NodeListOf<HTMLElement>;\n\n      each(slides, pic => {\n        const bounds = pic.querySelector('.picture')!.getBoundingClientRect();\n        const imgBounds = pic.querySelector('.img')!.getBoundingClientRect();\n        const index = parseInt(pic?.getAttribute(\"data-swiper-slide-index\") || '0');\n        imageSize.value[index] = imgBounds ? (bounds.width - imgBounds.width) / 2 : 0\n      });\n    }\n\n    const isSwiper = computed(() => {\n      //check if page.article is an array and has more than 1 items\n      if (Array.isArray(props.article)) {\n        return props.article?.length > 1;\n      }\n      return false;\n    });\n\n    const normalizedArticle = computed(() => {\n      const extension = interfaceStore.hasWebP ? \".webp\" : \".jpg\";\n      if (Array.isArray(props.article)) {\n\n        return map(props.article, (article: string) => {\n          const jpg = article.indexOf(\".jpg\");\n          const png = article.indexOf(\".png\");\n\n          return article.substring(0, (jpg !== -1) ? jpg : png) + extension;\n        });\n      }\n      if (typeof props.article === \"string\") {\n        const jpg = props.article.indexOf(\".jpg\");\n        const png = props.article.indexOf(\".png\");\n        return [(props.article as string).substring(0, (jpg !== -1) ? jpg : png) + extension];\n      }\n      return []; // Fallback if it's neither a string nor an array\n    });\n\n    // Normalize noZoom to an array of booleans\n    const normalizedNoZoom = computed(() => {\n      return Array.isArray(props.noZoom) ? props.noZoom : [props.noZoom];\n    });\n\n    // You can now safely use normalizedNoZoom as an array of booleans\n    const isNoZoom = (index: number) => normalizedNoZoom.value[index] ?? false;\n    const startZoom = (imageSrc: string, event: MouseEvent | TouchEvent) => {\n      zoomedImageSrc.value = imageSrc;\n      isZoomed.value = true;\n\n      nextTick(() => {\n        zoomedImageElement.value = document.querySelector(\".zoomed-image\") as HTMLElement;\n        if (!zoomedImageElement.value || !el.value) return;\n\n        const scale = 2; // Adjust zoom level as needed\n        const sectionBounds = el.value.getBoundingClientRect();\n        //const imageBounds = zoomedImageElement.value.getBoundingClientRect();\n\n        let clientX = 0;\n        let clientY = 0;\n\n        if (event instanceof MouseEvent) {\n          clientX = event.clientX;\n          clientY = event.clientY;\n        } else if (event instanceof TouchEvent && event.touches.length === 1) {\n          event.preventDefault(); // Stop scrolling\n          const touch = event.touches[0];\n          clientX = touch.clientX;\n          clientY = touch.clientY;\n        }\n\n        // Calculate position relative to image\n        const offsetX = clientX - sectionBounds.left;\n        const offsetY = clientY - sectionBounds.top;\n\n        // Convert to percentage for transform-origin\n        const percentX = (offsetX / sectionBounds.width) * 100;\n        const percentY = (offsetY / sectionBounds.height) * 100;\n\n        const tl = gsap.timeline()\n          .set(zoomedImageElement.value, {\n            scale,\n            transformOrigin: `${percentX}% ${percentY}%`, // Center zoom at tap/click\n            x: 0,\n            y: 0,\n            opacity: 0, // Start hidden to prevent flash\n          }, 0);\n\n        if (!interfaceStore.hasInteract) {\n          tl.from(\".button-infos-touch\", { opacity: 0, scale: 0, ease: \"power4.out\", duration: 1 }, .4)\n        }\n\n        // Store initial offsets for movement\n        initialOffsetX = offsetX;\n        initialOffsetY = offsetY;\n\n        // Add event listeners\n        if (!interfaceStore.hasTouch) {\n          el.value.addEventListener(\"mousemove\", onMove);\n        }\n\n        emit(\"zoomed\", true);\n\n        // Remove any existing Draggable instance before creating a new one\n        Draggable.get(zoomedImageElement.value)?.kill();\n\n        // Using GSAP Draggable for touch events\n        if (interfaceStore.hasTouch) {\n\n          Draggable.create(zoomedImageElement.value, {\n            type: \"x,y\",\n            bounds: el.value,\n          });\n        }\n\n        // Fade the image in when zoom starts\n        gsap.to(zoomedImageElement.value, {\n          opacity: 1,\n          duration: 0.3,\n          delay: 0.2, // Adjust delay if needed\n          ease: \"power2.out\",\n        });\n      });\n    };\n\n\n    const stopZoom = () => {\n      isZoomed.value = false;\n      zoomedImageSrc.value = null;\n\n      el.value.removeEventListener(\"mousemove\", onMove);\n      // Remove Draggable event listeners\n      Draggable.get(zoomedImageElement.value)?.kill();\n      emit(\"zoomed\", false);\n    };\n\n    const onMove = (event: MouseEvent | TouchEvent) => {\n      if (!isZoomed.value || !zoomedImageElement.value || !el.value) return;\n\n      let clientX = 0;\n      let clientY = 0;\n\n      if (event instanceof MouseEvent) {\n        clientX = event.clientX;\n        clientY = event.clientY;\n      } else if (event instanceof TouchEvent && event.touches.length === 1) {\n        event.preventDefault();\n        const touch = event.touches[0];\n        clientX = touch.clientX;\n        clientY = touch.clientY;\n      }\n\n      const sectionBounds = el.value.getBoundingClientRect();\n      const imageBounds = zoomedImageElement.value.getBoundingClientRect();\n\n      // Calculate max translation limits\n      const maxOffsetX = imageBounds.width - sectionBounds.width;\n      const maxOffsetY = imageBounds.height - sectionBounds.height;\n\n      // Get cursor position as a percentage of the section\n      const percentX = (clientX - sectionBounds.left) / sectionBounds.width;\n      const percentY = (clientY - sectionBounds.top) / sectionBounds.height;\n\n      // Move the image relative to the initial zoom position\n      const translateX = initialOffsetX + percentX * maxOffsetX * -1;\n      const translateY = initialOffsetY + percentY * maxOffsetY * -1;\n\n      gsap.to(zoomedImageElement.value, {\n        x: translateX,\n        y: translateY,\n        duration: 0.1,\n        ease: \"power2.out\",\n      });\n    };\n\n\n    const onTouchStart = (event: TouchEvent) => {\n      if (!isZoomed.value || !zoomedImageElement.value || event.touches.length !== 1) return;\n\n      const touch = event.touches[0];\n      lastTouchPosition.x = touch.clientX;\n      lastTouchPosition.y = touch.clientY;\n    };\n\n    onBeforeUnmount(() => {\n      if (isZoomed.value) stopZoom();\n    });\n\n    tryOnUnmounted(() => {\n      gsap.globalTimeline.clear(); // Clear any ongoing animations\n    })\n\n    return {\n      ...toRefs(props),\n      t,\n      route,\n      startZoom,\n      stopZoom,\n      isZoomed,\n      zoomedImageSrc,\n      isSwiper,\n      elPrev,\n      elNext,\n      isNoZoom,\n      onTouchStart,\n      zoomedImageElement,\n      ...toRefs(data), //data\n      imageSize,\n      normalizedArticle,\n      isInstall: computed(() => interfaceStore.state.supports.install),\n      hasInteract: computed(() => interfaceStore.hasInteract),\n      hasTouch: computed(() => interfaceStore.hasTouch),\n      //svg\n      BorderSvg,\n      IconPlus,\n      SvgArrow,\n      CloseIcon\n    };\n  },\n});\n</script>\n\n<template>\n  <section ref=\"el\"\n           :key=\"normalizedArticle[0] + '_'\"\n           class=\"ArticleObject\"\n  >\n    <div v-if=\"(type === 'article' && article) || (article)\" class=\"doc\">\n      <component :is=\"isSwiper ? 'ui-swiper' : 'div'\"\n                 ref=\"Swiper\"\n                 :options=\"optionsSlider\"\n                 :data-swiper=\"isSwiper\"\n                 tag=\"ol\"\n                 class=\"wrapper\"\n                 :cursor=\"true\"\n                 :overflow=\"true\"\n                 :navigation=\"{\n                   nextEl: elNext && elNext.$el,\n                   prevEl: elPrev && elPrev.$el\n                 }\"\n      >\n        <component :is=\"isSwiper ? 'li' : 'div'\"\n                   v-for=\"(image, index) in normalizedArticle\"\n                   :key=\"`BuilderImageVideo-item-${index}`\"\n                   class=\"item slide\"\n                   :data-single=\"!isSwiper\"\n        >\n          <div class=\"container-pic\">\n            <ui-picture :src=\"`/thematiques/${route.params.thematique}/contenu/${image}`\"\n                        class=\"media-swip -picture\"\n                        sizes=\"(min-width: 1024px) 1000px, 80vw\"\n                        cover=\"contain\"\n                        :force-visible=\"true\"\n            />\n            <ui-button v-if=\"!(isNoZoom(index))\"\n                       ref=\"zoomEl\"\n                       theme=\"reset\"\n                       class=\"button-zoom swiper-no-swiping\"\n                       name=\"zoom\"\n                       data-variant=\"page.parent?.id\"\n                       aria-label=\"Bouton zoom\"\n                       :style=\"imageSize[index] ? {\n                         right: `${imageSize[index]}px`\n                       } : null\"\n                       @click=\"startZoom(`/thematiques/${route.params.thematique}/contenu/${image}`, $event)\"\n            >\n              <span class=\"border\" v-html=\"BorderSvg\" />\n              <span class=\"icon\" v-html=\"IconPlus\" />\n            </ui-button>\n          </div>\n        </component>\n      </component>\n      <nav v-if=\"isSwiper\"\n           class=\"navigation\"\n           :data-variant=\"themeId\"\n      >\n        <ui-button ref=\"elPrev\"\n                   class=\"btn -prev\"\n                   theme=\"reset\"\n                   title=\"Prev\"\n                   :icon=\"SvgArrow\"\n        />\n        <ui-button ref=\"elNext\"\n                   class=\"btn -next\"\n                   theme=\"reset\"\n                   title=\"Next\"\n                   :icon=\"SvgArrow\"\n        />\n      </nav>\n      <!-- Zoomed Image Modal -->\n      <div v-if=\"isZoomed\"\n           class=\"zoomed-image-container\"\n           @click=\"!hasTouch ? stopZoom() : null\"\n      >\n        <img v-if=\"zoomedImageSrc\"\n             ref=\"zoomedImageElement\"\n             :src=\"zoomedImageSrc\"\n             class=\"zoomed-image\"\n        >\n        <ui-button ref=\"zoomElClose\"\n                   theme=\"reset\"\n                   class=\"button-zoom-close\"\n                   name=\"no-zoom\"\n                   aria-label=\"Fermer le Zoom\"\n                   @click=\"stopZoom()\"\n        >\n          <span class=\"icon\" v-html=\"CloseIcon\" />\n        </ui-button>\n        <div v-if=\"!hasInteract && isInstall\"\n             ref=\"zoomPicto\"\n             class=\"button-infos-touch\"\n        >\n          <img src=\"/assets/interaction-touch.png\">\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .ArticleObject\n    position absolute\n    size 100% \n    overflow hidden\n    z-index 1\n    cursor default !important\n\n  .navigation\n    f(r, $justify:space-between)\n    position absolute \n    top 50%\n    left 10px \n    right 10px\n    transform translateY(-50%)\n    z-index 4\n    color currentColor\n    :deep()\n      .btn.UiButton\n        border 1px solid currentColor\n        color currentColor\n        border-radius 5px\n        rp(width, 40px)\n        rp(height, 30px)\n        padding 10px\n        f(center)\n\n        &:hover\n          cursor pointer\n      .icon svg\n        position relative\n        color currentColor\n        size 10px\n      .btn.-prev .icon svg\n        transform rotate(-180deg)\n  .zoomed-image\n    absolute 0\n    z-index 5\n  .doc\n  .UiSwiper\n  .UiSwiper :deep(.swiper-container)\n    size 100%\n    f(center)\n  .wrapper\n  .UiSwiper \n    :deep(.slide)\n      f(center)\n      position relative\n      .button-zoom.UiButton\n        position absolute\n        r height, 60px\n        r width, 60px\n        top 23%\n        rp(right, 10px)\n        border-radius 50%\n        transform translateX(40%)\n        overflow hidden\n        color currentColor\n        addVariantProps(background-color, $dark: true, $opacity: 0.85)\n        z-index 2\n\n        .icon\n          r width, 16px\n          r height, 16px\n          absolute top 50% left 50%\n          transform translate(-50%, -50%)\n        .border\n          absolute 0\n        .inner\n          position static\n          display block\n          size 100%\n          \n\n  .media-swip\n    size 100%\n  .ui-picture\n    &[data-cover=\"contain\"]\n      :deep()\n        .picture\n          f(center)\n        .img\n          width auto\n\n  .container-pic\n    rp(height, 666px )\n    rp(width, 666px)  \n    position relative\n\n\n  .button-zoom-close\n    absolute top 20px right 0\n    z-index 2000\n    cursor pointer\n    position absolute\n    rp(top, 10px)\n    rp(right, 10px)\n    border 1px solid currentColor\n    color currentColor\n    border-radius 5px\n    rp(width, 40px)\n    rp(height, 30px)\n    padding 10px\n    f(center)\n    addVariantProps(background-color, $dark: true)\n\n    &:hover\n      cursor pointer\n    .icon\n      r width, 10px\n      r height, 10px\n\n  .button-infos-touch\n    z-index 6\n    position absolute\n    absolute top 50% left 50%\n    color currentColor\n    rp(width, 60px)\n    rp(height, 60px)\n    transform translate(-50%, -50%)\n  </style>\n","export default \"__VITE_PUBLIC_ASSET__081d3e86__\"","<docs>\n  # InteractiveObject\n  > A component that store a webgl scene for an interactive object\n  \n  @author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, tryOnUnmounted } from \"@vueuse/core\";\nimport emitter, { EVENTS } from \"plugins/store/events\";\nimport { clearWebGL, useWebGL } from \"plugins/webgl/three\";\nimport useFlow from \"utils/flow\";\nimport { defineComponent, ref, toRefs } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useRoute } from \"vue-router\";\n\nexport default defineComponent({\n  name: \"InteractiveObject\",\n  props: {\n    id: {\n      type: String,\n      default: null\n    },\n    variant: {\n      type: String,\n      default: null\n    },\n    type: {\n      type: String,\n      default: \"vinyl\"\n    },\n    article: {\n      type: [String, Array],\n      default: null\n    },\n    article_scale: {\n      type: Number,\n      default: 2\n    },\n    article_offset: {\n      type: Number,\n      default: 0\n    },\n    pochette_recto: {\n      type: String,\n      default: null\n    },\n    pochette_verso: {\n      type: String,\n      default: null\n    },\n    tranche:{\n      type: String,\n      default: null\n    },\n    page_1: {\n      type: String,\n      default: null\n    },\n    page_2: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const { t } = useI18n();\n    const Scene = templateRef<HTMLElement>(\"Scene\");\n    const route = useRoute();\n    const showSpinner = ref(true);\n\n    const { onInitUi } = useFlow({\n      ui: { \n        vinyl: () => import(\"./webgl/VinylScene\"),\n        book: () => import(\"./webgl/BookScene\"),\n        cd: () => import(\"./webgl/CDScene\"),\n       },\n      }\n    );\n\n    const folder = `/thematiques/${route.params.thematique}/contenu/`\n    \n    onInitUi( ({ui}) => {\n      emitter.on(EVENTS.OBJECT_DETAIL_READY, onReady);\n      \n      let scene = ui.vinyl.VinylScene;\n      if(props.type === \"book\") scene = ui.book.BookScene;\n      if(props.type === \"cd\") scene = ui.cd.CDScene;\n\n      useWebGL(\n      [\n        { \n          glScene: scene,\n          settings: {\n            folder,\n            id: props.id,\n            tranche: props.tranche,\n            recto: props.pochette_recto,\n            verso: props.pochette_verso,\n            article: props.article,\n            article_scale: props.article_scale ?? 2,\n            article_offset: props.article_offset ?? 0,\n            page_1: props.page_1,\n            page_2: props.page_2,\n          }\n        },\n      ], { antialias:true, canvasContainer: Scene.value, alpha:true, sizeBounds: {el:Scene.value} });\n\n      \n    });\n    \n    const onReady = () => {\n      showSpinner.value = false;\n    }\n    \n    tryOnUnmounted(() => {\n      emitter.off(EVENTS.OBJECT_DETAIL_READY, onReady);\n      clearWebGL(true);\n    })\n\n    return {\n      t,\n      ...toRefs(props),\n      showSpinner\n    };\n  },\n});\n</script>\n\n<template>\n  <section ref=\"el\"\n           class=\"InteractiveObject\"\n  >\n    <div ref=\"Scene\" class=\"sceneInteractive\" />\n    <span :data-show=\"showSpinner\" class=\"spinner\" />\n  </section>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .InteractiveObject\n    position absolute\n    size 100%\n    f(center)\n\n  .sceneInteractive\n    position relative\n    size 100% 100%\n\n  .spinner\n    absolute 0\n    top 50%\n    left calc(\"50vw - 10px\")\n    size 26px\n    border 1px solid\n    addVariantProps(border-top-color, $dark:false)\n    border-bottom-color transparent\n    border-radius 50%\n    transform-origin center\n    display inline-block\n    box-sizing border-box\n    animation rotation 1s linear infinite\n    pointer-events none\n    opacity 0\n    trans(opacity, 1s)\n    &[data-show=\"true\"]\n      opacity 1\n\n@keyframes rotation \n  0%\n    transform: translate(-50%, -50%) rotate(0deg)\n\n  100%\n    transform: translate(-50%, -50%) rotate(360deg)\n  </style>\n","<docs>\n# PageThematiqueSingle\n> The CG thematique page single\n\n@author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, tryOnUnmounted, until, VueInstance } from '@vueuse/core';\nimport SvgArrow from 'assets/svg/arrow.svg?raw';\nimport { default as CloseIcon, default as IconClose } from 'assets/svg/close.svg?raw';\nimport IconPlus from 'assets/svg/plus.svg?raw';\nimport StarIcon from 'assets/svg/star.svg?raw';\nimport axios from 'axios';\nimport { store as scrollStore } from 'components/SmoothScroll/store';\nimport { store as loaderStore } from 'components/ui/Loader/store';\nimport AudioPlayer from 'components/UiKit/AudioPlayer/AudioPlayerBar.vue';\nimport { WebGLSize } from 'components/WebGL/gl';\nimport { store as themeStore } from 'pages/Thematique/store';\nimport emitter, { EVENTS } from 'plugins/store/events';\nimport { interactWithSceneAt } from 'plugins/webgl/three';\nimport { store as appStore } from 'store/app';\nimport usePageFlow from 'utils/flow/page';\nimport { gsap } from \"vendors/gsap\";\nimport { computed, defineComponent, onBeforeMount, provide, ref, toRefs } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport BorderSvg from \"./assets/border.svg?raw\";\nimport ArticleObject from \"./blocks/ArticleObject.vue\";\nimport InteractiveObject from \"./blocks/InteractiveObject.vue\";\n\nexport interface VueAnimate extends VueInstance {\n  animateIn(): void;\n  animateOut(): void;\n}\n\nexport default defineComponent({\n  name: \"PageThematiqueSingle\",\n  components: {\n    AudioPlayer,\n    ArticleObject,\n    InteractiveObject\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const Panel = templateRef<HTMLElement>(\"Panel\");\n    const Content = templateRef<HTMLElement>(\"Content\");\n    const LeftSide = templateRef<HTMLElement>(\"LeftSide\");\n    const el = templateRef<HTMLElement>(\"el\");\n    const disabled = computed(() => appStore.disabled);\n    const showArticle = ref(false); //to show article on click\n    const zoomedArticle = ref(false);\n    const { done } = toRefs(loaderStore.state);\n    const isDetailReady = ref(false);\n    const reducerSize = ref({ width: 0, height: 0 });\n\n    //check if the thematique page is in the store (exists)\n    const isValidThematique = themeStore.findTheme(`/${route.params.thematique as string}/`);\n\n    const { readyToRender, getData, onInitUi } = usePageFlow<ObjectSingle>({\n      load() {\n\n        if (!isValidThematique) {\n          router.push('/');\n          return Promise.resolve();\n        }\n\n        return axios.get(`/thematiques/${route.params.thematique}/data.json`)\n          .then(({ data }) => {\n            themeStore.update(data);\n            themeStore.setCurrent(data.id);\n            const object = themeStore.findObjectBySlug(route.params.slug as string);\n\n            if (object) {\n              // console.log(\"Found object:\", object);\n            } else {\n              appStore.setIs404();\n            }\n            return {\n              parent: data,\n              ...object\n            }\n          })\n      }\n    });\n\n    onBeforeMount( () => {\n      if(!appStore.introSeen && appStore.redirection) {\n        router.push(\"/\");\n        return;\n      }\n    });\n\n    onInitUi(async () => {\n      if (!disabled.value) appStore.disableApp(true);\n\n      // set the background color\n      if (themeStore.current) {\n        appStore.setAppBgColor(themeStore.current.bgColor);\n        themeStore.setNextVariant();\n      }\n\n      scrollStore.setScrollable(false);\n      emitter.on(EVENTS.OBJECT_DETAIL_READY, onDetailReady);\n      emitter.on(EVENTS.OBJECT_SHOW_ARTICLE, onShowArticle);\n\n      await until(done).toBe(true);\n\n      let delay = 0;\n\n      if (page.value.type !== 'video' && page.value.type !== 'article') {\n        await until(isDetailReady).toBe(true);\n\n        delay = 200;\n      }\n\n      // animation\n      setTimeout(() => {\n        animateIn();\n      }, delay);\n    });\n\n    // Animation Transition In\n    const animateIn = () => {\n      gsap.timeline()\n        .add(() => {\n          Panel.value.classList.remove(\"hidden\");\n          Content.value.classList.remove(\"hidden\");\n          interactWithSceneAt(0, {\n            callback: \"show\",\n          })\n        }, 0)\n        .fromTo(Panel.value, { xPercent: 105, }, { xPercent: 0, opacity: 1, ease: \"power4.out\", duration: 1.5 }, 0.4)\n        .fromTo(LeftSide.value, { xPercent: -105 }, { xPercent: 0, opacity: 1, ease: \"power4.out\", duration: 1.5 }, 0.2)\n        .add(() => {\n          interactWithSceneAt(0, {\n            callback: \"toggleShowingInside\",\n            params: true\n          })\n        }, .8)\n        .add(() => {\n          appStore.disableApp(false);\n        }, 1.5);\n    }\n\n    // Leaving the page - Clearing \n    tryOnUnmounted(() => {\n      scrollStore.setScrollable(true);\n    });\n\n    const goBackListing = () => {\n      themeStore.toggleFromListing(true);\n      appStore.disableApp(true);\n      gsap.timeline()\n        .to(el.value, { opacity: 0, ease: \"power4.out\", duration: 1 }, 0)\n        .add(() => {\n          router.push({ name: 'thematique', params: { slug: route.params.thematique } });\n        }, 1);\n    }\n\n    const onDetailReady = () => {\n      isDetailReady.value = true;\n    }\n\n    const onShowArticle = (size: any | WebGLSize) => {\n      reducerSize.value = { width: size?.width * 1.5, height: size?.height * 1.5 };\n      showArticle.value = true;\n    }\n\n    const onBackToInteractive = () => {\n      showArticle.value = false;\n\n      setTimeout(() => {\n        interactWithSceneAt(0, {\n          callback: \"revertToInteractive\"\n        });\n      }, 100)\n    }\n\n    const onZoomedArticle = (value: boolean) => {\n      zoomedArticle.value = value;\n    }\n\n    const onClickCredit = (e: any, route: any) => {\n      e.preventDefault();\n      appStore.disableApp(true);\n\n      gsap.timeline()\n        .to(el.value, { opacity: 0, ease: \"power4.out\", duration: 1 }, 0)\n        .add(() => {\n          router.push(route);\n        }, 1);\n    }\n\n    tryOnUnmounted(() => {\n      emitter.off(EVENTS.OBJECT_DETAIL_READY, onDetailReady);\n      emitter.off(EVENTS.OBJECT_SHOW_ARTICLE, onShowArticle);\n    })\n\n    const page = getData();\n    provide(\"page\", page);\n\n    return {\n      readyToRender,\n      done,\n      page,\n      disabled,\n      goBackListing,\n      onBackToInteractive,\n      onZoomedArticle,\n      onClickCredit,\n      Panel,\n      StarIcon,\n      CloseIcon,\n      el,\n      showArticle,\n      zoomedArticle,\n      SvgArrow,\n      BorderSvg,\n      IconPlus,\n      route,\n      LeftSide,\n      IconClose,\n      reducerWidth: computed(() => `${reducerSize.value.width}px`),\n      reducerHeight: computed(() => `${reducerSize.value.height}px`),\n    };\n  },\n});\n</script>\n\n<template>\n  <main v-if=\"readyToRender && done && page\"\n        ref=\"el\"\n        :key=\"page.parent?.id\"\n        :data-variant=\"page.parent?.id\"\n        :data-disabled=\"disabled\"\n        class=\"page thematique-single\"\n  >\n    <div ref=\"Content\"\n         class=\"content hidden\"\n         :data-variant=\"page.parent?.id\"\n    >\n      <div ref=\"LeftSide\" class=\"left-section\">\n        <ArticleObject v-if=\"(page.type === 'article' && page.article) || (showArticle && page.article)\"\n                       :article=\"page.article\"\n                       :type=\"page.type\"\n                       :theme-id=\"page.parent?.id\"\n                       :variant=\"page.parent?.id\"\n                       :no-zoom=\"page.noZoom\"\n                       @zoomed=\"onZoomedArticle\"\n        />\n        <InteractiveObject v-if=\"page.type === 'book' || page.type === 'cd' || page.type === 'vinyl'\"\n                           :id=\"page.id\"\n                           :type=\"page.type\"\n                           :article=\"page.article\"\n                           :article_scale=\"page.article_scale\"\n                           :article_offset=\"page.article_offset\"\n                           :pochette_recto=\"page.pochette_recto\"\n                           :pochette_verso=\"page.pochette_verso\"\n                           :tranche=\"page.tranche\"\n                           :variant=\"page.parent?.id\"\n                           :page_1=\"page.page_1\"\n                           :page_2=\"page.page_2\"\n        />\n        <ui-video v-if=\"page.type === 'video' && page.video\"\n                  class=\"media -video\"\n                  :poster=\"`/thematiques/${route.params.thematique}/contenu/thumbnails/${page.poster}`\"\n                  :src=\"`/thematiques/${route.params.thematique}/contenu/${page.video}`\"\n        />\n        <div :class=\"['wrapper-reducer', { hidden: !showArticle || zoomedArticle }]\" @click=\"onBackToInteractive\" />\n      </div>\n      <div ref=\"Panel\"\n           class=\"contenu-side-panel hidden\"\n           data-lenis-prevent\n           :data-variant=\"page.parent?.id\"\n      >\n        <div class=\"inner-panel\">\n          <div class=\"inner-top\">\n            <div class=\"close\" @click=\"goBackListing()\">\n              <div class=\"inner\" v-html=\"CloseIcon\" />\n            </div>\n            <div v-if=\"page.note\" class=\"note\">\n              <span v-for=\"(note, index) in 5\"\n                    :key=\"index\"\n                    :class=\"{\n                      fill: (index + 1) <= Math.floor(page.note),\n                      half: (index + 1) === Math.ceil(page.note) && page.note % 1 !== 0,\n                    }\"\n                    class=\"icon-star\"\n              >\n                <span class=\"top\" v-html=\"StarIcon\" />\n                <span class=\"bottom\" v-html=\"StarIcon\" />\n              </span>\n              <span class=\"note-text\">NOTE DE CLAUDE GINGRAS</span>\n            </div>\n            <h1 class=\"title-single\" v-html=\"page.title\" />\n            <div class=\"text wysiwyg\" v-html=\"page.description\" />\n            <div class=\"credits\">\n              <ui-button theme=\"link\"\n                         label=\"CrÃ©dits\"\n                         :to=\"{ name: 'credit', query: { section: page.id } }\"\n                         :variant=\"page.parent?.id\"\n                         tag=\"a\"\n                         @click=\"onClickCredit($event, { name: 'credit', query: { section: page.id } })\"\n              />\n            </div>\n          </div>\n          <div v-if=\"page.sound\"\n               class=\"bottom-sticky\"\n               :data-variant=\"page.parent?.id\"\n          >\n            <AudioPlayer :audio-src=\"`/thematiques/${route.params.thematique}/contenu/${page.sound}`\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .thematique-single\n    position relative\n    min-height var(--viewport-innerHeight)\n    height var(--viewport-innerHeight)\n    overflow hidden\n    &[data-disabled=\"true\"]\n      pointer-events none\n    .content\n      margin 10px\n      width calc('100% - 22px')\n      height calc('100% - 22px')\n      border 1px solid\n      addVariantProps(border-color, $dark: false)\n      position relative\n      border-radius 10px\n      overflow hidden\n      addVariantProps(color, $dark: false)\n      trans(border-color, $duration:1.5s)\n      &.hidden\n        addVariantProps(border-color, $dark: true)\n\n    .left-section\n      width 66.666%\n      height 100%\n      f(center)\n      position relative\n      overflow hidden\n\n    .UIVideo.media\n      rp(width, 700px)\n      rp(height, 429px)\n    \n    .contenu-side-panel\n      position absolute\n      z-index 2\n      top -1px\n      right -1px\n      width 33.333%\n      height calc('100% + 2px')\n      border 1px solid\n      addVariantProps(background-color, $dark: true)\n      addVariantProps(border-color, $dark: false)\n      addVariantProps(color, $dark: false)\n      z-index 1000\n      border-top-right-radius 10px\n      border-bottom-right-radius 10px\n      .inner-panel\n        position relative\n        height 100%\n        .inner-top\n          rp(padding-top, 50px)\n          rp(padding-left, 10px)\n          rp(padding-right, 10px)\n          rp(padding-bottom, 70px)\n          overflow auto\n          height 100%\n\n      &.hidden\n        pointer-events none\n        opacity 0\n\n      .close\n        cursor pointer\n        position fixed\n        rp(top, 10px)\n        rp(right, 10px)\n        addVariantProps(border-color, $dark: false)\n        addVariantProps(color, $dark: false)\n        border 1px solid\n        border-radius 5px\n        rp(width, 40px)\n        rp(height, 30px)\n        padding 10px\n        f(center)\n\n        &:hover\n          cursor pointer\n        .inner\n          size 100%\n          \n\n        \n      .note\n        rp(margin-bottom, 20px)\n        .note-text\n          display inline-block\n          margin-left 10px\n          f-style('Text14', $uppercase: true)\n        .icon-star\n          display inline-block\n          position relative\n          rp(height, 18px)\n          rp(width, 18px)\n          .top\n            z-index 1\n            absolute 0\n          .bottom\n            z-index 2\n            absolute 0\n          margin-right 5px\n          &.fill\n            :deep() svg\n              path\n                fill currentColor\n          &.half\n            .top\n              :deep() svg\n                path\n                  fill currentColor\n              clip-path polygon(0 0, 50% 0, 50% 100%, 0% 100%);\n      .title-single\n        f-style('h3')\n        rp(margin-bottom, 40px)\n        :deep() em\n          font-style italic\n      .credits\n        rp(margin-top, 40px)\n        position relative\n        z-index 1\n      .bottom-sticky\n        border-top 1px solid\n        addVariantProps(border-color, $dark: false)\n        addVariantProps(background-color, $dark: true)\n        position absolute\n        bottom 0\n        left 0\n        right 0\n        z-index 3\n        rp(padding, 10px)\n\n    .wrapper-reducer\n      position absolute\n      top -1px\n      left -1px\n      width v-bind(reducerWidth)\n      height v-bind(reducerHeight)\n      border 1px solid\n      addVariantProps(border-color, $dark: false)\n      border-radius 10px\n      z-index 10\n      background-color transparent\n      cursor pointer\n      trans(opacity, $duration:1s)\n      &.hidden\n        pointer-events none\n        opacity 0\n</style>\n"],"file":"assets/single-Jw4Zz6eQ.js"}