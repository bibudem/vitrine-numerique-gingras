{"version":3,"mappings":"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","names":["_sfc_main$1","defineComponent","props","emit","clicked","ref","onInitUi","useFlow","el","templateRef","discover","title","subtitle","descriptionEl","gsap","_a","animateIn","animateOut","launchAnimation","toRefs","arrow","_hoisted_1","_hoisted_2","_component_ui_button","_resolveComponent","_openBlock","_createElementBlock","_createElementVNode","_ctx","_hoisted_3","_hoisted_4","_createVNode","cta","imageClaude","imageBackground","_sfc_main","Hero","SoundButton","router","useRouter","toobig","computed","interfaceStore","done","loaded","loaderStore","BackgroundImage","ClaudeImage","isLeaving","Scene","getData","readyToRender","usePageFlow","axios","data","__vitePreload","visibleSceneIndex","appStore","stopWatchInactive","ui","until","useWebGL","themeStore","emitter","EVENTS","onClickTheme","onPageTransition","animate","watch","inactive","stopSound","playSound","interactWithSceneAt","changeScene","index","oldScene","getActiveSceneAt","scene","updateBgColor","MenuStore","tl","onDiscover","sound","page","provide","switchRoute","route","routeParams","ContainerRatio","params","goToCredit","e","tryOnUnmounted","clearWebGL","SoundOnSVG","SoundOffSVG","ArrowLink","_normalizeClass","_component_SoundButton","introSeen","_createCommentVNode","_createBlock","_component_Hero","_mergeProps","_component_ui_picture"],"ignoreList":[],"sources":["../../src/vue/src/pages/Home/blocks/Hero.vue","../../src/vue/src/pages/Home/img/MH-CGingras-184.jpg","../../src/vue/src/pages/Home/img/background-image.png","../../src/vue/src/pages/Home/index.vue"],"sourcesContent":["<docs>\n  # HeroHome\n  > The hero for homepage\n  \n  @author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, VueInstance } from \"@vueuse/core\";\nimport arrow from 'assets/svg/arrow.svg?raw';\nimport { gsap } from \"vendors/gsap\";\nimport { defineComponent, ref, toRefs } from 'vue';\n//import { STEPS } from \"../webgl/LineScene\";\nimport useFlow from 'utils/flow';\n\nexport default defineComponent({\n  name: \"HeroHome\",\n  props: {\n    title: {\n      type: String,\n      default: '',\n    },\n    subtitle: {\n      type: String,\n      default: '',\n    },\n    description: {\n      type: String,\n      default: '',\n    },\n    cta: {\n      type: String,\n      default: '',\n    },\n  },\n  emits: [\"discover\"],\n  setup(props, { emit }) {\n    const clicked = ref<boolean>(false);\n    const { onInitUi } = useFlow();\n    const el = templateRef<HTMLElement>(\"el\");\n    const discover = templateRef<VueInstance>(\"Discover\");\n    const title = templateRef<HTMLElement>(\"Title\");\n    const subtitle = templateRef<HTMLElement>(\"Subtitle\");\n    const descriptionEl = templateRef<HTMLElement>(\"Description\");\n\n    onInitUi(() => {\n      gsap.timeline()\n        .set(title.value, { scale: .9, opacity: 0, })\n        .set(subtitle.value, { yPercent: -50, opacity: 0, })\n        .set(descriptionEl.value, { yPercent: 50, opacity: 0, })\n        .set(discover.value?.$el, { yPercent: -50, opacity: 0, });\n    });\n\n    // Tween to display hero elements \n    const animateIn = () => {\n      gsap.timeline()\n        .add(() => {\n          el.value.classList.remove(\"hidden\")\n        }, 0)\n        .to(title.value, { scale: 1, opacity: 1, ease: \"power4.inOut\", duration: 1.5 }, 0)\n        .to(subtitle.value, { yPercent: 0, opacity: 1, ease: \"power4.out\", duration: 1.5 }, .8)\n        .to(descriptionEl.value, { yPercent: 0, opacity: 1, ease: \"power4.out\", duration: 1.5 }, .8)\n        .to(discover.value?.$el, { yPercent: 0, opacity: 1, ease: \"power4.out\", duration: 1.5 }, .8);\n    }\n\n    // Tween to hide hero elements \n    const animateOut = () => {\n      gsap.timeline()\n        .to(el.value, { opacity: 0, clearProps: \"all\", ease: \"power4.out\", duration: .7 }, 0)\n        .add(() => {\n          el.value.classList.add(\"hidden\")\n        }, .5)\n    }\n\n    const launchAnimation = () => {\n\n      if(clicked.value) return;\n      \n      emit('discover');\n      clicked.value = true;\n    }\n\n    return {\n      ...toRefs(props),\n      //\n      animateIn,\n      animateOut,\n      launchAnimation,\n      arrow\n    };\n  },\n});\n</script>\n\n<template>\n  <section ref=\"el\"\n           class=\"heroHome\"\n           :data-dark=\"false\"\n  >\n    <span ref=\"Subtitle\"\n          class=\"subtitle\"\n          v-html=\"subtitle\"\n    />\n    <h1 ref=\"Title\"\n        class=\"title\"\n        v-html=\"title\"\n    />\n    <div ref=\"Description\"\n         class=\"description\"\n         v-html=\"description\"\n    />\n\n    <ui-button ref=\"Discover\"\n               class=\"cta\"\n               theme=\"primary\"\n               :icon=\"arrow\"\n               direction=\"right\"\n               :label=\"cta\"\n               @click=\"launchAnimation\"\n    />\n  </section>\n</template>\n\n<style lang=\"stylus\" scoped>\n  .heroHome\n    absolute 0\n    //size 100% auto\n    margin 10px\n    f(center, $direction:column)\n    color $c-dark_blue_udm\n    text-align center\n    border 1px solid $c-dark_blue_udm\n    border-radius 10px\n    opacity 1\n    trans(all, 2s)\n    \n    &.hidden\n      pointer-events none\n      opacity 0\n      margin 0\n      //border 0 solid $c-dark_blue_udm\n\n\n    .title\n      f-style(h1)\n      text-align center\n      will-change transform\n\n      :deep()\n        .italic\n          font-family $ff-title_italic\n        .upper\n          text-transform uppercase\n\n    .subtitle\n      f-style('h2', $uppercase: true)\n      rp(margin-bottom, 40px)\n\n    .description\n      rp(margin-top, 60px)\n      f-style('text14', $uppercase: true)\n      rp(max-width, 580px)\n      :deep()\n        p + p\n          rp(margin-top, 20px)\n\n    .cta\n      absolute bottom\n      bottom 10px\n      right 10px\n      \n  </style>\n","export default \"__VITE_ASSET__CHwlquDq__\"","export default \"__VITE_ASSET__D3irq2Sa__\"","<docs>\n  # PageHome\n  > The homepage\n  \n  @author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, toRefs, tryOnUnmounted, until, VueInstance } from '@vueuse/core';\nimport ArrowLink from 'assets/svg/arrow-link.svg?raw';\nimport SoundOffSVG from \"assets/svg/sound_off.svg?raw\";\nimport SoundOnSVG from \"assets/svg/sound_on.svg?raw\";\nimport axios from 'axios';\nimport { WebGLSceneInterface } from 'components/WebGL/gl';\nimport { store as MenuStore } from 'components/ui/Header/store';\nimport loaderStore from 'components/ui/Loader/store';\nimport { store as themeStore } from \"pages/Thematique/store\";\nimport emitter, { EVENTS } from \"plugins/store/events\";\nimport { clearWebGL, getActiveSceneAt, interactWithSceneAt, updateBgColor, useWebGL } from 'plugins/webgl/three';\nimport { store as appStore } from 'store/app';\nimport { store as interfaceStore } from \"store/interface\";\nimport SoundButton from \"ui/SoundButton.vue\";\nimport usePageFlow from 'utils/flow/page';\nimport { playSound, stopSound } from 'utils/helpers/Sound';\nimport { gsap } from \"vendors/gsap\";\nimport { computed, defineComponent, provide, ref, watch, WatchStopHandle } from 'vue';\nimport { useRouter } from 'vue-router';\nimport Hero from './blocks/Hero.vue';\nimport imageClaude from './img/MH-CGingras-184.jpg';\nimport imageBackground from './img/background-image.png';\n\nexport interface VueAnimate extends VueInstance {\n  animateIn(): void;\n  animateOut(): void;\n}\nexport default defineComponent({\n  name: \"PageHome\",\n  components: {\n    Hero,\n    SoundButton\n  },\n  setup() {\n    const router = useRouter();\n    const toobig = computed(() => interfaceStore.isViewportTooBig);\n    const { done, loaded } = toRefs(loaderStore.state);\n    const Hero = templateRef<VueAnimate>(\"Hero\");\n    const el = templateRef<HTMLElement>(\"el\");\n    const BackgroundImage = templateRef<VueInstance>(\"BackgroundImage\");\n    const ClaudeImage = templateRef<HTMLElement>(\"ClaudeImage\");\n    const isLeaving = ref(false);\n    const Scene = templateRef<HTMLElement>(\"Scene\");\n\n    const { onInitUi, getData, readyToRender } = usePageFlow<PageHome>({\n      load() {\n        return axios.get(`/home/data.json`)\n          .then(({ data }) => {\n            return {\n              ...data\n            }\n          })\n      },\n      ui: {\n        library: () => import(\"./blocks/webgl/LibraryScene\"),\n        line: () => import(\"./blocks/webgl/LineScene\"),\n      },\n    });\n\n    const visibleSceneIndex = ref(appStore.introSeen ? 1 : 0);\n\n    let stopWatchInactive: WatchStopHandle | null = null;\n\n    onInitUi(async ({ ui }) => {\n\n      await until(done).toBe(true);\n\n      useWebGL(\n        [\n          {\n            glScene: ui.line.default,\n            disabled: visibleSceneIndex.value !== 0,\n\n          },\n          {\n            glScene: ui.library.default,\n            disabled: visibleSceneIndex.value !== 1\n          },\n        ], { antialias: true, canvasContainer: Scene.value, bgColor: '#192096', alpha: true },);\n\n      themeStore.setCurrentObject();\n      appStore.setAppBgColor('255, 234, 249');\n      emitter.on(EVENTS.CLICK_THEME, onClickTheme);\n      emitter.on(EVENTS.PAGE_TRANSITION, onPageTransition);\n\n      animate();\n\n      // watch for inactivity\n      stopWatchInactive = watch(\n        computed(() => appStore.isInactive),\n        inactive => {\n          if (visibleSceneIndex.value === 1) {\n            if (inactive) {\n              // mute the sound\n              stopSound(\"home-track\");\n\n              appStore.setIntroSeen(false);\n            }\n            else {\n              playSound(\"home-track\", 2000, true);\n\n              interactWithSceneAt(1, {\n                callback: 'setReady'\n              });\n            }\n          }\n        }\n      )\n    });\n\n    const changeScene = (index: number) => {\n      gsap.timeline()\n        .add('start')\n        .to(BackgroundImage.value, { scale: 1, opacity: 1, ease: \"power4.inOut\", duration: 1.5 }, 'start')\n        .to(Scene.value, { scale: 1, opacity: 0, ease: \"power4.inOut\", duration: 1 }, 'start-=0.3')\n        .set(ClaudeImage.value, { scale: 0.8, opacity: 0, ease: \"power4.inOut\" }, 0)\n        .to(ClaudeImage.value, { scale: 0.8, opacity: 1, ease: \"power4.inOut\", duration: 1 }, 'start+=1.5')\n        .to(ClaudeImage.value, { scale: 1, opacity: 1, ease: \"power4.inOut\", duration: 1.5 }, 'start+=3.5')\n        .to(ClaudeImage.value.querySelector(\".ui-picture\"), { borderRadius:0, ease: \"power4.inOut\", duration: 1.5 }, 'start+=3.5')\n        .add(\n          () => {\n            visibleSceneIndex.value = index;\n            let oldScene = getActiveSceneAt(index === 1 ? 0 : 1) as WebGLSceneInterface;\n            oldScene.disabled = true;\n            let scene = getActiveSceneAt(index) as WebGLSceneInterface;\n            scene.disabled = visibleSceneIndex.value !== index;\n            if (!scene.disabled) scene.resize();\n            updateBgColor(index === 0 ? '#FFEAF9' : '#192096');\n\n            playSound(\"home-track\", 2000, true);\n            \n            interactWithSceneAt(1, {\n              callback: 'setReady'\n            });\n\n          }, 'start+=5.25'\n        )\n        .to(ClaudeImage.value, { scale: 1, opacity: 0, ease: \"power4.inOut\", duration: 1.5}, 'start+=6.25')\n        .add(() => {\n          MenuStore.setHidden(false)\n        }, 'start+=7.5')\n        .to(Scene.value, { scale: 1, opacity: 1, ease: \"power4.inOut\", duration: 1 }, 'start+=6.2')\n\n\n      if (index === visibleSceneIndex.value) return;\n\n    }\n\n    const animate = () => {\n      const tl = gsap.timeline({\n        delay: appStore.introSeen ? 0 : .2\n      })\n\n      if (!appStore.introSeen) {\n        tl\n          .fromTo(BackgroundImage.value, { opacity: 0 }, { opacity: 1, ease: \"power4.out\", duration: 1.5 }, .5)\n          .add(() => {\n            Hero.value?.animateIn();\n          }, .5)\n      }\n      else {\n        tl\n          .fromTo(el.value.querySelector(\".container-ratio\"), { opacity: 0 }, { opacity: 1, ease: \"power4.out\", duration: 1.5 }, .75)\n          .fromTo(Scene.value, { opacity: 0 }, { opacity: 1, ease: \"power2.inOut\", duration: 1.5 }, .5)\n          .add(() => {\n            updateBgColor('#192096');\n            playSound(\"home-track\", 2000, true);\n          }, 0)\n          .add(() => {\n            MenuStore.setHidden(false);\n          }, .5)\n      }\n    }\n\n    const onDiscover = () => {\n      Hero.value?.animateOut();\n      changeScene(1);\n\n      //-- preload the rest of the spritesheets\n      loaderStore.finishSpriteSheetsLoading();\n\n      // -- play the sound and stop it just to have the \"browser permission\"\n      const sound = loaderStore.getSound(\"home-track\");\n      if (sound) {\n        sound.play();\n        sound.stop();\n      }\n    }\n\n    const page = getData();\n    provide(\"page\", page);\n\n    const switchRoute = (route: any) => {\n      switch (route) {\n        default:\n        case 'violon':\n          router.push({ name: 'thematique', params: { slug: 'festival-de-lanaudiere' } });\n          break;\n        case 'livre':\n          router.push({ name: 'thematique', params: { slug: 'charles-dutoit' } });\n          break;\n        case 'poster':\n          router.push({ name: 'thematique', params: { slug: 'maria-callas' } });\n          break;\n        case 'typewriter':\n          router.push({ name: 'thematique', params: { slug: 'metier-role-de-critique' } });\n          break;\n        case 'partitions':\n          router.push({ name: 'thematique', params: { slug: 'yannick-nezet-seguin' } });\n          break;\n        case 'carnet':\n          router.push({ name: 'thematique', params: { slug: 'universite-de-montreal' } });\n          break;\n        case 'box':\n          router.push({ name: 'thematique', params: { slug: 'les-raretes' } });\n          break\n        case 'record':\n          router.push({ name: 'thematique', params: { slug: 'oeuvres-preferees' } });\n          break;\n\n        case '/biographie/':\n        case '/collection/':\n          router.push({ path: route });\n          break;\n          \n          case '/credits/':\n          router.push({ name: 'credit', query: { section: 'home' } });\n          break;\n      }\n    }\n\n    // Listen for the 'navigate' event\n    const onClickTheme = (routeParams: any) => {\n      const ContainerRatio = document.querySelector(\".home .container-ratio\");\n\n      const tl = gsap.timeline()\n        .add(() => {\n          // mute the sound\n          stopSound(\"home-track\");\n\n          isLeaving.value = true;\n        }, 0)\n        .to(BackgroundImage.value, { opacity: 0, ease: \"power4.out\", duration: .75 }, 0)\n        .add(() => {\n          MenuStore.setHidden(true)\n        }, 0)\n        .add(() => {\n          if (routeParams.bgColor) appStore.setAppBgColor(routeParams.bgColor)\n        }, .7)\n        .add(() => {\n          switchRoute(routeParams.name)\n        }, 1.1);\n\n\n      if (ContainerRatio) {\n        tl.to(ContainerRatio, { opacity: 0, ease: \"power4.out\", duration: .75 }, 0)\n      }\n    }\n\n    const onPageTransition = (params: any) => {\n      onClickTheme({\n        name: params?.url,\n        bgColor: params?.bgColor\n      })\n    }\n\n    const goToCredit = (e:Event) => {\n      e?.preventDefault();\n\n      themeStore.setCurrentObject(\"home\");\n\n      onClickTheme({\n        name: '/credits/',\n        bgColor: \"229, 240, 248\"\n      })\n    }\n\n    tryOnUnmounted(() => {\n      emitter.off(EVENTS.CLICK_THEME, onClickTheme);\n      emitter.off(EVENTS.PAGE_TRANSITION, onPageTransition);\n      clearWebGL(true);\n\n      stopSound(\"home-track\");\n\n      stopWatchInactive?.();\n    })\n\n    return {\n      //\n      toobig,\n      SoundOnSVG,\n      SoundOffSVG,\n      loaderDone: loaded,\n      loaderFullyGone: done,\n      readyToRender,\n      page,\n      Hero,\n      introSeen: computed(() => appStore.introSeen),\n      isLeaving,\n      BackgroundImage,\n      imageClaude,\n      ClaudeImage,\n      visibleSceneIndex,\n      imageBackground,\n      onDiscover,\n      goToCredit,\n      ArrowLink\n    }\n  }\n});\n</script>\n\n<template>\n  <main v-if=\"readyToRender && page\"\n        ref=\"el\"\n        class=\"page home\"\n        :data-toobig=\"toobig\"\n        :data-variant=\"page.id\"\n        :data-scene=\"visibleSceneIndex\"\n  >\n    <div class=\"container-ratio\" :class=\"!loaderFullyGone ? 'hidden' : ''\">\n      <div ref=\"Scene\" class=\"scene\" />\n      <SoundButton :noinvert=\"true\" :data-hidden=\"!introSeen || isLeaving\" />\n      <ui-button theme=\"primary\"\n                 :icon=\"ArrowLink\"\n                 label=\"Crédits\"\n                 :to=\"{ name: 'credit', query: { section: 'home' } }\"\n                 tag=\"a\"\n                 data-variant=\"homepage\"\n                 class=\"credit-btn\"\n                 :data-hidden=\"!introSeen || isLeaving\"\n                 @click=\"goToCredit($event)\"\n      />\n    </div>\n    <Hero v-if=\"!introSeen\"\n          v-bind=\"page\"\n          ref=\"Hero\"\n          :class=\"!loaderFullyGone ? 'hidden' : ''\"\n          @discover=\"onDiscover\"\n    />\n    <div v-if=\"visibleSceneIndex === 0\"\n         ref=\"BackgroundImage\"\n         :class=\"['backgroud-image', !loaderFullyGone ? 'hidden' : '']\"\n    >\n      <ui-picture :src=\"imageBackground\"\n                  cover=\"cover\"\n                  alt=\"background\"\n                  :lazy=\"false\"\n      />\n    </div>\n    <div ref=\"ClaudeImage\" class=\"claude-image\">\n      <ui-picture :src=\"imageClaude\"\n                  cover=\"cover\"\n                  alt=\"Image de claude dans son bureau, entouré de livres\"\n      />\n    </div>\n  </main>\n</template>\n\n<style lang=\"stylus\" scoped>\n.home\n  min-height 100vh\n  \n  //background-color $c-rose\n  f($align: center, $justify: start, $direction:column)\n  position relative\n  &[data-scene=\"1\"]\n    padding 10px\n    padding-top 'calc(5px + %s)' % var(--header-height)\n    .container-ratio\n      border 1px solid $c-dark_blue_udm\n      border-radius 10px\n      overflow hidden\n      min-height 'calc(100vh - 15px - %s)' % var(--header-height)\n\n\n  :deep() .hidden.heroHome\n    opacity 0\n    pointer-events none\n    trans()\n  .container-ratio\n    position relative\n    z-index 1\n    f($align: center, $justify: start, $direction:column)\n    min-height calc('100vh - 20px')\n    size 100%\n    opacity 1\n    border-width 0\n    trans(border-width, $duration: 1.5s)\n    &.hidden\n      opacity 0\n      pointer-events none\n  .scene\n    absolute 0\n    size 100%\n    f($align: center, $justify: start, $direction:column)\n    z-index 1\n\n  \n  .claude-image\n    opacity 0\n    absolute 0\n    z-index 2\n    pointer-events none\n    .ui-picture\n      size 100%\n      border-radius 10px\n  .backgroud-image\n    absolute 0\n    z-index -1\n    pointer-events none\n    opacity 0\n    \n    .ui-picture\n      size 100%\n\n  .heroHome\n    z-index 2\n  \n  .credit-btn\n    absolute bottom 10px right 10px\n    z-index 5\n\n    :deep()\n      .icon\n        transform scaleX(-1)\n\n    &[data-hidden=\"true\"]\n     opacity 0\n     pointer-events none\n</style>\n"],"file":"assets/index-DutWd_NP.js"}