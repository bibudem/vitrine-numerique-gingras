{"version":3,"file":"Checkboxes-CvyLsGUn.js","sources":["../../src/vue/src/components/UiKit/KoddeinVueForm/Field/Checkboxes.vue"],"sourcesContent":["<docs>\n# KoddeinFormCheckboxes\n> Checkboxes field\n\n@author Kevin Bastien <kevin@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs, watch, PropType } from 'vue';\nimport CheckSvg from '../assets/svg/check.svg?raw';\n\nexport interface OptionCheckbox {\n  id?: string | number;\n  title?: string;\n  label?: string;\n  value?: string | number;\n}\n\ninterface Data {\n  internalValue: Array<string>,\n}\n\nconst KoddeinFormCheckboxes = defineComponent({\n  name: \"KoddeinFormCheckboxes\",\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n    /** input options - select */\n    options: {\n      type: Array as PropType<OptionCheckbox>,\n      required: true,\n    },\n    /** input value */\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  emits: ['inputChange'],\n  setup(props, { emit }){\n    const data:Data = reactive(\n      {\n        /** @param {any} internalValue - clone value\n         * - because we must not change props\n         * - in `watch` will sync value within internalValue\n         */\n        internalValue: [],\n      }\n    );\n\n    /**\n     * Watch value, on value update -> set internal value\n     */\n    watch(\n      ()=>props.value,\n      (value) => {\n        if (value) {\n          data.internalValue = value as Array<string>;\n        }\n      },\n      { immediate:true }\n    )\n\n    /**\n     * Watch internal value, on value update -> send value to parent\n     */\n    watch(\n      ()=>data.internalValue,\n      (value) => { \n        if (value === props.value) return;\n        emit('inputChange', value);\n      },\n      // { immediate:true }\n    )\n\n    const computeLabel = (option: any) => {\n    if (typeof option === 'object') {\n        return option.label ? option.label : option.title;\n      }\n      return option;\n    };\n    // if needed, these day we are always returning the index value for this.\n    const computeValue = (option: any) => {\n      if (typeof option === 'object') {\n        return option.value ? option.value : option.id;\n      }\n      return option;\n    };\n\n    return {\n      ...toRefs(data), //data\n      CheckSvg,\n      computeLabel,\n      computeValue\n    }; \n  },\n});\nexport default KoddeinFormCheckboxes\n</script>\n\n<template>\n  <div class=\"options koddein-checkboxes\">\n    <label v-for=\"(option, index) in options\"\n           :key=\"`option--${id}-${index}`\"\n           :for=\"`option--${id}-${index}`\"\n           class=\"checkbox\"\n           :data-active=\"internalValue && internalValue.indexOf(computeValue(option)) >= 0 /* internalValue.indexOf(index) >= 0 /* here we can switch to index if needed */\"\n    >\n      <input :id=\"`option--${id}-${index}`\"\n             v-model=\"internalValue\"\n             :name=\"id\"\n             :value=\"computeValue(option) /* index /* here we can switch to index if needed */\" \n             type=\"checkbox\"\n             class=\"input\"\n      >\n      <span class=\"box\">\n        <span class=\"icon\" v-html=\"CheckSvg\" />\n      </span>\n      <span class=\"label\"\n            v-text=\"computeLabel(option)\"\n      />\n    </label>\n  </div>\n</template>\n\n<style lang=\"stylus\" scoped>\n  /**\n   * TABLE OF CONTENT\n   * --------\n   *  - LAYOUT\n   *  - DEBUG\n   */\n\n  $c-f-border-focus ?= black\n  $c-f-accent ?= black\n\n  $form_check_spacing ?= 10px\n\n  //  ===LAYOUT===\n  .options\n    f(row, $wrap: wrap, $justify: flex-start)\n    margin-bottom - $form_check_spacing\n\n  .checkbox\n    f(row, $justify: flex-start)\n    margin-right 65px\n    margin-bottom $form_check_spacing\n\n  .box\n    position relative\n    display inline-block\n    border 1px solid $c-f-border\n    size 24px\n    margin-right 20px\n    trans()\n\n  .icon\n    absolute top 50% left 50%\n    size 12px 9px\n    transform translate(-50%, -50%)\n    opacity 0\n    trans()\n    color $c-f-accent\n\n    :deep()\n      svg\n        fill currentColor\n\n  .input\n    position absolute\n    opacity 0\n    &:focus + .box\n      border-color $c-f-border-focus\n    &:checked + .box\n      border-color $c-f-border-focus\n      .icon\n        opacity 1\n\n  //  ===DEBUG===\n  [data-debug-mode=\"true\"] .KoddeinFormCheckboxes\n    //\n</style>\n"],"names":["KoddeinFormCheckboxes","defineComponent","props","emit","data","reactive","watch","value","computeLabel","option","computeValue","toRefs","CheckSvg","_hoisted_1","_hoisted_3","_hoisted_4","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_Fragment","_renderList","index","internalValue","_withDirectives","_createElementVNode","$event","_vModelCheckbox","_hoisted_5","_toDisplayString","_hoisted_6"],"mappings":"gPAsBA,MAAMA,EAAwBC,EAAgB,CAC5C,KAAM,wBACN,MAAO,CACL,GAAI,CACF,KAAM,OACN,SAAU,EACZ,EAEA,QAAS,CACP,KAAM,MACN,SAAU,EACZ,EAEA,MAAO,CACL,KAAM,MACN,QAAS,IAAM,CAAA,CAAC,CAEpB,EACA,MAAO,CAAC,aAAa,EACrB,MAAMC,EAAO,CAAE,KAAAC,GAAO,CACpB,MAAMC,EAAYC,EAChB,CAKE,cAAe,CAAA,CAAC,CAEpB,EAKAC,EACE,IAAIJ,EAAM,MACTK,GAAU,CACLA,IACFH,EAAK,cAAgBG,EAEzB,EACA,CAAE,UAAU,EAAK,CACnB,EAKAD,EACE,IAAIF,EAAK,cACRG,GAAU,CACLA,IAAUL,EAAM,OACpBC,EAAK,cAAeI,CAAK,CAAA,CAG7B,EAEM,MAAAC,EAAgBC,GAClB,OAAOA,GAAW,SACXA,EAAO,MAAQA,EAAO,MAAQA,EAAO,MAEvCA,EAGHC,EAAgBD,GAChB,OAAOA,GAAW,SACbA,EAAO,MAAQA,EAAO,MAAQA,EAAO,GAEvCA,EAGF,MAAA,CACL,GAAGE,EAAOP,CAAI,EACd,SAAAQ,EACA,aAAAJ,EACA,aAAAE,CACF,CAAA,CAEJ,CAAC,EAlGDG,EAAA,CAAA,MAAA,4BAAA,WAqHiB,aAAM,EArHvBC,EAAA,CAAA,KAAA,OAAA,OAAA,EAAAC,EAAA,CAAA,MAAA,KAAA,oCAwGI,SAAAC,EAAAC,EAAAC,EAAAC,EAmBQC,EA3HZC,EAAAC,EAAA,cAwGI,MAmBQT,EAAA,EAAAU,EAlBG,EAAwB,EAAAC,EAAAC,EAAA,KAAAC,EAAAT,EAAA,QAAA,CAAAR,EAAAkB,KACxBJ,EAAA,EAAwBC,EAAA,QAAA,CAC5B,IAAK,WAACP,EAAU,EAAA,IAAAU,CAAA,GACf,IAAaC,WAAAA,EAAAA,EAAAA,IAAAA,CAAAA,GAAAA,MAAAA,2BAEnB,eAMCX,EAAA,cAAA,QAAAA,EAAA,aAAAR,CAAA,CAAA,GAAA,CAAA,EAAA,CApHPoB,EAAAC,EAAA,QAAA,CAgHc,GAAI,WAAIb,EAAA,EAAA,IAAAU,CAAA,GACR,sBAAOjB,EAAa,CAAM,IAAAQ,EAAA,CAAA,EAAAa,GAAAd,EAAA,cAAAc,GAC3B,KAAKd,EAAA,GACL,MAAMA,EAAO,aAAAR,CAAA,EAAA,KAAA,qCAEpB,CAEOuB,EAAAf,EAAA,aAAA,CAAA,CAAA,EADaa,EAAA,OAAAf,EAAA,CAAAe,EAASlB,OAAQ,CAAA,MAAA,6BAInC,KAAA,EAAAqB,CAAA,CAAA,CAAA,EADIH,EAAA,OAAA,CAAA,MAAA,QAzHZ,YAAAI,EAAAjB,EAAA,aAAAR,CAAA,CAAA,CAAA,EAAA,KAAA,EAAA0B,CAAA"}