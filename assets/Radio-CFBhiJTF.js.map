{"version":3,"file":"Radio-CFBhiJTF.js","sources":["../../src/vue/src/components/UiKit/KoddeinVueForm/Field/Radio.vue"],"sourcesContent":["<docs>\n# KoddeinFormRadio\n> Radio field\n\n@author Nicolas Husson <nicolas@kffein.com>\n@author Kevin Bastien <kevin@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs, watch } from 'vue';\n\ninterface Data {\n  internalValue?: string | number,\n}\n\nconst KoddeinFormRadio = defineComponent({\n  name: \"KoddeinFormRadio\",\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n    /** input options - select */\n    options: {\n      type: Array,\n      default: () => [],\n    },\n    /** input value */\n    value: {\n      type: [String, Number],\n      default: undefined,\n    },\n  },\n  emits: ['inputChange'],\n  setup(props, { emit }){\n    const data:Data = reactive(\n      {\n        /** @param {any} internalValue - clone value\n         * - because we must not change props\n         * - in `watch` will sync value within internalValue\n         */\n        internalValue: undefined,\n      }\n    );\n\n    /**\n     * Watch value, on value update -> set internal value\n     */\n    watch(\n      ()=>props.value,\n      (value) => {\n        data.internalValue = value;\n      },\n      { immediate:true }\n    )\n\n    /**\n     * Watch internal value, on value update -> send value to parent\n     */\n    watch(\n      ()=>data.internalValue,\n      (value) => { \n        if (value === props.value) return;\n        emit('inputChange', value);\n      },\n      // { immediate:true }\n    )\n\n    const computeLabel = (option: any) => {\n    if (typeof option === 'object') {\n        return option.label ? option.label : option.title;\n      }\n      return option;\n    };\n    // if needed, these day we are always returning the index value for this.\n    const computeValue = (option: any) => {\n      if (typeof option === 'object') {\n        return option.value ? option.value : option.id;\n      }\n      return option;\n    };\n\n    return {\n      ...toRefs(data), //data\n      computeLabel,\n      computeValue\n    }; \n  },\n});\nexport default KoddeinFormRadio\n</script>\n\n<template>\n  <div class=\"options koddein-radios\">\n    <label v-for=\"(option, index) in options\"\n           :key=\"`radio-${id}-${index}`\"\n           :for=\"`radio-${id}-${index}`\"\n           class=\"option\"\n           :data-active=\"internalValue && internalValue === computeValue(option)\"\n    >\n      <input :id=\"`radio-${id}-${index}`\"\n             v-model=\"internalValue\"\n             :value=\"computeValue(option)\"\n             :name=\"id\"\n             type=\"radio\"\n             class=\"input\"\n      >\n      <span class=\"box\" />\n      <span class=\"label\"\n            v-text=\"computeLabel(option)\"\n      />\n    </label>\n  </div>\n</template>\n\n<style lang=\"stylus\" scoped>\n  /**\n   * TABLE OF CONTENT\n   * --------\n   *  - LAYOUT\n   *  - DEBUG\n   */\n  $c-f-border-focus ?= black\n  $c-f-accent ?= black\n\n  $form_check_spacing ?= 10px\n\n  //  ===LAYOUT===\n  .options\n    f(row, $wrap: wrap, $justify: flex-start)\n    margin-bottom -$form_check_spacing\n\n  .option\n    f(row, $justify: flex-start)\n    margin-right 65px\n    margin-bottom $form_check_spacing\n\n  .box\n    position relative\n    display inline-block\n    border 1px solid $c-f-border-focus\n    size 24px\n    margin-right 20px\n    border-radius 50%\n    trans()\n\n    &::after\n      content ''\n      absolute top 50% left 50%\n      size 10px\n      border-radius 50%\n      background-color $c-f-accent\n      transform translate(-50%, -50%)\n      transform-origin center center\n      opacity 0\n      trans()\n\n  .input\n    position absolute\n    opacity 0\n    &:focus + .box\n      border-color $c-f-border-focus\n    &:checked + .box\n      border-color $c-f-border-focus\n      &::after\n        opacity 1\n        transform translate(-50%, -50%)\n\n  //  ===DEBUG===\n  [data-debug-mode=\"true\"] .KoddeinFormRadio\n    //\n</style>\n"],"names":["KoddeinFormRadio","defineComponent","props","emit","data","reactive","watch","value","computeLabel","option","computeValue","toRefs","_hoisted_1","_hoisted_2","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","id","_Fragment","_renderList","index","_createElementBlock","internalValue","_withDirectives","_createElementVNode","$event","_vModelRadio","_toDisplayString","_hoisted_4"],"mappings":"wMAeA,MAAMA,EAAmBC,EAAgB,CACvC,KAAM,mBACN,MAAO,CACL,GAAI,CACF,KAAM,OACN,SAAU,EACZ,EAEA,QAAS,CACP,KAAM,MACN,QAAS,IAAM,CAAA,CACjB,EAEA,MAAO,CACL,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,MAAA,CAEb,EACA,MAAO,CAAC,aAAa,EACrB,MAAMC,EAAO,CAAE,KAAAC,GAAO,CACpB,MAAMC,EAAYC,EAChB,CAKE,cAAe,MAAA,CAEnB,EAKAC,EACE,IAAIJ,EAAM,MACTK,GAAU,CACTH,EAAK,cAAgBG,CACvB,EACA,CAAE,UAAU,EAAK,CACnB,EAKAD,EACE,IAAIF,EAAK,cACRG,GAAU,CACLA,IAAUL,EAAM,OACpBC,EAAK,cAAeI,CAAK,CAAA,CAG7B,EAEM,MAAAC,EAAgBC,GAClB,OAAOA,GAAW,SACXA,EAAO,MAAQA,EAAO,MAAQA,EAAO,MAEvCA,EAGHC,EAAgBD,GAChB,OAAOA,GAAW,SACbA,EAAO,MAAQA,EAAO,MAAQA,EAAO,GAEvCA,EAGF,MAAA,CACL,GAAGE,EAAOP,CAAI,EACd,aAAAI,EACA,aAAAE,CACF,CAAA,CAEJ,CAAC,EAxFDE,EAAA,CAAA,MAAA,wBAAA,EAAAC,EAAA,CAAA,MAAA,aAAA,4CA8FI,SAAAC,EAAAC,EAAAC,EAAAC,EAiBQC,EA/GZC,EAAAC,EAAA,cA8FI,MAiBQR,EAAA,EAAAS,EAhBG,IAAWC,EAAWC,EAAA,KAAAC,EAAAT,EAAA,QAAA,CAAAN,EAAAgB,KACtBJ,EAAA,EAAsBK,EAAA,QAAA,CAC1B,IAAK,SAACX,EAAQ,EAAA,IAAAU,CAAA,GACb,aAAWV,EAAEY,EAAAA,IAAAA,CAAAA,GAAAA,MAAAA,yBAEnB,eAMCZ,EAAA,gBAAAA,EAAA,aAAAN,CAAA,CAAA,EAAA,CA1GPmB,EAAAC,EAAA,QAAA,CAsGc,GAAA,SAAOnB,QAAYe,CAAC,GACpB,sBAAQT,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAc,GAAAf,EAAA,cAAAe,GACT,MAAKf,EAAO,aAAAN,CAAA,EACZ,KAAKM,EAAC,GAAA,KAAA,kCAEb,CAAAgB,EAAAhB,EAAA,aAAA,CAAA,CACA,EAAAC,EAAW,KAACA,EAAO,CAAA,EAAAa,EAAA,OAAA,CAAA,MAAA,KAAA,EAAA,KAAA,EAAA,GACbA,EAAA,OAAA,CAAA,MAAA,QA7GZ,YAAAG,EAAAjB,EAAA,aAAAN,CAAA,CAAA,CAAA,EAAA,KAAA,EAAAwB,CAAA"}