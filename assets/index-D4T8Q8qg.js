var Ce=Object.defineProperty;var Oe=(e,l,t)=>l in e?Ce(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t;var c=(e,l,t)=>Oe(e,typeof l!="symbol"?l+"":l,t);import{e as S,E as y,x as te,y as P,h as W,a as K,z as Le,n as me,l as o,q as D,_ as X,j as _,u as Ae,s as se,B as De,I as ve,k as He,t as ie,b as Re,o as Pe}from"./app-UYNKwKlQ.js";import{bs as Me,bT as ke,bU as $e,bV as Be,ac as We,bW as Se,bX as ye,bY as ze,bZ as qe,a6 as N,al as k,c as xe,b_ as ae,at as Fe,an as ne,ao as re,av as Ve,ax as oe,q as T,d as Z,aQ as H,ay as Y,aS as q,o as L,Z as z,aU as I,aT as F,aO as be,aV as we,aP as Ie,l as $,ad as _e,bn as Ge,az as Te,aR as je,a0 as le,aW as he,a2 as Ne,e as Q,_ as Ue,g as j,r as de,W as Ke,bS as Ye,bm as Je,b8 as Qe}from"./vendor-BT8TDTHT.js";import{b as Xe}from"./index-DX56Q6wl.js";import{S as Ze}from"./SoundButton-BfqiOJg3.js";import{u as et}from"./page-DXcgComY.js";import{r as tt,d as J,W as st}from"./easing-0f4db1c0.esm-RA-xV_5T.js";import{g as it}from"./@debug-lodash-BIjirobg.js";import{M as at,a as nt}from"./index-C8cDmWk7.js";import{I as rt}from"./plus-DZIgIgUI.js";import{I as ot}from"./play-CQXVBNXK.js";import"./LocalStorage-BJPYtshR.js";var lt=Math.max,ht=Math.min;function dt(e,l,t){return e>=ht(l,t)&&e<lt(l,t)}var ut=dt,pt=ut,ue=Me,ct=ke;function ft(e,l,t){return l=ue(l),t===void 0?(t=l,l=0):t=ue(t),e=ct(e),pt(e,l,t)}var gt=ft;const mt=it(gt),U={fps:60,loop:!0,wait:0,autoplay:!0,usePlane:!1},vt=new $e({opacity:0,transparent:!0}),St=new Be({side:We,opacity:0,transparent:!0});class yt extends Se{constructor(t){var s;super();c(this,"config");c(this,"name");c(this,"player");c(this,"textures",[]);c(this,"textureIndex",0);c(this,"textureSheets",[]);c(this,"textureSheetIndex",0);c(this,"textureSheetsReachEnd",!1);c(this,"textureIndexDamped",0);c(this,"waitDamped",0);c(this,"ready",!1);c(this,"seeking",!1);c(this,"playing",!1);return this.name=`spritesheetmesh-${tt(0,1e3)}`,this.config={...t,path:{...t.path,prefix_filename:t.path.prefix_filename??""},settings:t.settings??U},(s=this.config.settings)!=null&&s.usePlane?this.player=new ye(new ze(1,1),St.clone()):this.player=new qe(vt.clone()),this.add(this.player),this}addTextures(t){var s,i;this.textures=t,this.ready=!0,S.emit(y.SPRITESHEET_READY),(i=(s=this.config)==null?void 0:s.settings)!=null&&i.autoplay&&this.play()}resize(t){const s=t??1;this.config.ratio>1?this.scale.set(s*(1*this.config.ratio),1*s,1*s):this.scale.set(1*s,1/this.config.ratio*s,1*s)}render(t){var m,b,R,C,E,A,a;const s=this.player.material,i=((m=this.config.settings)==null?void 0:m.fps)??U.fps,h=((b=this.config.settings)==null?void 0:b.loop)??U.loop,n=((R=this.config.settings)==null?void 0:R.wait)??U.wait,g=Math.floor(this.waitDamped),r=this.config.format==="json"?this.config.path.json.length>1:!1,p=w=>1/(1+w+.48*w*w+.235*w*w*w),u=((C=this.config.settings)==null?void 0:C.events)!==void 0;if(this.config.format==="files")s.map=this.textures[this.textureIndex];else{if(!this.textureSheets.length)return;if(!this.textureSheetsReachEnd){let w=N(this.textureSheets[this.textureSheetIndex].frames),v=w[this.textureIndex];if(v||(this.textureSheetIndex++,this.textureSheetIndex===this.textureSheets.length&&(this.textureSheetsReachEnd=!0),this.textureSheetsReachEnd||(this.textureIndex=0,this.textureIndexDamped=0,w=N(this.textureSheets[this.textureSheetIndex].frames),v=w[this.textureIndex])),v){if(u){const G=N((E=this.config.settings)==null?void 0:E.events).indexOf(v);G!==-1&&S.emit(y.SPRITESHEET_FRAME_EVENT,(A=this.config.settings)==null?void 0:A.events[G])}const d=this.textureSheets[this.textureSheetIndex];s.map=this.textures[this.textureSheetIndex],s.map.repeat.set(d.frames[v].frame.w/d.size.w,d.frames[v].frame.h/d.size.h),s.map.offset.set(d.frames[v].frame.x/d.size.w,1-d.frames[v].frame.h/d.size.h-d.frames[v].frame.y/d.size.h)}}}s.map&&s.map.userData.compressed&&this.player.scale.y>0&&(this.player.scale.y=-1),this.playing?(i==="off"?this.textureIndexDamped+=1:J(this,"textureIndexDamped",this.textureIndexDamped+1,1/i,t.delta,1/0,p,1e-4),Math.floor(this.textureIndexDamped)!==this.textureIndex&&(this.textureIndex=Math.floor(this.textureIndexDamped),(this.textureIndex===this.config.total_frames-1||this.textureSheetsReachEnd)&&(S.emit(y.SPRITESHEET_LAST_FRAME,this.config.id),h?n>0?this.pause():(r&&(this.textureSheetIndex=0,this.textureSheetsReachEnd=!1),this.textureIndex=0,this.textureIndexDamped=0):this.pause()))):n>0&&g!==n?i==="off"?this.waitDamped+=1:J(this,"waitDamped",this.waitDamped+1,i==="off"?0:1/i,t.delta,1/0,p,1e-4):(r&&(this.seeking||(this.textureSheetIndex=0),this.textureSheetsReachEnd=!1),this.seeking||(this.textureIndex=0),this.textureIndexDamped=0,this.waitDamped=0,h&&((a=this.config.settings)!=null&&a.autoplay)&&this.play()),s.needsUpdate=!0}dispose(){var s,i,h;(i=(s=this.player)==null?void 0:s.geometry)==null||i.dispose();const t=this.player.material;(h=t.map)==null||h.dispose(),t.dispose(),k(this.textures,n=>{n==null||n.dispose()}),this.textures=[],this.textureSheets=[]}play(){this.playing=!0,this.seeking=!1,this.material.opacity||(this.material.opacity=1)}pause(){this.playing=!1}seek(t){var s;if(this.config.format==="files")this.textureIndex=t;else if(((s=this.config.path.json)==null?void 0:s.length)===1)this.textureIndex=t;else{const i=xe(this.textureSheets,r=>N(r.frames).length);let h=0,n=0,g=0;k(i,(r,p)=>{mt(t,g,g+r)&&(h=p,n=t-g),g+=r}),this.textureSheetIndex=h,this.textureIndex=n}this.textureSheetIndex===this.textureSheets.length&&(this.textureSheetIndex=this.textureSheets.length-1),this.textureIndex===this.textures.length&&(this.textureIndex=this.textures.length-1),this.seeking=!0,this.render({delta:0,time:0})}get material(){return this.player.material}}const x={default:"default",intro:"intro",introOver:"introOver",illustrationBefore:"illustrationBefore",illustrationAfter:"illustrationAfter",end:"end"},pe=e=>1/(1+e+.48*e*e+.235*e*e*e),xt=100;let ce;class bt extends st{constructor(t){var i;super(t);c(this,"container");c(this,"sceneSize");c(this,"svgData",[]);c(this,"svgConfig");c(this,"lines",[]);c(this,"linesRatio",[]);c(this,"lineMaterial");c(this,"currentStep",x.default);c(this,"isAnimating",!1);c(this,"isTravelling",!1);c(this,"spritesheet");c(this,"handlers",{});this.svgConfig=(i=this.settings)==null?void 0:i.config,this.container=new Se,this.sceneSize=te(this.camera.position.z-this.container.position.z,this.getActiveCamera()),this.lineMaterial=new at({resolution:new ae(P.domElement.offsetWidth,P.domElement.offsetHeight),lineWidth:this.svgConfig.svg.lineWidth,dashArray:1,dashOffset:1,dashRatio:1,opacity:1,color:this.svgConfig.svg.color}),this.lineMaterial.transparent=!0,this.handlers.spritesheetEnd=this.onSpritesheetEnd.bind(this),this.handlers.raf=this.watchSpritesheetLoading.bind(this),this.spritesheet=new yt(this.svgConfig.spritesheet),this.spritesheet.name="spritesheet",this.spritesheet.visible=!1;const s=W.getSpritesheet(`${this.svgConfig.spritesheet.id}-spritesheet`);return this.spritesheet.addTextures(s),S.on(y.SPRITESHEET_LAST_FRAME,this.handlers.spritesheetEnd),this}build(){this.scene.add(this.container),this.svgData=W.getSvg(`${this.svgConfig.spritesheet.id}-svg`).paths,this.update()}update(){var p,u;for(;this.container.children.length;){const m=this.container.children[0];m&&m.name!=="spritesheet"&&((p=m.geometry)==null||p.dispose(),(u=m.material)==null||u.dispose()),this.container.remove(this.container.children[0])}this.container.scale.set(1,1,1),this.container.position.set(0,0,0),this.container.clear(),this.lines=[],k(this.svgData,(m,b)=>{var V;const R=Fe.createShapes(m);let C=[];k(R,G=>{const O=xe(G.getPoints(xt),f=>this.mapPointTo3D(f));C=C.concat(O)});const E=new nt;E.setPoints(C);const A=this.lineMaterial.clone();b<this.linesRatio.length&&this.linesRatio[b]&&(A.dashRatio=this.linesRatio[b]);const a=new ye(E,A);a.name=`line_${b}`;const v=new ne().setFromObject(a).getCenter(new re);a.position.sub(v);const d=((V=this.svgConfig.svg.offsets)==null?void 0:V[b])||{x:0,y:0};d.color&&a.material.color.setStyle(d.color,Ve),a.visible=d.visible===void 0?!0:d.visible,this.svgConfig.spritesheet.id==="art"&&K.highResVersion&&(b===1&&(d.y=-.01),b===2&&(d.x=-.025,d.y=-.03)),this.svgConfig.spritesheet.id==="rarete"&&K.highResVersion&&b===1&&(d.x=-.01,d.y=0),this.svgConfig.spritesheet.id==="metier"&&K.highResVersion&&b===1&&(d.x=-.018,d.y=0),a.position.x+=d.x*this.sceneSize.width,a.position.y+=d.y*this.sceneSize.width,this.container.add(a),this.lines.push(a)});const t=this.svgConfig.svg.width/P.domElement.clientWidth*this.sceneSize.width,s=this.sceneSize.width*2.5/t;this.container.scale.set(s,s,s);const h=new ne().setFromObject(this.container).getSize(new re);this.container.position.x=h.x/2-this.sceneSize.width/2,this.container.position.y=0,this.spritesheet.parent||(this.spritesheet.renderOrder=1,this.scene.add(this.spritesheet));const g=this.svgConfig.spritesheet.width/P.domElement.clientWidth*this.sceneSize.width*s,r=g/this.svgConfig.spritesheet.ratio;this.spritesheet.scale.set(g,r,1),this.svgConfig.svg.globalOffset&&(this.container.position.x+=this.svgConfig.svg.globalOffset.x*this.sceneSize.width||0,this.container.position.y+=this.svgConfig.svg.globalOffset.y*this.sceneSize.height||0),this.svgConfig.spritesheet.globalOffset&&(this.spritesheet.userData.x=this.svgConfig.spritesheet.globalOffset.x*this.sceneSize.width||0,this.spritesheet.userData.y=this.svgConfig.spritesheet.globalOffset.y*this.sceneSize.height||0)}resize(){super.resize(),this.sceneSize=te(this.camera.position.z-this.container.position.z,this.getActiveCamera()),this.lineMaterial.resolution.set(P.domElement.offsetWidth,P.domElement.offsetHeight),this.getActiveScene().children.length?this.svgData.length&&this.update():this.build()}render(t){var i,h;super.render(t);const s=this.currentStep!==x.illustrationBefore?1e-4:.001;if(this.isAnimating){const n=[.02,-.01,.015],g=[-.015,.01,.02];k(this.lines,(r,p)=>{const u=r.material;J(u,"dashRatio",this.svgConfig.svg.steps[this.currentStep].dash,this.svgConfig.svg.steps[this.currentStep].speed,t.delta,1/0,pe,s),r.userData.position?(r.position.x=r.userData.position.x+Math.cos(t.time*2)*n[p],r.position.y=r.userData.position.y+Math.sin(t.time*2)*g[p]):r.userData.position=r.position.clone(),p||(this.currentStep===x.illustrationBefore&&u.dashRatio-this.svgConfig.svg.steps[this.currentStep].dash<.03&&this.draw(x.illustrationAfter),this.currentStep===x.illustrationAfter&&u.dashRatio-this.svgConfig.svg.steps[this.currentStep].dash<.1&&this.draw(x.end),this.currentStep===x.end&&this.svgConfig.svg.maxDiff&&u.dashRatio-this.svgConfig.svg.steps[this.currentStep].dash<this.svgConfig.svg.maxDiff&&this.swapToSpritesheet()),this.linesRatio[p]=u.dashRatio})}if(this.isTravelling){const n=((i=this.svgConfig.spritesheet.globalOffset)==null?void 0:i.sceneOffset)||.15,g=this.currentStep===x.illustrationBefore?0:-(this.sceneSize.width*n),r=this.currentStep===x.illustrationBefore?1:.5;J(this.camera.position,"x",this.sceneSize.width*1.5-g,this.svgConfig.svg.steps[this.currentStep].speed*r,t.delta,1/0,pe,s)}this.spritesheet.visible&&((h=this.spritesheet)==null||h.render(t)),this.spritesheet.position.x=this.camera.position.x+this.spritesheet.userData.x,this.spritesheet.position.y=this.spritesheet.userData.y}clear(){var t;S.off(y.SPRITESHEET_LAST_FRAME,this.handlers.spritesheetEnd),k(this.lines,s=>{var i,h;(i=s.geometry)==null||i.dispose(),(h=s.material)==null||h.dispose(),s.clear()}),this.lineMaterial.dispose(),this.svgData=[],this.container.clear(),this.handlers={},(t=this.spritesheet)==null||t.clear()}dispose(){var t;this.clear(),this.disposeGeometries(this.container),(t=this.spritesheet)==null||t.dispose(),super.dispose()}mapPointTo3D(t){const s=Le(t,{width:P.domElement.clientWidth,height:P.domElement.clientHeight});return new ae(this.sceneSize.width/2*s.x,this.sceneSize.height/2*s.y)}draw(t){if(this.currentStep=t,oe(this.spritesheet.textures,i=>i===void 0)!==-1){W.isSpritesheetLoading||W.finishSpriteSheetsLoading(),this.watchSpritesheetLoading();return}this.isAnimating=!0,this.isTravelling=t===x.illustrationBefore||t===x.illustrationAfter||t===x.end}skip(){this.spritesheet.playing&&this.spritesheet.pause(),this.isAnimating=this.isTravelling=!1,this.onSpritesheetEnd(!0),k(this.lines,t=>{const s=t.material;T.to(s,{opacity:0,duration:.5,ease:"power4.out"})})}leave(){this.spritesheet.playing?T.to(this.spritesheet.material,{opacity:0,ease:"expo.out",duration:1}):(this.currentStep=x.default,this.isAnimating=!0,this.isTravelling=!1)}swapToSpritesheet(){this.spritesheet.visible||(this.spritesheet.visible=!0,this.spritesheet.play(),T.timeline().from(this.spritesheet.material,{opacity:0,ease:"power4.out",duration:this.svgConfig.spritesheet.swapSpeed},0).add(()=>{k(this.lines,t=>{const s=t.material;T.to(s,{opacity:0,duration:this.svgConfig.spritesheet.swapSpeed,ease:"power4.out"})})},0).add(()=>{this.container.visible=!1},this.svgConfig.spritesheet.swapSpeed+.05))}onSpritesheetEnd(t=!1){S.emit(y.SHOW_LISTING),S.off(y.SPRITESHEET_LAST_FRAME,this.handlers.spritesheetEnd),me(`${this.svgConfig.spritesheet.id}-track`,t?500:3500)}watchSpritesheetLoading(){const t=W.getSpritesheet(`${this.svgConfig.spritesheet.id}-spritesheet`);oe(t,i=>i===void 0)===-1?(cancelAnimationFrame(ce),this.spritesheet.addTextures(t),this.draw(this.currentStep)):ce=requestAnimationFrame(this.handlers.raf)}}const wt=Object.freeze(Object.defineProperty({__proto__:null,STEPS:x,default:bt},Symbol.toStringTag,{value:"Module"})),It=Z({name:"HeroThematique",props:{title:{type:String,default:void 0},subtitle:{type:String,default:void 0},cta:{type:String,default:void 0},variant:{type:String,default:"default"}},emits:["discover"],setup(e,{emit:l}){const t=H("el"),s=H("Discover"),i=H("Title"),h=H("Subtitle"),n=()=>{var m;T.timeline().add(()=>{t.value.classList.remove("hidden")},0).from(i.value,{scale:.9,opacity:0,ease:"power4.inOut",duration:1.5},0).from(h.value,{yPercent:50,opacity:0,ease:"power4.out",duration:1.5},.8).from((m=s.value)==null?void 0:m.$el,{yPercent:-50,opacity:0,ease:"power4.out",duration:1.5},.8)},g=()=>{T.timeline().to(t.value,{opacity:0,clearProps:"all",ease:"power4.out",duration:.7},0).add(()=>{t.value.classList.add("hidden")},.5)},r=()=>{o.isIntro||D(0,{callback:"draw",params:x.introOver})},p=()=>{o.isIntro||D(0,{callback:"draw",params:x.intro})},u=()=>{l("discover")};return{...Y(e),animateIn:n,animateOut:g,onOver:r,onOut:p,launchAnimation:u}}}),_t=["data-variant"],Tt=["innerHTML"],Et=["innerHTML"];function Ct(e,l,t,s,i,h){const n=q("ui-button");return L(),z("section",{ref:"el",class:"heroThematique hidden","data-variant":e.variant,"data-dark":!1},[I("h3",{ref:"Subtitle",class:"subtitle",innerHTML:e.subtitle},null,8,Tt),I("h1",{ref:"Title",class:"title",innerHTML:e.title},null,8,Et),F(n,{ref:"Discover",class:"cta",theme:"primary",variant:e.variant,label:e.cta,onMouseover:e.onOver,onMouseout:e.onOut,onClick:e.launchAnimation},null,8,["variant","label","onMouseover","onMouseout","onClick"])],8,_t)}const Ot=X(It,[["render",Ct],["__scopeId","data-v-2b72b6a5"]]),Lt={bgColor:"248, 244, 238",svg:{color:"#3F3785",lineWidth:.018,url:"/thematiques/oeuvres-preferees/lines.svg",width:4533,height:700,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.975,speed:.5},introOver:{dash:.965,speed:.3},illustrationBefore:{dash:.85,speed:1.8},illustrationAfter:{dash:.2,speed:2.2},end:{dash:0,speed:1}},globalOffset:{x:-.082,y:-.045},offsets:[{x:0,y:0},{x:-.01,y:-.015},{x:-.045,y:-.055}]},spritesheet:{id:"art",format:"files",ratio:3500/1274,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/oeuvres-preferees/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.17,y:-.014},width:1500,swapSpeed:.4}},At={bgColor:"245, 245, 245",svg:{color:"#23531B",lineWidth:.018,url:"/thematiques/charles-dutoit/lines.svg",width:4557,height:636,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.995,speed:.5},introOver:{dash:.99,speed:.3},illustrationBefore:{dash:.92,speed:2.3},illustrationAfter:{dash:.3,speed:2.8},end:{dash:0,speed:1.2}},globalOffset:{x:-.05,y:0},offsets:[{x:0,y:0},{x:0,y:0},{x:0,y:0}]},spritesheet:{id:"charles",format:"files",ratio:1750/714,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/charles-dutoit/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.095,y:0,sceneOffset:.1},width:1718,swapSpeed:.6}},Dt={bgColor:"241, 251, 255",svg:{color:"#865234",lineWidth:.018,url:"/thematiques/festival-de-lanaudiere/lines.svg",width:4428,height:624,maxDiff:5e-4,steps:{default:{dash:1,speed:.3},intro:{dash:.982,speed:.5},introOver:{dash:.977,speed:.3},illustrationBefore:{dash:.85,speed:2},illustrationAfter:{dash:.15,speed:2.3},end:{dash:0,speed:.7}},globalOffset:{x:-.2,y:0},offsets:[{x:0,y:.004},{x:.002,y:.003},{x:-.006,y:-.003}]},spritesheet:{id:"festival",format:"files",ratio:1750/934,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/festival-de-lanaudiere/animation/",files_extension:"png"},settings:{fps:120,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.205,y:.005,sceneOffset:.1},width:1500,swapSpeed:1}},Ht={bgColor:"239, 254, 247",svg:{color:"#7E1654",lineWidth:.018,url:"/thematiques/maria-callas/lines.svg",width:4493,height:656,maxDiff:.003,steps:{default:{dash:1,speed:.3},intro:{dash:.99,speed:.5},introOver:{dash:.985,speed:.3},illustrationBefore:{dash:.9,speed:2.2},illustrationAfter:{dash:.3,speed:1.8},end:{dash:0,speed:1}},globalOffset:{x:-.02,y:0},offsets:[{x:0,y:0},{x:-.001,y:.008},{x:.004,y:-.002}]},spritesheet:{id:"maria",format:"files",ratio:1750/737,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/maria-callas/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.074,y:-.025,sceneOffset:.05},width:1900,swapSpeed:.6}},Rt={bgColor:"249, 255, 238",svg:{color:"#717077",lineWidth:.018,url:"/thematiques/metier-role-de-critique/lines.svg",width:4311,height:571,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.989,speed:.5},introOver:{dash:.984,speed:.3},illustrationBefore:{dash:.89,speed:2.5},illustrationAfter:{dash:.5,speed:2.8},end:{dash:0,speed:1}},globalOffset:{x:-.15,y:-.1},offsets:[{x:-.008,y:0},{x:-.028,y:0},{x:-.001,y:.005}]},spritesheet:{id:"metier",format:"files",ratio:1750/970,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/metier-role-de-critique/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.168,y:-.03,sceneOffset:.1},width:1443,swapSpeed:.6}},Pt={bgColor:"255, 249, 233",svg:{color:"#A21300",lineWidth:.018,url:"/thematiques/les-raretes/lines.svg",width:4174,height:578,maxDiff:.003,steps:{default:{dash:1,speed:.3},intro:{dash:.955,speed:.5},introOver:{dash:.945,speed:.3},illustrationBefore:{dash:.8,speed:2.2},illustrationAfter:{dash:.2,speed:1.8},end:{dash:0,speed:.7}},globalOffset:{x:-.17,y:0},offsets:[{x:0,y:0},{x:.0013,y:.013},{x:-.005,y:-.001}]},spritesheet:{id:"rarete",format:"files",ratio:1750/909,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/les-raretes/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.14,y:.002,sceneOffset:.1},width:1539,swapSpeed:.6}},Mt={bgColor:"247, 243, 251",svg:{color:"#192096",lineWidth:.018,url:"/thematiques/universite-de-montreal/lines.svg",width:4079,height:540,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.995,speed:.5},introOver:{dash:.987,speed:.3},illustrationBefore:{dash:.87,speed:2.5},illustrationAfter:{dash:.05,speed:2.8},end:{dash:0,speed:.5}},globalOffset:{x:-.05,y:0},offsets:[{x:0,y:.008},{x:.005,y:-.004},{x:-.004,y:-.002}]},spritesheet:{id:"university",format:"files",ratio:1750/852,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/universite-de-montreal/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.167,y:.01,sceneOffset:.27},width:1380,swapSpeed:1}},kt={bgColor:"253, 246, 250",svg:{color:"#74742f",lineWidth:.018,url:"/thematiques/yannick-nezet-seguin/lines.svg",width:4368,height:1906,maxDiff:.004,steps:{default:{dash:1,speed:.3},intro:{dash:.98,speed:.5},introOver:{dash:.97,speed:.3},illustrationBefore:{dash:.85,speed:2.5},illustrationAfter:{dash:.2,speed:2},end:{dash:0,speed:.5}},globalOffset:{x:-.05,y:0},offsets:[{x:-2/1e3,y:0},{x:2/1e3,y:0},{x:0,y:0}]},spritesheet:{id:"yns",format:"files",ratio:3500/1600,total_frames:121,hidden:!0,noKtx:!0,path:{url:"/thematiques/yannick-nezet-seguin/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.203,y:-.12},width:1750,swapSpeed:.6}},M={yns:kt,maria:Ht,art:Lt,charles:At,festival:Dt,metier:Rt,university:Mt,raretes:Pt},Ee=e=>{switch(e){default:case"yns":return M.yns;case"art":return M.art;case"charles":return M.charles;case"festival":return M.festival;case"metier":return M.metier;case"university":return M.university;case"rarete":return M.raretes;case"maria":return M.maria}},ee=Z({name:"HeaderThematique",props:{variant:{type:String,default:"default"}},setup(e){const l=be(),t=we(),{t:s}=Ie(),{done:i}=Y(W.state),h=H("el"),n=H("BgAnim"),g=$(()=>_.disabled),{onInitUi:r}=Ae(),p=Ee(e.variant);r(async()=>{await _e(i).toBe(!0),S.on(y.SHOW_LISTING,u),S.on(y.THEME_SWITCHING,m)});const u=()=>{o.fromListing?T.timeline({onComplete:()=>{S.emit(y.HIDE_SPRITESHEET)}}).add("start").add(()=>{h.value.classList.remove("hidden")},"start").from(h.value,{opacity:0,ease:"power4.out",duration:1},"start+=.5").add(()=>{var a;(a=n.value)==null||a.classList.add("hidden"),o.toggleIsListing(!0)},"start").add(()=>{if(o.currentObject){const a=h.value.querySelector(`[data-slug="${o.currentObject}"]`);o.setCurrentObject(),se.scrollTo(a,{duration:1.5})}},"start+=0.5"):T.timeline({onComplete:()=>{S.emit(y.HIDE_SPRITESHEET)}}).add("start").add(()=>{h.value.classList.remove("hidden")},0).fromTo(n.value,{ease:"power2.out",scale:.65},{scale:1,yPercent:0,duration:2.75},"start+=1").add(()=>{var a;(a=n.value)==null||a.classList.add("hidden")},"start+=5").from(h.value,{yPercent:100,ease:"power2.out",duration:2.75},"start+=1").add(()=>{o.toggleIsListing(!0)},"start+=3.75")},m=()=>{const a=document.querySelector(".listingSection");T.timeline({onComplete:()=>{o.toggleIsListing(!1)}}).to(a,{opacity:0,ease:"power4.out",duration:1},0).add(()=>{a.classList.add("hidden")},1)},b=Ge("page"),R=()=>{const a=h.value.querySelector(".listing-section");a&&se.scrollTo(a)},C=(a,w)=>{a.preventDefault(),_.disableApp(!0),o.setCurrentObject(w.slug),T.timeline().to(h.value,{opacity:0,ease:"power4.out",duration:1},0).add(()=>{S.emit(y.CLICK_OBJECT)},.2).add(()=>{t.push({name:"object",params:{thematique:l.params.slug,slug:w.slug}})},.8)};Te(()=>{S.off(y.SHOW_LISTING,u)});const E=$(()=>{var a;return((a=De)==null?void 0:a.themes)??[]}),A=()=>{if(!E.value.length)return;const a=E.value.findIndex(d=>d.url===l.path);if(a===-1)return;const w=(a+1)%E.value.length,v=E.value[w];v!=null&&v.url&&T.timeline().add(()=>{S.emit(y.THEME_SWITCHING),m()},0).add(()=>{o.setNextVariant(v.id),o.toggleFromListing(!1),t.push({path:v.url})},1.2)};return{...Y(e),t:s,page:b,disabled:g,el:h,BgAnim:n,animateIn:u,animateOut:m,scrollTarget:R,onSelectObject:C,Arrow:ve,Plus:rt,route:l,IconPlay:ot,imageExtension:$(()=>K.hasWebP?".webp":".png"),borderColor:$(()=>`rgb(${p.bgColor})`),nextTheme:A}}}),fe=()=>{je(e=>({"46442c57":e.borderColor}))},ge=ee.setup;ee.setup=ge?(e,l)=>(fe(),ge(e,l)):fe;const $t=["data-variant","data-disabled"],Bt={class:"header-list"},Wt=["innerHTML"],zt=["innerHTML"],qt={class:"listing-wrapper"},Ft={class:"top"},Vt=["innerHTML"],Gt={class:"index"},jt={class:"bottom"},Nt={class:"img-left"},Ut=["innerHTML"],Kt={class:"content"},Yt=["innerHTML"],Jt={ref:"BgAnim",class:"bg-anim"},Qt={class:"bottom-next"};function Xt(e,l,t,s,i,h){const n=q("ui-button"),g=q("ui-picture");return e.page&&e.page.listing?(L(),z("section",{key:0,ref:"el",class:"listingSection hidden","data-variant":e.variant,"data-dark":!1,"data-disabled":e.disabled},[I("header",Bt,[I("h1",{class:"title",innerHTML:e.page.listing.title},null,8,Wt),I("div",{class:"description wysiwyg",innerHTML:e.page.listing.description},null,8,zt),F(n,{class:"btn",theme:"icon",variant:e.variant,icon:e.Arrow,onClick:e.scrollTarget},null,8,["variant","icon","onClick"])]),I("div",qt,[(L(!0),z(le,null,he(e.page.listing.section,(r,p)=>(L(),z("div",{key:`section-${p}`,class:"listing-section"},[I("div",Ft,[I("h2",{class:"title-section",innerHTML:r.title},null,8,Vt),I("div",Gt,Ne((p+1<10?"0":"")+(p+1)),1)]),I("div",jt,[(L(!0),z(le,null,he(r.objects,(u,m)=>(L(),Q(n,{key:`item-${m}`,tag:"a",theme:"reset",to:{name:"object",params:{thematique:e.route.params.slug,slug:u.slug}},class:"listing-obj","data-slug":u.slug,"data-type":u.type,onClick:b=>e.onSelectObject(b,u)},{default:Ue(()=>[I("div",Nt,[u.type==="video"?(L(),z("span",{key:0,class:"play-btn-img",innerHTML:e.IconPlay},null,8,Ut)):j("",!0),F(g,{src:`/thematiques/${e.route.params.slug}/contenu/thumbnails/${u.id}${e.imageExtension}`,cover:u.type==="video"?"cover":"contain",parallax:!1,lazy:!1},null,8,["src","cover"])]),I("div",Kt,[I("h1",{class:"title-obj",innerHTML:u.title},null,8,Yt),F(n,{ref_for:!0,ref:"Discover",class:"cta",theme:"primary",variant:e.variant,label:"explorer l’objet",icon:e.Plus},null,8,["variant","icon"])])]),_:2},1032,["to","data-slug","data-type","onClick"]))),128))])]))),128))]),I("div",Jt,null,512),I("div",Qt,[F(n,{class:"next-themes",label:e.t("LABELS.next"),theme:"primary",icon:e.Arrow,direction:"right",variant:e.variant,onClick:e.nextTheme},null,8,["label","icon","variant","onClick"])])],8,$t)):j("",!0)}const Zt=X(ee,[["render",Xt],["__scopeId","data-v-5771f4bb"]]),es=Z({name:"PageThematique",components:{Hero:Ot,ListingBlock:Zt,SoundButton:Ze},setup(){const{t:e}=Ie(),l=be(),t=we(),s=H("Scene"),i=H("Hero"),h=H("Listing"),n=$(()=>_.disabled),{done:g}=Y(W.state),r=de(!0),p=de(!1),u=o.findTheme(`/${l.params.slug}/`),{readyToRender:m,getData:b,onInitUi:R}=et({load(){return u?Xe.get(`/thematiques/${l.params.slug}/data.json`).then(({data:f})=>(o.update(f),o.setCurrent(f.id),{...f})):(t.push("/"),Promise.resolve())},ui:{illustration:()=>Re(()=>Promise.resolve().then(()=>wt),void 0)}});Ke(()=>_.isAPageTransition,f=>{f!==void 0&&a()}),Ye(()=>{if(!_.introSeen&&_.redirection){t.push("/");return}}),R(async({ui:f})=>{n.value||_.disableApp(!0);const B=Ee(O.value.id);await _e(g).toBe(!0),He([{glScene:f.illustration.default,settings:{config:B}}],{antialias:!0,alpha:!0,canvasContainer:s.value,clearForMobile:!0}),o.current&&(_.setAppBgColor(B==null?void 0:B.bgColor),o.setNextVariant()),o.fromListing?E():(C(),S.on(y.THEME_SWITCHING,v),S.on(y.HIDE_SPRITESHEET,V),S.on(y.SHOW_LISTING,d))}),Te(()=>{o.toggleIntro(!1),o.toggleIsListing(!1),o.toggleThemeHeader(!1),ie(!0),S.off(y.THEME_SWITCHING,v),S.off(y.HIDE_SPRITESHEET,V),S.on(y.SHOW_LISTING,d)});const C=()=>{T.timeline().add(()=>{D(0,{callback:"draw",params:x.intro})},.1).add(()=>{var f;(f=i.value)==null||f.animateIn()},.5).add(()=>{o.toggleThemeHeader(!0)},1).add(()=>{_.disableApp(!1)},1.6)},E=()=>{S.emit(y.SHOW_LISTING),o.toggleThemeHeader(!0),T.timeline().add(()=>{D(0,{callback:"leave"}),o.toggleIntro(!0),r.value=!1},.1).add(()=>{o.toggleFromListing(!1)},.5).add(()=>{_.disableApp(!1)},1.5)},A=()=>{T.timeline().add(()=>{var f;D(0,{callback:"draw",params:x.default}),(f=i.value)==null||f.animateOut()},0)},a=()=>{_.disableApp(!0),T.timeline().add(()=>{var f,B;r.value?(D(0,{callback:"leave"}),(f=i.value)==null||f.animateOut()):(B=h.value)==null||B.animateOut()},0).add(()=>{_.disableApp(!1);const f=_.isAPageTransition;_.setPageTransition(void 0),f&&t.push(f)},1.3)},w=()=>{var f;o.toggleIntro(!0),p.value=!0,(f=i.value)==null||f.animateOut(),o.toggleThemeHeader(!1),D(0,{callback:"draw",params:x.illustrationBefore}),Pe(`${O.value.id}-track`)},v=()=>{_.disableApp(!0),A(),me(`${O.value.id}-track`),o.toggleIntro(!1)},d=()=>{p.value=!1},V=()=>{D(0,{callback:"clear"}),r.value=!1,o.setIllustrationSeen(O.value.id),ie(!0)},G=()=>{o.toggleFromListing(!0),o.setIllustrationSeen(O.value.id),D(0,{callback:"skip"})},O=b();return Je("page",O),{t:e,readyToRender:m,page:O,disabled:n,onDiscover:w,onSwitchTheme:v,heroVisible:r,soundButtonVisible:p,onSkip:G,hasSeen:$(()=>o.hasSeenIllu(O.value.id)),isIntro:$(()=>o.isIntro),isListing:$(()=>o.isListing),ArrowSVG:ve}}}),ts=["data-variant","data-disabled","data-listing","data-seen"],ss={ref:"Scene",class:"scene"};function is(e,l,t,s,i,h){const n=q("Hero"),g=q("SoundButton"),r=q("ui-button"),p=q("ListingBlock");return e.readyToRender?(L(),z("main",{ref:"el",key:e.page.id,"data-variant":e.page.id,"data-disabled":e.disabled,"data-listing":e.isListing,"data-seen":e.hasSeen,class:"page thematique"},[e.heroVisible?(L(),Q(n,Qe({key:0},e.page,{ref:"Hero",variant:e.page.id,onDiscover:e.onDiscover}),null,16,["variant","onDiscover"])):j("",!0),I("div",ss,null,512),F(g,{noinvert:!0,theme:e.page.id,"data-hidden":!e.isIntro||!e.soundButtonVisible},null,8,["theme","data-hidden"]),e.isIntro&&e.hasSeen&&!e.isListing?(L(),Q(r,{key:`header-thematique-${e.isIntro}`,label:e.t("LABELS.skip"),theme:"primary",class:"skip",icon:e.ArrowSVG,tag:"a",variant:e.page.id,onClick:e.onSkip},null,8,["label","icon","variant","onClick"])):j("",!0),F(p,{ref:"Listing",variant:e.page.id},null,8,["variant"])],8,ts)):j("",!0)}const vs=X(es,[["render",is],["__scopeId","data-v-480e33be"]]);export{vs as default};
//# sourceMappingURL=index-D4T8Q8qg.js.map
