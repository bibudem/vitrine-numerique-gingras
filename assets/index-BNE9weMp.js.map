{"version":3,"file":"index-BNE9weMp.js","sources":["../../src/vue/src/pages/Fund/assets/collection_1.jpg?url","../../src/vue/src/pages/Fund/assets/collection_2.jpg?url","../../src/vue/src/pages/Fund/index.vue"],"sourcesContent":["export default \"__VITE_ASSET__CH5Q$0Gr__\"","export default \"__VITE_ASSET__lqHKdb2w__\"","<docs>\n# PageFund\n> The fund page\n\n@author Kffein <contact@kffein.com>\n</docs>\n\n<script lang=\"ts\">\nimport { templateRef, tryOnUnmounted } from '@vueuse/core';\nimport axios from 'axios';\nimport { store as scrollStore } from \"components/SmoothScroll/store\";\nimport KFF from \"components/ui/KFF.vue\";\nimport { each } from 'lodash';\nimport { store as themeStore } from \"pages/Thematique/store\";\nimport emitter, { EVENTS } from 'plugins/store/events';\nimport { store as appStore } from \"store/app\";\nimport { store as NavStore } from \"ui/Header/store\";\nimport usePageFlow from 'utils/flow/page';\nimport { gsap } from \"vendors/gsap\";\nimport { defineComponent, onBeforeMount, provide, ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport default defineComponent({\n  name: \"PageFund\",\n  components: {\n    KFF,\n  },\n  setup() {\n    const hero = ref<any>()\n    const router = useRouter();\n    const el = templateRef<HTMLElement>(\"el\");\n    const { readyToRender, getData, onInitUi } = usePageFlow<PageFund>({\n      load() {\n        return axios.get(`/collection/data.json`)\n          .then(({ data }) => {\n            return {\n\n              ...data\n            }\n          })\n      },\n\n    });\n\n    onBeforeMount( () => {\n      if(!appStore.introSeen && appStore.redirection) {\n        router.push(\"/\");\n        return;\n      }\n    });\n\n    onInitUi( () => {\n      gsap.timeline()\n        .add( () => {\n          el.value.querySelector(\".header\")?.classList.remove(\"hidden\");\n          el.value.querySelector(\".KFF\")?.classList.remove(\"hidden\");\n        }, .4)\n        .add( () => {\n          each(el.value.querySelectorAll(\".section\"), elSection => elSection?.classList.remove(\"hidden\"));\n        }, .4)\n        .add( () => {\n          if (themeStore.currentObject) {\n            const selectedObject = el.value.querySelector(`[data-slug=\"${themeStore.currentObject}\"]`);\n            themeStore.setCurrentObject();\n            scrollStore.scrollTo(selectedObject as HTMLElement, { duration: 1.5 });\n          }\n        }, .45)\n\n      emitter.on(EVENTS.PAGE_TRANSITION, onPageTransition);\n    });\n\n    const page = getData();\n    provide(\"page\", page);\n\n    const getAssetPath = (image: string): string => {\n      return new URL(`./assets/${image}`, import.meta.url).href;\n    };\n\n    const onPageTransition = (params:any) => {\n      el.value.querySelector(\".header\")?.classList.add(\"hidden\");\n      el.value.querySelector(\".KFF\")?.classList.add(\"hidden\");\n      each(el.value.querySelectorAll(\".section\"), elSection => elSection?.classList.add(\"hidden\"));\n      \n      gsap.timeline()\n        .add( () => {\n          NavStore.setHidden(true);\n        }, 0)\n        .add( () => {\n          if(params?.bgColor) appStore.setAppBgColor(params?.bgColor);\n        }, .6)\n        .add( () => {\n          router.push({path:params?.url});\n        }, 1)\n    }\n\n    const goToCredit = (e : Event, credit:string) => {\n      e?.preventDefault();\n\n      themeStore.setCurrentObject(credit);\n\n      gsap.timeline()\n        .add( () => {\n          NavStore.setHidden(true);\n        }, 0)\n        .add( () => {\n          appStore.setAppBgColor(\"229, 240, 248\");\n        }, .5)\n        .to(el.value, { opacity: 0, ease: \"power4.out\", duration: 1 }, 0)\n        .add(() => {\n          router.push({ name: 'credit', query: { section: credit }});\n        }, 1)\n    }\n\n    tryOnUnmounted( () => {\n      emitter.off(EVENTS.PAGE_TRANSITION, onPageTransition);\n    })\n\n    return {\n      readyToRender,\n      page,\n      hero,\n      getAssetPath,\n      goToCredit,\n    };\n  },\n});\n</script>\n\n<template>\n  <main v-if=\"readyToRender\"\n        ref=\"el\"\n        class=\"page fund\"\n  >\n    <header class=\"header hidden\">\n      <h1 class=\"title\" v-html=\"page.title\" />\n    </header>\n\n    <div v-for=\"(sec, index) in page.section\"\n         :key=\"index\"\n         class=\"section hidden\"\n    >\n      <div class=\"left-section\">\n        <h2 class=\"sect-title\" v-html=\"sec.title\" />\n      </div>\n      <div class=\"right-section\">\n        <div class=\"index-title\" v-html=\"(index + 1 < 10 ? '0' : '') + (index + 1)\" />\n        <div class=\"bottom-right\">\n          <div class=\"text-sect wysiwyg\" v-html=\"sec.text\" />\n          <ui-picture v-if=\"sec.img\"\n                      class=\"sect-img\"\n                      :src=\"getAssetPath(sec.img)\"\n                      :data-slug=\"sec.credit\"\n                      cover=\"cover\"\n          />\n          <ui-button class=\"cred\"\n                     theme=\"link\"\n                     label=\"CrÃ©dits\"\n                     tag=\"a\"\n                     :to=\"{ name: 'credit', query: { section: sec.credit } }\"\n                     @click=\"goToCredit($event, sec.credit)\"\n          />\n        </div>\n      </div>\n    </div>\n    <KFF /> \n  </main>\n</template>\n\n<style lang=\"stylus\" scoped>\n.fund\n  color $c-main\n  .header\n    r margin-top, 165px\n    r margin-bottom, 205px\n    trans(opacity, 1s)\n    trans(transform, 2s)\n    &.hidden\n      opacity 0\n      transform translateY(50px)\n  .title\n    f-style('h1')\n    text-transform uppercase\n    text-align center\n    \n    :deep() em\n      text-transform none\n      font-family $ff-title_italic\n\n      \n  .section\n    f($align: flex-start)\n    trans(opacity, 1s)\n    trans(transform, 2s)\n    &.hidden\n      opacity 0\n      transform translateY(50px)\n    .left-section\n      width 50%\n      .sect-title\n        f-style('h2')\n        width 100%\n        r padding-bottom, 10px\n        border-bottom 1px solid $c-main\n        r height, 50px\n        r padding-left, 10px\n    .right-section\n      width 50%\n      \n      .index-title\n        f-style('text14')\n        width 100%\n        r padding-bottom, 10px\n        border-bottom 1px solid $c-main\n        r height, 50px\n        f($align: flex-end)\n\n      .bottom-right\n        r margin-right, 10px\n      .text-sect\n        r margin-top, 80px\n        r margin-bottom, 80px\n        f-style('subtitle')\n\n\n      .sect-img\n        width 100%\n        ratio-box(700/900)\n\n          \n\n      .cred\n        r margin-top, 30px\n        r margin-bottom, 120px\n        \n\n\n</style>\n"],"names":["__vite_glob_0_0","__vite_glob_0_1","_sfc_main","defineComponent","KFF","hero","ref","router","useRouter","el","readyToRender","getData","onInitUi","usePageFlow","axios","data","onBeforeMount","appStore","gsap","_a","_b","each","elSection","themeStore","selectedObject","scrollStore","emitter","EVENTS","onPageTransition","provide","page","getAssetPath","image","params","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_ctx","_openBlock","_createElementBlock","_createElementVNode","_Fragment","_renderList","sec","index","_hoisted_8","_hoisted_9","_createBlock","_component_ui_picture","_createCommentVNode","_createVNode","_component_ui_button","_component_KFF"],"mappings":"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"}