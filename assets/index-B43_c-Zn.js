var ye=Object.defineProperty;var be=(e,o,t)=>o in e?ye(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var f=(e,o,t)=>be(e,typeof o!="symbol"?o+"":o,t);import{e as x,E as y,r as J,w as H,h as P,t as we,v as h,x as k,_ as Q,j as I,u as _e,I as Ie,a as Te,s as Ee,k as Oe,n as Z,b as Ce}from"./app-i-894-h8.js";import{bq as Le,bQ as De,bR as Ae,bS as Pe,ac as Re,bT as ce,bU as fe,bV as Me,bW as He,a6 as G,al as z,c as pe,bX as ee,at as $e,an as te,ao as se,av as ke,ax as ie,q as T,d as X,aQ as M,ay as j,aS as W,o as R,Z as B,aT as q,aU as _,aO as ge,aV as me,aP as Be,l as N,ad as ve,bl as ze,az as Se,aR as We,a0 as ae,aX as ne,a2 as qe,g as U,r as oe,W as Ne,bk as Fe,e as Ge,b6 as Ve}from"./vendor-Dk7UPmZi.js";import{b as je}from"./index-CujeyXVt.js";import{S as Ue}from"./SoundButton-DogkKZ6u.js";import{u as Ke}from"./page-DDF05ZhN.js";import{r as Qe,d as K,W as Xe}from"./easing-0f4db1c0.esm-DWmpH-gU.js";import{g as Ye}from"./@debug-lodash-BIjirobg.js";import{M as Je,a as Ze}from"./index-C7Y9ajrz.js";import{I as et}from"./plus-DZIgIgUI.js";import{I as tt}from"./play-CQXVBNXK.js";import"./LocalStorage-YPpH-X0R.js";var st=Math.max,it=Math.min;function at(e,o,t){return e>=it(o,t)&&e<st(o,t)}var nt=at,ot=nt,re=Le,rt=De;function lt(e,o,t){return o=re(o),t===void 0?(t=o,o=0):t=re(t),e=rt(e),ot(e,o,t)}var ht=lt;const dt=Ye(ht),V={fps:60,loop:!0,wait:0,autoplay:!0,usePlane:!1},ut=new Ae({opacity:0,transparent:!0}),ct=new Pe({side:Re,opacity:0,transparent:!0});class ft extends ce{constructor(t){var s;super();f(this,"config");f(this,"name");f(this,"player");f(this,"textures",[]);f(this,"textureIndex",0);f(this,"textureSheets",[]);f(this,"textureSheetIndex",0);f(this,"textureSheetsReachEnd",!1);f(this,"textureIndexDamped",0);f(this,"waitDamped",0);f(this,"ready",!1);f(this,"seeking",!1);f(this,"playing",!1);return this.name=`spritesheetmesh-${Qe(0,1e3)}`,this.config={...t,path:{...t.path,prefix_filename:t.path.prefix_filename??""},settings:t.settings??V},(s=this.config.settings)!=null&&s.usePlane?this.player=new fe(new Me(1,1),ct.clone()):this.player=new He(ut.clone()),this.add(this.player),this}addTextures(t){var s,i;this.textures=t,this.ready=!0,x.emit(y.SPRITESHEET_READY),(i=(s=this.config)==null?void 0:s.settings)!=null&&i.autoplay&&this.play()}resize(t){const s=t??1;this.config.ratio>1?this.scale.set(s*(1*this.config.ratio),1*s,1*s):this.scale.set(1*s,1/this.config.ratio*s,1*s)}render(t){var m,w,L,C,D,A,r;const s=this.player.material,i=((m=this.config.settings)==null?void 0:m.fps)??V.fps,n=((w=this.config.settings)==null?void 0:w.loop)??V.loop,l=((L=this.config.settings)==null?void 0:L.wait)??V.wait,c=Math.floor(this.waitDamped),a=this.config.format==="json"?this.config.path.json.length>1:!1,p=v=>1/(1+v+.48*v*v+.235*v*v*v),u=((C=this.config.settings)==null?void 0:C.events)!==void 0;if(this.config.format==="files")s.map=this.textures[this.textureIndex];else{if(!this.textureSheets.length)return;if(!this.textureSheetsReachEnd){let v=G(this.textureSheets[this.textureSheetIndex].frames),b=v[this.textureIndex];if(b||(this.textureSheetIndex++,this.textureSheetIndex===this.textureSheets.length&&(this.textureSheetsReachEnd=!0),this.textureSheetsReachEnd||(this.textureIndex=0,this.textureIndexDamped=0,v=G(this.textureSheets[this.textureSheetIndex].frames),b=v[this.textureIndex])),b){if(u){const d=G((D=this.config.settings)==null?void 0:D.events).indexOf(b);d!==-1&&x.emit(y.SPRITESHEET_FRAME_EVENT,(A=this.config.settings)==null?void 0:A.events[d])}const g=this.textureSheets[this.textureSheetIndex];s.map=this.textures[this.textureSheetIndex],s.map.repeat.set(g.frames[b].frame.w/g.size.w,g.frames[b].frame.h/g.size.h),s.map.offset.set(g.frames[b].frame.x/g.size.w,1-g.frames[b].frame.h/g.size.h-g.frames[b].frame.y/g.size.h)}}}s.map&&s.map.userData.compressed&&this.player.scale.y>0&&(this.player.scale.y*=-1),this.playing?(i==="off"?this.textureIndexDamped+=1:K(this,"textureIndexDamped",this.textureIndexDamped+1,1/i,t.delta,1/0,p,1e-4),Math.floor(this.textureIndexDamped)!==this.textureIndex&&(this.textureIndex=Math.floor(this.textureIndexDamped),(this.textureIndex===this.config.total_frames-1||this.textureSheetsReachEnd)&&(x.emit(y.SPRITESHEET_LAST_FRAME,this.config.id),n?l>0?this.pause():(a&&(this.textureSheetIndex=0,this.textureSheetsReachEnd=!1),this.textureIndex=0,this.textureIndexDamped=0):this.pause()))):l>0&&c!==l?i==="off"?this.waitDamped+=1:K(this,"waitDamped",this.waitDamped+1,i==="off"?0:1/i,t.delta,1/0,p,1e-4):(a&&(this.seeking||(this.textureSheetIndex=0),this.textureSheetsReachEnd=!1),this.seeking||(this.textureIndex=0),this.textureIndexDamped=0,this.waitDamped=0,n&&((r=this.config.settings)!=null&&r.autoplay)&&this.play()),s.needsUpdate=!0}dispose(){var s,i,n;(i=(s=this.player)==null?void 0:s.geometry)==null||i.dispose();const t=this.player.material;(n=t.map)==null||n.dispose(),t.dispose(),z(this.textures,l=>{l==null||l.dispose()}),this.textures=[],this.textureSheets=[]}play(){this.playing=!0,this.seeking=!1,this.material.opacity||(this.material.opacity=1)}pause(){this.playing=!1}seek(t){var s;if(this.config.format==="files")this.textureIndex=t;else if(((s=this.config.path.json)==null?void 0:s.length)===1)this.textureIndex=t;else{const i=pe(this.textureSheets,a=>G(a.frames).length);let n=0,l=0,c=0;z(i,(a,p)=>{dt(t,c,c+a)&&(n=p,l=t-c),c+=a}),this.textureSheetIndex=n,this.textureIndex=l}this.textureSheetIndex===this.textureSheets.length&&(this.textureSheetIndex=this.textureSheets.length-1),this.textureIndex===this.textures.length&&(this.textureIndex=this.textures.length-1),this.seeking=!0,this.render({delta:0,time:0})}get material(){return this.player.material}}const S={default:"default",intro:"intro",introOver:"introOver",illustrationBefore:"illustrationBefore",illustrationAfter:"illustrationAfter",end:"end"},le=e=>1/(1+e+.48*e*e+.235*e*e*e),pt=100;let he;class gt extends Xe{constructor(t){var i;super(t);f(this,"container");f(this,"sceneSize");f(this,"svgData",[]);f(this,"svgConfig");f(this,"lines",[]);f(this,"linesRatio",[]);f(this,"lineMaterial");f(this,"currentStep",S.default);f(this,"isAnimating",!1);f(this,"isTravelling",!1);f(this,"spritesheet");f(this,"handlers",{});this.svgConfig=(i=this.settings)==null?void 0:i.config,this.container=new ce,this.sceneSize=J(this.camera.position.z-this.container.position.z,this.getActiveCamera()),this.lineMaterial=new Je({resolution:new ee(H.domElement.offsetWidth,H.domElement.offsetHeight),lineWidth:this.svgConfig.svg.lineWidth,dashArray:1,dashOffset:1,dashRatio:1,opacity:1,color:this.svgConfig.svg.color}),this.lineMaterial.transparent=!0,this.handlers.spritesheetEnd=this.onSpritesheetEnd.bind(this),this.handlers.raf=this.watchSpritesheetLoading.bind(this),this.spritesheet=new ft(this.svgConfig.spritesheet),this.spritesheet.name="spritesheet",this.spritesheet.visible=!1;const s=P.getSpritesheet(`${this.svgConfig.spritesheet.id}-spritesheet`);return this.spritesheet.addTextures(s),x.on(y.SPRITESHEET_LAST_FRAME,this.handlers.spritesheetEnd),this}build(){this.scene.add(this.container),this.svgData=P.getSvg(`${this.svgConfig.spritesheet.id}-svg`).paths,this.update()}update(){var p,u;for(;this.container.children.length;){const m=this.container.children[0];m&&m.name!=="spritesheet"&&((p=m.geometry)==null||p.dispose(),(u=m.material)==null||u.dispose()),this.container.remove(this.container.children[0])}this.container.scale.set(1,1,1),this.container.position.set(0,0,0),this.container.clear(),this.lines=[],z(this.svgData,(m,w)=>{var O;const L=$e.createShapes(m);let C=[];z(L,d=>{const E=pe(d.getPoints(pt),F=>this.mapPointTo3D(F));C=C.concat(E)});const D=new Ze;D.setPoints(C);const A=this.lineMaterial.clone();w<this.linesRatio.length&&this.linesRatio[w]&&(A.dashRatio=this.linesRatio[w]);const r=new fe(D,A);r.name=`line_${w}`;const b=new te().setFromObject(r).getCenter(new se);r.position.sub(b);const g=((O=this.svgConfig.svg.offsets)==null?void 0:O[w])||{x:0,y:0};g.color&&r.material.color.setStyle(g.color,ke),r.visible=g.visible===void 0?!0:g.visible,r.position.x+=g.x*this.sceneSize.width,r.position.y+=g.y*this.sceneSize.height,this.container.add(r),this.lines.push(r)});const t=this.svgConfig.svg.width/H.domElement.clientWidth*this.sceneSize.width,s=this.sceneSize.width*2.5/t;this.container.scale.set(s,s,s);const n=new te().setFromObject(this.container).getSize(new se);this.container.position.x=n.x/2-this.sceneSize.width/2,this.container.position.y=0,this.spritesheet.parent||(this.spritesheet.renderOrder=1,this.scene.add(this.spritesheet));const c=this.svgConfig.spritesheet.width/H.domElement.clientWidth*this.sceneSize.width*s,a=c/this.svgConfig.spritesheet.ratio;this.spritesheet.scale.set(c,a,1),this.svgConfig.svg.globalOffset&&(this.container.position.x+=this.svgConfig.svg.globalOffset.x*this.sceneSize.width||0,this.container.position.y+=this.svgConfig.svg.globalOffset.y*this.sceneSize.height||0),this.svgConfig.spritesheet.globalOffset&&(this.spritesheet.userData.x=this.svgConfig.spritesheet.globalOffset.x*this.sceneSize.width||0,this.spritesheet.userData.y=this.svgConfig.spritesheet.globalOffset.y*this.sceneSize.height||0)}resize(){super.resize(),this.sceneSize=J(this.camera.position.z-this.container.position.z,this.getActiveCamera()),this.lineMaterial.resolution.set(H.domElement.offsetWidth,H.domElement.offsetHeight),this.getActiveScene().children.length?this.svgData.length&&this.update():this.build()}render(t){var i,n;super.render(t);const s=this.currentStep!==S.illustrationBefore?1e-4:.001;if(this.isAnimating){const l=[.02,-.01,.015],c=[-.015,.01,.02];z(this.lines,(a,p)=>{const u=a.material;K(u,"dashRatio",this.svgConfig.svg.steps[this.currentStep].dash,this.svgConfig.svg.steps[this.currentStep].speed,t.delta,1/0,le,s),a.userData.position?(a.position.x=a.userData.position.x+Math.cos(t.time*2)*l[p],a.position.y=a.userData.position.y+Math.sin(t.time*2)*c[p]):a.userData.position=a.position.clone(),p||(this.currentStep===S.illustrationBefore&&u.dashRatio-this.svgConfig.svg.steps[this.currentStep].dash<.03&&this.draw(S.illustrationAfter),this.currentStep===S.illustrationAfter&&u.dashRatio-this.svgConfig.svg.steps[this.currentStep].dash<.1&&this.draw(S.end),this.currentStep===S.end&&this.svgConfig.svg.maxDiff&&u.dashRatio-this.svgConfig.svg.steps[this.currentStep].dash<this.svgConfig.svg.maxDiff&&this.swapToSpritesheet()),this.linesRatio[p]=u.dashRatio})}if(this.isTravelling){const l=((i=this.svgConfig.spritesheet.globalOffset)==null?void 0:i.sceneOffset)||.15,c=this.currentStep===S.illustrationBefore?0:-(this.sceneSize.width*l),a=this.currentStep===S.illustrationBefore?1:.5;K(this.camera.position,"x",this.sceneSize.width*1.5-c,this.svgConfig.svg.steps[this.currentStep].speed*a,t.delta,1/0,le,s)}this.spritesheet.visible&&((n=this.spritesheet)==null||n.render(t)),this.spritesheet.position.x=this.camera.position.x+this.spritesheet.userData.x,this.spritesheet.position.y=this.spritesheet.userData.y}clear(){var t;x.off(y.SPRITESHEET_LAST_FRAME,this.handlers.spritesheetEnd),z(this.lines,s=>{var i,n;(i=s.geometry)==null||i.dispose(),(n=s.material)==null||n.dispose(),s.clear()}),this.lineMaterial.dispose(),this.svgData=[],this.container.clear(),this.handlers={},(t=this.spritesheet)==null||t.clear()}dispose(){var t;this.clear(),this.disposeGeometries(this.container),(t=this.spritesheet)==null||t.dispose(),super.dispose()}mapPointTo3D(t){const s=we(t,{width:H.domElement.clientWidth,height:H.domElement.clientHeight});return new ee(this.sceneSize.width/2*s.x,this.sceneSize.height/2*s.y)}draw(t){if(this.currentStep=t,ie(this.spritesheet.textures,i=>i===void 0)!==-1){P.isSpritesheetLoading||P.finishSpriteSheetsLoading(),this.watchSpritesheetLoading();return}this.isAnimating=!0,this.isTravelling=t===S.illustrationBefore||t===S.illustrationAfter||t===S.end}leave(){this.spritesheet.playing?T.to(this.spritesheet.material,{opacity:0,ease:"expo.out",duration:1}):(this.currentStep=S.default,this.isAnimating=!0,this.isTravelling=!1)}swapToSpritesheet(){this.spritesheet.visible||(this.spritesheet.visible=!0,this.spritesheet.play(),T.timeline().from(this.spritesheet.material,{opacity:0,ease:"power4.out",duration:this.svgConfig.spritesheet.swapSpeed},0).add(()=>{z(this.lines,t=>{const s=t.material;T.to(s,{opacity:0,duration:this.svgConfig.spritesheet.swapSpeed,ease:"power4.out"})})},0).add(()=>{this.container.visible=!1},this.svgConfig.spritesheet.swapSpeed+.05))}onSpritesheetEnd(){x.emit(y.SHOW_LISTING),x.off(y.SPRITESHEET_LAST_FRAME,this.handlers.spritesheetEnd),this.fadeSound()}fadeSound(t=3500){const s=P.getSound(`${this.svgConfig.spritesheet.id}-track`);s&&s.playing()&&(s.once("fade",()=>{s.stop()}),s.fade(s.volume(),0,t))}watchSpritesheetLoading(){const t=P.getSpritesheet(`${this.svgConfig.spritesheet.id}-spritesheet`);ie(t,i=>i===void 0)===-1?(cancelAnimationFrame(he),this.spritesheet.addTextures(t),this.draw(this.currentStep)):he=requestAnimationFrame(this.handlers.raf)}}const mt=Object.freeze(Object.defineProperty({__proto__:null,STEPS:S,default:gt},Symbol.toStringTag,{value:"Module"})),vt=X({name:"HeroThematique",props:{title:{type:String,default:void 0},subtitle:{type:String,default:void 0},cta:{type:String,default:void 0},variant:{type:String,default:"default"}},emits:["discover"],setup(e,{emit:o}){const t=M("el"),s=M("Discover"),i=M("Title"),n=M("Subtitle"),l=()=>{var m;T.timeline().add(()=>{t.value.classList.remove("hidden")},0).from(i.value,{scale:.9,opacity:0,ease:"power4.inOut",duration:1.5},0).from(n.value,{yPercent:50,opacity:0,ease:"power4.out",duration:1.5},.8).from((m=s.value)==null?void 0:m.$el,{yPercent:-50,opacity:0,ease:"power4.out",duration:1.5},.8)},c=()=>{T.timeline().to(t.value,{opacity:0,clearProps:"all",ease:"power4.out",duration:.7},0).add(()=>{t.value.classList.add("hidden")},.5)},a=()=>{h.isIntro||k(0,{callback:"draw",params:S.introOver})},p=()=>{h.isIntro||k(0,{callback:"draw",params:S.intro})},u=()=>{o("discover")};return{...j(e),animateIn:l,animateOut:c,onOver:a,onOut:p,launchAnimation:u}}}),St=["data-variant"],xt=["innerHTML"],yt=["innerHTML"];function bt(e,o,t,s,i,n){const l=W("ui-button");return R(),B("section",{ref:"el",class:"heroThematique hidden","data-variant":e.variant,"data-dark":!1},[q(l,{ref:"Discover",class:"cta",theme:"primary",variant:e.variant,label:e.cta,onMouseover:e.onOver,onMouseout:e.onOut,onClick:e.launchAnimation},null,8,["variant","label","onMouseover","onMouseout","onClick"]),_("h1",{ref:"Title",class:"title",innerHTML:e.title},null,8,xt),_("h3",{ref:"Subtitle",class:"subtitle",innerHTML:e.subtitle},null,8,yt)],8,St)}const wt=Q(vt,[["render",bt],["__scopeId","data-v-9e3575be"]]),_t={bgColor:"248, 244, 238",svg:{color:"#3F3785",lineWidth:.018,url:"/thematiques/oeuvres-preferees/lines.svg",width:4533,height:700,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.975,speed:.5},introOver:{dash:.965,speed:.3},illustrationBefore:{dash:.85,speed:1.8},illustrationAfter:{dash:.2,speed:2.2},end:{dash:0,speed:1}},globalOffset:{x:-.082,y:-.045},offsets:[{x:0,y:0},{x:-.01,y:-.035},{x:-.045,y:-.105}]},spritesheet:{id:"art",format:"files",ratio:3500/1274,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/oeuvres-preferees/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.17,y:-.014},width:1500,swapSpeed:.4}},It={bgColor:"245, 245, 245",svg:{color:"#23531B",lineWidth:.018,url:"/thematiques/charles-dutoit/lines.svg",width:4557,height:636,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.995,speed:.5},introOver:{dash:.99,speed:.3},illustrationBefore:{dash:.92,speed:2.3},illustrationAfter:{dash:.3,speed:2.8},end:{dash:0,speed:1.2}},globalOffset:{x:-.05,y:0},offsets:[{x:0,y:0},{x:0,y:0},{x:0,y:0}]},spritesheet:{id:"charles",format:"files",ratio:1750/714,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/charles-dutoit/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.095,y:0,sceneOffset:.1},width:1718,swapSpeed:.6}},Tt={bgColor:"241, 251, 255",svg:{color:"#865234",lineWidth:.018,url:"/thematiques/festival-de-lanaudiere/lines.svg",width:4428,height:624,maxDiff:5e-4,steps:{default:{dash:1,speed:.3},intro:{dash:.982,speed:.5},introOver:{dash:.977,speed:.3},illustrationBefore:{dash:.85,speed:2},illustrationAfter:{dash:.15,speed:2.3},end:{dash:0,speed:.7}},globalOffset:{x:-.2,y:0},offsets:[{x:0,y:.004},{x:.002,y:.003},{x:-.006,y:-.003}]},spritesheet:{id:"festival",format:"files",ratio:1750/934,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/festival-de-lanaudiere/animation/",files_extension:"png"},settings:{fps:120,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.205,y:.005,sceneOffset:.1},width:1500,swapSpeed:1}},Et={bgColor:"239, 254, 247",svg:{color:"#7E1654",lineWidth:.018,url:"/thematiques/maria-callas/lines.svg",width:4493,height:656,maxDiff:.003,steps:{default:{dash:1,speed:.3},intro:{dash:.99,speed:.5},introOver:{dash:.985,speed:.3},illustrationBefore:{dash:.9,speed:2.2},illustrationAfter:{dash:.3,speed:1.8},end:{dash:0,speed:1}},globalOffset:{x:-.02,y:0},offsets:[{x:0,y:0},{x:-.001,y:.008},{x:.004,y:-.002}]},spritesheet:{id:"maria",format:"files",ratio:1750/737,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/maria-callas/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.074,y:-.025,sceneOffset:.05},width:1900,swapSpeed:.6}},Ot={bgColor:"249, 255, 238",svg:{color:"#717077",lineWidth:.018,url:"/thematiques/metier-role-de-critique/lines.svg",width:4311,height:571,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.989,speed:.5},introOver:{dash:.984,speed:.3},illustrationBefore:{dash:.89,speed:2.5},illustrationAfter:{dash:.5,speed:2.8},end:{dash:0,speed:1}},globalOffset:{x:-.15,y:-.1},offsets:[{x:-.008,y:0},{x:-.028,y:0},{x:-.001,y:.005}]},spritesheet:{id:"metier",format:"files",ratio:1750/970,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/metier-role-de-critique/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.168,y:-.03,sceneOffset:.1},width:1443,swapSpeed:.6}},Ct={bgColor:"255, 249, 233",svg:{color:"#A21300",lineWidth:.018,url:"/thematiques/les-raretes/lines.svg",width:4174,height:578,maxDiff:.003,steps:{default:{dash:1,speed:.3},intro:{dash:.955,speed:.5},introOver:{dash:.945,speed:.3},illustrationBefore:{dash:.8,speed:2.2},illustrationAfter:{dash:.2,speed:1.8},end:{dash:0,speed:.7}},globalOffset:{x:-.17,y:0},offsets:[{x:0,y:0},{x:.0013,y:.013},{x:-.005,y:-.001}]},spritesheet:{id:"rarete",format:"files",ratio:1750/909,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/les-raretes/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.14,y:.002,sceneOffset:.1},width:1539,swapSpeed:.6}},Lt={bgColor:"247, 243, 251",svg:{color:"#192096",lineWidth:.018,url:"/thematiques/universite-de-montreal/lines.svg",width:4079,height:540,maxDiff:.002,steps:{default:{dash:1,speed:.3},intro:{dash:.995,speed:.5},introOver:{dash:.987,speed:.3},illustrationBefore:{dash:.87,speed:2.5},illustrationAfter:{dash:.05,speed:2.8},end:{dash:0,speed:.5}},globalOffset:{x:-.05,y:0},offsets:[{x:0,y:.008},{x:.005,y:-.004},{x:-.004,y:-.002}]},spritesheet:{id:"university",format:"files",ratio:1750/852,total_frames:120,hidden:!0,noKtx:!0,path:{url:"/thematiques/universite-de-montreal/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.167,y:.01,sceneOffset:.27},width:1380,swapSpeed:1}},Dt={bgColor:"253, 246, 250",svg:{color:"#74742f",lineWidth:.018,url:"/thematiques/yannick-nezet-seguin/lines.svg",width:4368,height:1906,maxDiff:.004,steps:{default:{dash:1,speed:.3},intro:{dash:.98,speed:.5},introOver:{dash:.97,speed:.3},illustrationBefore:{dash:.85,speed:2.5},illustrationAfter:{dash:.2,speed:2},end:{dash:0,speed:.5}},globalOffset:{x:-.05,y:0},offsets:[{x:-2/1e3,y:0},{x:2/1e3,y:0},{x:0,y:0}]},spritesheet:{id:"yns",format:"files",ratio:3500/1600,total_frames:121,hidden:!0,noKtx:!0,path:{url:"/thematiques/yannick-nezet-seguin/animation/",files_extension:"png"},settings:{fps:240,loop:!0,wait:0,autoplay:!1,usePlane:!0},globalOffset:{x:-.203,y:-.12},width:1750,swapSpeed:.6}},$={yns:Dt,maria:Et,art:_t,charles:It,festival:Tt,metier:Ot,university:Lt,raretes:Ct},xe=e=>{switch(e){default:case"yns":return $.yns;case"art":return $.art;case"charles":return $.charles;case"festival":return $.festival;case"metier":return $.metier;case"university":return $.university;case"rarete":return $.raretes;case"maria":return $.maria}},Y=X({name:"HeaderThematique",props:{variant:{type:String,default:"default"}},setup(e){const o=ge(),t=me(),{t:s}=Be(),{done:i}=j(P.state),n=M("el"),l=M("BgAnim"),c=N(()=>I.disabled),{onInitUi:a}=_e(),p=xe(e.variant);let u;a(async()=>{await ve(i).toBe(!0),x.on(y.SHOW_LISTING,w),x.on(y.THEME_SWITCHING,L)});const m=()=>{u=T.timeline({scrollTrigger:{trigger:n.value,start:"95% bottom",end:"bottom bottom",scrub:!0,onUpdate:({progress:r})=>{r>=.6&&!h.showThemeNav?h.toggleThemeNav(!0):r<.6&&h.showThemeNav&&h.toggleThemeNav(!1,!0)}}}).to(n.value.querySelectorAll(".listing-wrapper"),{borderColor:p.svg.color,opacity:.5,marginLeft:100,marginRight:100,duration:2},0)},w=()=>{const r=h.fromListing?"power4.out":"power2.out",v=h.fromListing?1.25:2.75,b=h.fromListing?0:1,g=h.fromListing?1.5:0;T.timeline({onComplete:()=>{x.emit(y.HIDE_SPRITESHEET)}}).add("start").add(()=>{n.value.classList.remove("hidden")},0).fromTo(l.value,{ease:r,scale:.65},{scale:1,yPercent:0,duration:v},`start+=${b}`).add(()=>{var O;(O=l.value)==null||O.classList.add("hidden")},`start+=${5-g}`).from(n.value,{yPercent:100,ease:r,duration:v},`start+=${b}`).add(()=>{h.toggleIsListing(!0),m()},`start+=${v+1-g}`)},L=()=>{const r=document.querySelector(".listingSection");T.timeline({onComplete:()=>{h.toggleIsListing(!1)}}).to(r,{opacity:0,ease:"power4.out",duration:1},0).add(()=>{r.classList.add("hidden")},1)},C=ze("page"),D=()=>{const r=n.value.querySelector(".listing-section");r&&Ee.scrollTo(r)},A=(r,v)=>{r.preventDefault(),I.disableApp(!0),T.timeline().to(n.value,{opacity:0,ease:"power4.out",duration:1},0).add(()=>{x.emit(y.CLICK_OBJECT)},.2).add(()=>{t.push({name:"object",params:{thematique:o.params.slug,slug:v.slug}})},.8)};return Se(()=>{var r;(r=u==null?void 0:u.scrollTrigger)==null||r.kill(),x.off(y.SHOW_LISTING,w)}),{...j(e),t:s,page:C,disabled:c,el:n,BgAnim:l,animateIn:w,animateOut:L,scrollTarget:D,onSelectObject:A,Arrow:Ie,Plus:et,route:o,IconPlay:tt,imageExtension:N(()=>Te.hasWebP?".webp":".png"),borderColor:N(()=>`rgb(${p.bgColor})`)}}}),de=()=>{We(e=>({"650e9875":e.borderColor}))},ue=Y.setup;Y.setup=ue?(e,o)=>(de(),ue(e,o)):de;const At=["data-variant","data-disabled"],Pt={class:"header-list"},Rt=["innerHTML"],Mt=["innerHTML"],Ht={class:"listing-wrapper"},$t={class:"top"},kt=["innerHTML"],Bt={class:"index"},zt={class:"bottom"},Wt=["data-type"],qt={class:"img-left"},Nt=["innerHTML"],Ft={class:"content"},Gt=["innerHTML"],Vt={ref:"BgAnim",class:"bg-anim"};function jt(e,o,t,s,i,n){const l=W("ui-button"),c=W("ui-picture");return e.page&&e.page.listing?(R(),B("section",{key:0,ref:"el",class:"listingSection hidden","data-variant":e.variant,"data-dark":!1,"data-disabled":e.disabled},[_("header",Pt,[_("h1",{class:"title",innerHTML:e.page.listing.title},null,8,Rt),_("div",{class:"description",innerHTML:e.page.listing.description},null,8,Mt),q(l,{class:"btn",theme:"icon",variant:e.variant,icon:e.Arrow,onClick:e.scrollTarget},null,8,["variant","icon","onClick"])]),_("div",Ht,[(R(!0),B(ae,null,ne(e.page.listing.section,(a,p)=>(R(),B("div",{key:`section-${p}`,class:"listing-section"},[_("div",$t,[_("h2",{class:"title-section",innerHTML:a.title},null,8,kt),_("div",Bt,qe((p+1<10?"0":"")+(p+1)),1)]),_("div",zt,[(R(!0),B(ae,null,ne(a.objects,(u,m)=>(R(),B("article",{key:`item-${m}`,class:"listing-obj","data-type":u.type},[_("div",qt,[u.type==="video"?(R(),B("span",{key:0,class:"play-btn-img",innerHTML:e.IconPlay},null,8,Nt)):U("",!0),q(c,{src:`/thematiques/${e.route.params.slug}/contenu/thumbnails/${u.id}${e.imageExtension}`,cover:u.type==="video"?"cover":"contain",parallax:!1,lazy:!1},null,8,["src","cover"])]),_("div",Ft,[_("h1",{class:"title-obj",innerHTML:u.title},null,8,Gt),q(l,{ref_for:!0,ref:"Discover",class:"cta",theme:"primary",variant:e.variant,label:"explorer lâ€™objet",icon:e.Plus,tag:"a",to:{name:"object",params:{thematique:e.route.params.slug,slug:u.slug}},onClick:w=>e.onSelectObject(w,u)},null,8,["variant","icon","to","onClick"])])],8,Wt))),128))])]))),128))]),_("div",Vt,null,512)],8,At)):U("",!0)}const Ut=Q(Y,[["render",jt],["__scopeId","data-v-90f7c0b9"]]),Kt=X({name:"PageThematique",components:{Hero:wt,ListingBlock:Ut,SoundButton:Ue},setup(){const e=ge(),o=me(),t=M("Scene"),s=M("Hero"),i=M("Listing"),n=N(()=>I.disabled),{done:l}=j(P.state),c=oe(!0),a=oe(!1),p=h.findTheme(`/${e.params.slug}/`),{readyToRender:u,getData:m,onInitUi:w}=Ke({load(){return p?je.get(`/thematiques/${e.params.slug}/data.json`).then(({data:d})=>(h.update(d),h.setCurrent(d.id),{...d})):(o.push("/"),Promise.resolve())},ui:{illustration:()=>Ce(()=>Promise.resolve().then(()=>mt),void 0)}});Ne(()=>I.isAPageTransition,d=>{d!==void 0&&A()}),w(async({ui:d})=>{n.value||I.disableApp(!0);const E=xe(O.value.id);await ve(l).toBe(!0),Oe([{glScene:d.illustration.default,settings:{config:E}}],{antialias:!0,alpha:!0,canvasContainer:t.value,clearForMobile:!0}),h.current&&(I.setAppBgColor(E==null?void 0:E.bgColor),h.setNextVariant()),h.fromListing?C():(L(),x.on(y.THEME_SWITCHING,v),x.on(y.HIDE_SPRITESHEET,g),x.on(y.SHOW_LISTING,b))}),Se(()=>{h.toggleIntro(!1),h.toggleIsListing(!1),h.toggleThemeNav(!1),Z(!0),x.off(y.THEME_SWITCHING,v),x.off(y.HIDE_SPRITESHEET,g),x.on(y.SHOW_LISTING,b)});const L=()=>{T.timeline().add(()=>{k(0,{callback:"draw",params:S.intro})},.1).add(()=>{var d;(d=s.value)==null||d.animateIn()},.5).add(()=>{h.toggleThemeNav(!0)},1.4).add(()=>{I.disableApp(!1)},2.5)},C=()=>{x.emit(y.SHOW_LISTING),h.toggleThemeNav(!0),setTimeout(()=>{h.toggleThemeNav(!1)},150),T.timeline().add(()=>{k(0,{callback:"leave"}),h.toggleIntro(!0),c.value=!1},.1).add(()=>{h.toggleFromListing(!1)},.5).add(()=>{I.disableApp(!1)},1.5)},D=()=>{T.timeline().add(()=>{var d;k(0,{callback:"draw",params:S.default}),(d=s.value)==null||d.animateOut()},0)},A=()=>{I.disableApp(!0),T.timeline().add(()=>{var d,E;c.value?(k(0,{callback:"leave"}),(d=s.value)==null||d.animateOut()):(E=i.value)==null||E.animateOut()},0).add(()=>{I.disableApp(!1);const d=I.isAPageTransition;I.setPageTransition(void 0),d&&o.push(d)},1.3)},r=()=>{var E;h.toggleIntro(!0),a.value=!0,(E=s.value)==null||E.animateOut(),h.toggleThemeNav(!1),k(0,{callback:"draw",params:S.illustrationBefore});const d=P.getSound(`${O.value.id}-track`);if(d){const F=d.play();d.fade(0,.5,1e3,F)}},v=()=>{I.disableApp(!0),D()},b=()=>{a.value=!1},g=()=>{k(0,{callback:"clear"}),c.value=!1,Z(!0)},O=m();return Fe("page",O),{readyToRender:u,page:O,disabled:n,onDiscover:r,onSwitchTheme:v,heroVisible:c,soundButtonVisible:a,isIntro:N(()=>h.isIntro),isListing:N(()=>h.isListing)}}}),Qt=["data-variant","data-disabled","data-listing"],Xt={ref:"Scene",class:"scene"};function Yt(e,o,t,s,i,n){const l=W("Hero"),c=W("SoundButton"),a=W("ListingBlock");return e.readyToRender?(R(),B("main",{ref:"el",key:e.page.id,"data-variant":e.page.id,"data-disabled":e.disabled,"data-listing":e.isListing,class:"page thematique"},[e.heroVisible?(R(),Ge(l,Ve({key:0},e.page,{ref:"Hero",variant:e.page.id,onDiscover:e.onDiscover}),null,16,["variant","onDiscover"])):U("",!0),_("div",Xt,null,512),q(c,{noinvert:!0,theme:e.page.id,"data-hidden":!e.isIntro||!e.soundButtonVisible},null,8,["theme","data-hidden"]),q(a,{ref:"Listing",variant:e.page.id},null,8,["variant"])],8,Qt)):U("",!0)}const ds=Q(Kt,[["render",Yt],["__scopeId","data-v-1c35e837"]]);export{ds as default};
//# sourceMappingURL=index-B43_c-Zn.js.map
