var E=Object.defineProperty;var L=(t,s,e)=>s in t?E(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var o=(t,s,e)=>L(t,typeof s!="symbol"?s+"":s,e);import{bW as P,b_ as f,al as p,at as G,c as A,bX as C,an as w,ao as S}from"./vendor-D1O0VZ-0.js";import{W as T,d as F}from"./easing-0f4db1c0.esm-CSyR9Sxy.js";import{M as H,a as O}from"./index-B0DfMSVR.js";import{x as v,y as a,h as R,z as _}from"./app-CKNy3kX0.js";import"./@debug-lodash-BIjirobg.js";const I=t=>1/(1+t+.48*t*t+.235*t*t*t),m={bgColor:"248, 244, 238",svg:{color:"#3F3785",lineWidth:.018,url:"/home/ligne.svg",width:1440,height:562,globalOffset:{x:-.05,y:-.1},offsets:[{x:-.01,y:.03},{x:-.02,y:-.005},{x:-.05,y:-.07}]}},U=200;class $ extends T{constructor(e){super(e);o(this,"container");o(this,"sceneSize");o(this,"svgData",[]);o(this,"lines",[]);o(this,"lineMaterial");o(this,"oldWebGLHidden",!0);this.container=new P,this.sceneSize=v(this.camera.position.z-this.container.position.z,this.getActiveCamera()),this.lineMaterial=new H({resolution:new f(a.domElement.offsetWidth,a.domElement.offsetHeight),lineWidth:m.svg.lineWidth,dashArray:1,dashOffset:1,dashRatio:1,opacity:1,color:m.svg.color}),this.lineMaterial.transparent=!0}build(){this.scene.add(this.container);const e=R.getSvg("ligne-home");this.svgData=e.paths,this.update()}update(){var r,l;for(;this.container.children.length;){const h=this.container.children[0];h&&((r=h.geometry)==null||r.dispose(),(l=h.material)==null||l.dispose()),this.container.remove(this.container.children[0])}this.container.position.set(0,0,0),this.container.clear(),this.lines=[],p(this.svgData,(h,z)=>{const b=G.createShapes(h);let d=[];p(b,D=>{const M=A(D.getPoints(U),W=>this.mapPointTo3D(W));d=d.concat(M)});const u=new O;u.setPoints(d);const x=this.lineMaterial.clone(),c=new C(u,x);c.name=`line_${z}`;const y=new w().setFromObject(c).getCenter(new S);c.position.sub(y),this.container.add(c),this.lines.push(c)});const e=m.svg.width/a.domElement.clientWidth*this.sceneSize.width,n=this.sceneSize.width/e;this.container.scale.set(n,n,n);const i=new w().setFromObject(this.container).getSize(new S);this.container.position.x=i.x/2-this.sceneSize.width/2}resize(){super.resize(),this.sceneSize=v(this.camera.position.z-this.container.position.z,this.getActiveCamera()),this.lineMaterial.resolution.set(a.domElement.offsetWidth,a.domElement.offsetHeight),this.scene.children.length?this.svgData.length&&this.update():this.build()}dispose(){var e;this.disposeGeometries(this.container),(e=this.lineMaterial)==null||e.dispose(),this.lines=[],this.svgData=[],super.dispose()}render(e){super.render(e);const n=[.03,-.01,.01],g=[-.01,.02,.03];p(this.lines,(i,r)=>{const l=i.material;F(l,"dashRatio",0,1,e.delta,1/0,I),i.userData.position?(i.position.x=i.userData.position.x+Math.cos(e.time)*(n[r]*3),i.position.y=i.userData.position.y+Math.sin(e.time)*(g[r]*3)):i.userData.position=i.position.clone()})}mapPointTo3D(e){const n=_(e,{width:a.domElement.clientWidth,height:a.domElement.clientHeight});return new f(this.sceneSize.width/2*n.x,this.sceneSize.height/2*n.y)}}export{$ as default};
//# sourceMappingURL=LineScene-DtmK8R2R.js.map
